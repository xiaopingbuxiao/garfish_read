{
  "version": 3,
  "sources": ["../../../../node_modules/.pnpm/ms@2.1.2/node_modules/ms/index.js", "../../../../node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/common.js", "../../../../node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/browser.js", "../../../../node_modules/.pnpm/has-flag@3.0.0/node_modules/has-flag/index.js", "../../../../node_modules/.pnpm/supports-color@5.5.0/node_modules/supports-color/index.js", "../../../../node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/node.js", "../../../../node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/index.js", "../../../../node_modules/.pnpm/eventemitter2@6.4.7/node_modules/eventemitter2/lib/eventemitter2.js", "../../../utils/src/utils.ts", "../../../utils/src/queue.ts", "../../../utils/src/sentry.ts", "../../../utils/src/domApis.ts", "../../../utils/src/garfish.ts", "../../../utils/src/mimeType.ts", "../../../utils/src/dispatchEvents.ts", "../../../utils/src/container.ts", "../../../utils/src/templateParse.ts", "../../../utils/src/logger.ts", "../../../utils/src/lock.ts", "../../../hooks/src/syncHook.ts", "../../../hooks/src/asyncHook.ts", "../../../hooks/src/syncWaterfallHook.ts", "../../../hooks/src/asyncWaterfallHooks.ts", "../../../hooks/src/pluginSystem.ts", "../../../loader/src/managers/style.ts", "../../../loader/src/managers/module.ts", "../../../loader/src/managers/template.ts", "../../../loader/src/managers/javascript.ts", "../../../loader/src/utils.ts", "../../../loader/src/appCache.ts", "../../../loader/src/index.ts", "../../../core/src/garfish.ts", "../../../core/src/config.ts", "../../../core/src/lifecycle.ts", "../../../../node_modules/.pnpm/es-module-lexer@0.10.5/node_modules/es-module-lexer/dist/lexer.js", "../../../core/src/module/esModule.ts", "../../../core/src/module/app.ts", "../../../core/src/module/resource.ts", "../../../core/src/plugins/fixHMR.ts", "../../../core/src/plugins/lifecycle.ts", "../../../core/src/plugins/preload.ts", "../../../core/src/plugins/performance/subAppObserver.ts", "../../../core/src/plugins/performance/index.ts", "../../../core/src/plugins/logger.ts", "../../../router/src/config.ts", "../../../router/src/utils/urlUt.ts", "../../../router/src/utils/index.ts", "../../../router/src/utils/customEvent.ts", "../../../router/src/utils/navEvent.ts", "../../../router/src/linkTo.ts", "../../../router/src/agentRouter.ts", "../../../router/src/context.ts", "../../../router/src/index.ts", "../../../browser-vm/src/symbolTypes.ts", "../../../browser-vm/src/utils.ts", "../../../browser-vm/src/proxyInterceptor/shared.ts", "../../../browser-vm/src/modules/history.ts", "../../../browser-vm/src/modules/network.ts", "../../../browser-vm/src/proxyInterceptor/document.ts", "../../../browser-vm/src/modules/document.ts", "../../../browser-vm/src/modules/uiEvent.ts", "../../../browser-vm/src/modules/storage.ts", "../../../browser-vm/src/modules/eventListener.ts", "../../../browser-vm/src/modules/mutationObserver.ts", "../../../browser-vm/src/modules/timer.ts", "../../../browser-vm/src/dynamicNode/processParams.ts", "../../../browser-vm/src/dynamicNode/processor.ts", "../../../browser-vm/src/dynamicNode/index.ts", "../../../browser-vm/src/lifecycle.ts", "../../../browser-vm/src/proxyInterceptor/global.ts", "../../../browser-vm/src/sandbox.ts", "../../../browser-vm/src/pluginify.ts", "../../../browser-snapshot/src/patchers/event.ts", "../../../browser-snapshot/src/patchers/interceptor.ts", "../../../browser-snapshot/src/patchers/style.ts", "../../../browser-snapshot/src/patchers/history.ts", "../../../browser-snapshot/src/patchers/interval.ts", "../../../browser-snapshot/src/patchers/variable.ts", "../../../browser-snapshot/src/patchers/webpackjsonp.ts", "../../../browser-snapshot/src/sandbox.ts", "../../../browser-snapshot/src/index.ts", "../../src/instance.ts", "../../src/customElement.ts"],
  "sourcesContent": ["/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n", "\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n", "/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n", "'use strict';\nmodule.exports = (flag, argv) => {\n\targv = argv || process.argv;\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst pos = argv.indexOf(prefix + flag);\n\tconst terminatorPos = argv.indexOf('--');\n\treturn pos !== -1 && (terminatorPos === -1 ? true : pos < terminatorPos);\n};\n", "'use strict';\nconst os = require('os');\nconst hasFlag = require('has-flag');\n\nconst env = process.env;\n\nlet forceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false')) {\n\tforceColor = false;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tforceColor = true;\n}\nif ('FORCE_COLOR' in env) {\n\tforceColor = env.FORCE_COLOR.length === 0 || parseInt(env.FORCE_COLOR, 10) !== 0;\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(stream) {\n\tif (forceColor === false) {\n\t\treturn 0;\n\t}\n\n\tif (hasFlag('color=16m') ||\n\t\thasFlag('color=full') ||\n\t\thasFlag('color=truecolor')) {\n\t\treturn 3;\n\t}\n\n\tif (hasFlag('color=256')) {\n\t\treturn 2;\n\t}\n\n\tif (stream && !stream.isTTY && forceColor !== true) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor ? 1 : 0;\n\n\tif (process.platform === 'win32') {\n\t\t// Node.js 7.5.0 is the first version of Node.js to include a patch to\n\t\t// libuv that enables 256 color output on Windows. Anything earlier and it\n\t\t// won't work. However, here we target Node.js 8 at minimum as it is an LTS\n\t\t// release, and Node.js 7 is not. Windows 10 build 10586 is the first Windows\n\t\t// release that supports 256 colors. Windows 10 build 14931 is the first release\n\t\t// that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(process.versions.node.split('.')[0]) >= 8 &&\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream) {\n\tconst level = supportsColor(stream);\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: getSupportLevel(process.stdout),\n\tstderr: getSupportLevel(process.stderr)\n};\n", "/**\n * Module dependencies.\n */\n\nconst tty = require('tty');\nconst util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.destroy = util.deprecate(\n\t() => {},\n\t'Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.'\n);\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n\t// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n\t// eslint-disable-next-line import/no-extraneous-dependencies\n\tconst supportsColor = require('supports-color');\n\n\tif (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n\t\texports.colors = [\n\t\t\t20,\n\t\t\t21,\n\t\t\t26,\n\t\t\t27,\n\t\t\t32,\n\t\t\t33,\n\t\t\t38,\n\t\t\t39,\n\t\t\t40,\n\t\t\t41,\n\t\t\t42,\n\t\t\t43,\n\t\t\t44,\n\t\t\t45,\n\t\t\t56,\n\t\t\t57,\n\t\t\t62,\n\t\t\t63,\n\t\t\t68,\n\t\t\t69,\n\t\t\t74,\n\t\t\t75,\n\t\t\t76,\n\t\t\t77,\n\t\t\t78,\n\t\t\t79,\n\t\t\t80,\n\t\t\t81,\n\t\t\t92,\n\t\t\t93,\n\t\t\t98,\n\t\t\t99,\n\t\t\t112,\n\t\t\t113,\n\t\t\t128,\n\t\t\t129,\n\t\t\t134,\n\t\t\t135,\n\t\t\t148,\n\t\t\t149,\n\t\t\t160,\n\t\t\t161,\n\t\t\t162,\n\t\t\t163,\n\t\t\t164,\n\t\t\t165,\n\t\t\t166,\n\t\t\t167,\n\t\t\t168,\n\t\t\t169,\n\t\t\t170,\n\t\t\t171,\n\t\t\t172,\n\t\t\t173,\n\t\t\t178,\n\t\t\t179,\n\t\t\t184,\n\t\t\t185,\n\t\t\t196,\n\t\t\t197,\n\t\t\t198,\n\t\t\t199,\n\t\t\t200,\n\t\t\t201,\n\t\t\t202,\n\t\t\t203,\n\t\t\t204,\n\t\t\t205,\n\t\t\t206,\n\t\t\t207,\n\t\t\t208,\n\t\t\t209,\n\t\t\t214,\n\t\t\t215,\n\t\t\t220,\n\t\t\t221\n\t\t];\n\t}\n} catch (error) {\n\t// Swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(key => {\n\treturn /^debug_/i.test(key);\n}).reduce((obj, key) => {\n\t// Camel-case\n\tconst prop = key\n\t\t.substring(6)\n\t\t.toLowerCase()\n\t\t.replace(/_([a-z])/g, (_, k) => {\n\t\t\treturn k.toUpperCase();\n\t\t});\n\n\t// Coerce string value into JS value\n\tlet val = process.env[key];\n\tif (/^(yes|on|true|enabled)$/i.test(val)) {\n\t\tval = true;\n\t} else if (/^(no|off|false|disabled)$/i.test(val)) {\n\t\tval = false;\n\t} else if (val === 'null') {\n\t\tval = null;\n\t} else {\n\t\tval = Number(val);\n\t}\n\n\tobj[prop] = val;\n\treturn obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n\treturn 'colors' in exports.inspectOpts ?\n\t\tBoolean(exports.inspectOpts.colors) :\n\t\ttty.isatty(process.stderr.fd);\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\tconst {namespace: name, useColors} = this;\n\n\tif (useColors) {\n\t\tconst c = this.color;\n\t\tconst colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n\t\tconst prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n\n\t\targs[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n\t\targs.push(colorCode + 'm+' + module.exports.humanize(this.diff) + '\\u001B[0m');\n\t} else {\n\t\targs[0] = getDate() + name + ' ' + args[0];\n\t}\n}\n\nfunction getDate() {\n\tif (exports.inspectOpts.hideDate) {\n\t\treturn '';\n\t}\n\treturn new Date().toISOString() + ' ';\n}\n\n/**\n * Invokes `util.format()` with the specified arguments and writes to stderr.\n */\n\nfunction log(...args) {\n\treturn process.stderr.write(util.format(...args) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\tif (namespaces) {\n\t\tprocess.env.DEBUG = namespaces;\n\t} else {\n\t\t// If you set a process.env field to null or undefined, it gets cast to the\n\t\t// string 'null' or 'undefined'. Just delete instead.\n\t\tdelete process.env.DEBUG;\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n\treturn process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init(debug) {\n\tdebug.inspectOpts = {};\n\n\tconst keys = Object.keys(exports.inspectOpts);\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tdebug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts)\n\t\t.split('\\n')\n\t\t.map(str => str.trim())\n\t\t.join(' ');\n};\n\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\nformatters.O = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts);\n};\n", "/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n\tmodule.exports = require('./browser.js');\n} else {\n\tmodule.exports = require('./node.js');\n}\n", "/*!\n * EventEmitter2\n * https://github.com/hij1nx/EventEmitter2\n *\n * Copyright (c) 2013 hij1nx\n * Licensed under the MIT license.\n */\n;!function(undefined) {\n  var hasOwnProperty= Object.hasOwnProperty;\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\n  };\n  var defaultMaxListeners = 10;\n  var nextTickSupported= typeof process=='object' && typeof process.nextTick=='function';\n  var symbolsSupported= typeof Symbol==='function';\n  var reflectSupported= typeof Reflect === 'object';\n  var setImmediateSupported= typeof setImmediate === 'function';\n  var _setImmediate= setImmediateSupported ? setImmediate : setTimeout;\n  var ownKeys= symbolsSupported? (reflectSupported && typeof Reflect.ownKeys==='function'? Reflect.ownKeys : function(obj){\n    var arr= Object.getOwnPropertyNames(obj);\n    arr.push.apply(arr, Object.getOwnPropertySymbols(obj));\n    return arr;\n  }) : Object.keys;\n\n  function init() {\n    this._events = {};\n    if (this._conf) {\n      configure.call(this, this._conf);\n    }\n  }\n\n  function configure(conf) {\n    if (conf) {\n      this._conf = conf;\n\n      conf.delimiter && (this.delimiter = conf.delimiter);\n\n      if(conf.maxListeners!==undefined){\n          this._maxListeners= conf.maxListeners;\n      }\n\n      conf.wildcard && (this.wildcard = conf.wildcard);\n      conf.newListener && (this._newListener = conf.newListener);\n      conf.removeListener && (this._removeListener = conf.removeListener);\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\n      conf.ignoreErrors && (this.ignoreErrors = conf.ignoreErrors);\n\n      if (this.wildcard) {\n        this.listenerTree = {};\n      }\n    }\n  }\n\n  function logPossibleMemoryLeak(count, eventName) {\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\n        'leak detected. ' + count + ' listeners added. ' +\n        'Use emitter.setMaxListeners() to increase limit.';\n\n    if(this.verboseMemoryLeak){\n      errorMsg += ' Event name: ' + eventName + '.';\n    }\n\n    if(typeof process !== 'undefined' && process.emitWarning){\n      var e = new Error(errorMsg);\n      e.name = 'MaxListenersExceededWarning';\n      e.emitter = this;\n      e.count = count;\n      process.emitWarning(e);\n    } else {\n      console.error(errorMsg);\n\n      if (console.trace){\n        console.trace();\n      }\n    }\n  }\n\n  var toArray = function (a, b, c) {\n    var n = arguments.length;\n    switch (n) {\n      case 0:\n        return [];\n      case 1:\n        return [a];\n      case 2:\n        return [a, b];\n      case 3:\n        return [a, b, c];\n      default:\n        var arr = new Array(n);\n        while (n--) {\n          arr[n] = arguments[n];\n        }\n        return arr;\n    }\n  };\n\n  function toObject(keys, values) {\n    var obj = {};\n    var key;\n    var len = keys.length;\n    var valuesCount = values ? values.length : 0;\n    for (var i = 0; i < len; i++) {\n      key = keys[i];\n      obj[key] = i < valuesCount ? values[i] : undefined;\n    }\n    return obj;\n  }\n\n  function TargetObserver(emitter, target, options) {\n    this._emitter = emitter;\n    this._target = target;\n    this._listeners = {};\n    this._listenersCount = 0;\n\n    var on, off;\n\n    if (options.on || options.off) {\n      on = options.on;\n      off = options.off;\n    }\n\n    if (target.addEventListener) {\n      on = target.addEventListener;\n      off = target.removeEventListener;\n    } else if (target.addListener) {\n      on = target.addListener;\n      off = target.removeListener;\n    } else if (target.on) {\n      on = target.on;\n      off = target.off;\n    }\n\n    if (!on && !off) {\n      throw Error('target does not implement any known event API');\n    }\n\n    if (typeof on !== 'function') {\n      throw TypeError('on method must be a function');\n    }\n\n    if (typeof off !== 'function') {\n      throw TypeError('off method must be a function');\n    }\n\n    this._on = on;\n    this._off = off;\n\n    var _observers= emitter._observers;\n    if(_observers){\n      _observers.push(this);\n    }else{\n      emitter._observers= [this];\n    }\n  }\n\n  Object.assign(TargetObserver.prototype, {\n    subscribe: function(event, localEvent, reducer){\n      var observer= this;\n      var target= this._target;\n      var emitter= this._emitter;\n      var listeners= this._listeners;\n      var handler= function(){\n        var args= toArray.apply(null, arguments);\n        var eventObj= {\n          data: args,\n          name: localEvent,\n          original: event\n        };\n        if(reducer){\n          var result= reducer.call(target, eventObj);\n          if(result!==false){\n            emitter.emit.apply(emitter, [eventObj.name].concat(args))\n          }\n          return;\n        }\n        emitter.emit.apply(emitter, [localEvent].concat(args));\n      };\n\n\n      if(listeners[event]){\n        throw Error('Event \\'' + event + '\\' is already listening');\n      }\n\n      this._listenersCount++;\n\n      if(emitter._newListener && emitter._removeListener && !observer._onNewListener){\n\n        this._onNewListener = function (_event) {\n          if (_event === localEvent && listeners[event] === null) {\n            listeners[event] = handler;\n            observer._on.call(target, event, handler);\n          }\n        };\n\n        emitter.on('newListener', this._onNewListener);\n\n        this._onRemoveListener= function(_event){\n          if(_event === localEvent && !emitter.hasListeners(_event) && listeners[event]){\n            listeners[event]= null;\n            observer._off.call(target, event, handler);\n          }\n        };\n\n        listeners[event]= null;\n\n        emitter.on('removeListener', this._onRemoveListener);\n      }else{\n        listeners[event]= handler;\n        observer._on.call(target, event, handler);\n      }\n    },\n\n    unsubscribe: function(event){\n      var observer= this;\n      var listeners= this._listeners;\n      var emitter= this._emitter;\n      var handler;\n      var events;\n      var off= this._off;\n      var target= this._target;\n      var i;\n\n      if(event && typeof event!=='string'){\n        throw TypeError('event must be a string');\n      }\n\n      function clearRefs(){\n        if(observer._onNewListener){\n          emitter.off('newListener', observer._onNewListener);\n          emitter.off('removeListener', observer._onRemoveListener);\n          observer._onNewListener= null;\n          observer._onRemoveListener= null;\n        }\n        var index= findTargetIndex.call(emitter, observer);\n        emitter._observers.splice(index, 1);\n      }\n\n      if(event){\n        handler= listeners[event];\n        if(!handler) return;\n        off.call(target, event, handler);\n        delete listeners[event];\n        if(!--this._listenersCount){\n          clearRefs();\n        }\n      }else{\n        events= ownKeys(listeners);\n        i= events.length;\n        while(i-->0){\n          event= events[i];\n          off.call(target, event, listeners[event]);\n        }\n        this._listeners= {};\n        this._listenersCount= 0;\n        clearRefs();\n      }\n    }\n  });\n\n  function resolveOptions(options, schema, reducers, allowUnknown) {\n    var computedOptions = Object.assign({}, schema);\n\n    if (!options) return computedOptions;\n\n    if (typeof options !== 'object') {\n      throw TypeError('options must be an object')\n    }\n\n    var keys = Object.keys(options);\n    var length = keys.length;\n    var option, value;\n    var reducer;\n\n    function reject(reason) {\n      throw Error('Invalid \"' + option + '\" option value' + (reason ? '. Reason: ' + reason : ''))\n    }\n\n    for (var i = 0; i < length; i++) {\n      option = keys[i];\n      if (!allowUnknown && !hasOwnProperty.call(schema, option)) {\n        throw Error('Unknown \"' + option + '\" option');\n      }\n      value = options[option];\n      if (value !== undefined) {\n        reducer = reducers[option];\n        computedOptions[option] = reducer ? reducer(value, reject) : value;\n      }\n    }\n    return computedOptions;\n  }\n\n  function constructorReducer(value, reject) {\n    if (typeof value !== 'function' || !value.hasOwnProperty('prototype')) {\n      reject('value must be a constructor');\n    }\n    return value;\n  }\n\n  function makeTypeReducer(types) {\n    var message= 'value must be type of ' + types.join('|');\n    var len= types.length;\n    var firstType= types[0];\n    var secondType= types[1];\n\n    if (len === 1) {\n      return function (v, reject) {\n        if (typeof v === firstType) {\n          return v;\n        }\n        reject(message);\n      }\n    }\n\n    if (len === 2) {\n      return function (v, reject) {\n        var kind= typeof v;\n        if (kind === firstType || kind === secondType) return v;\n        reject(message);\n      }\n    }\n\n    return function (v, reject) {\n      var kind = typeof v;\n      var i = len;\n      while (i-- > 0) {\n        if (kind === types[i]) return v;\n      }\n      reject(message);\n    }\n  }\n\n  var functionReducer= makeTypeReducer(['function']);\n\n  var objectFunctionReducer= makeTypeReducer(['object', 'function']);\n\n  function makeCancelablePromise(Promise, executor, options) {\n    var isCancelable;\n    var callbacks;\n    var timer= 0;\n    var subscriptionClosed;\n\n    var promise = new Promise(function (resolve, reject, onCancel) {\n      options= resolveOptions(options, {\n        timeout: 0,\n        overload: false\n      }, {\n        timeout: function(value, reject){\n          value*= 1;\n          if (typeof value !== 'number' || value < 0 || !Number.isFinite(value)) {\n            reject('timeout must be a positive number');\n          }\n          return value;\n        }\n      });\n\n      isCancelable = !options.overload && typeof Promise.prototype.cancel === 'function' && typeof onCancel === 'function';\n\n      function cleanup() {\n        if (callbacks) {\n          callbacks = null;\n        }\n        if (timer) {\n          clearTimeout(timer);\n          timer = 0;\n        }\n      }\n\n      var _resolve= function(value){\n        cleanup();\n        resolve(value);\n      };\n\n      var _reject= function(err){\n        cleanup();\n        reject(err);\n      };\n\n      if (isCancelable) {\n        executor(_resolve, _reject, onCancel);\n      } else {\n        callbacks = [function(reason){\n          _reject(reason || Error('canceled'));\n        }];\n        executor(_resolve, _reject, function (cb) {\n          if (subscriptionClosed) {\n            throw Error('Unable to subscribe on cancel event asynchronously')\n          }\n          if (typeof cb !== 'function') {\n            throw TypeError('onCancel callback must be a function');\n          }\n          callbacks.push(cb);\n        });\n        subscriptionClosed= true;\n      }\n\n      if (options.timeout > 0) {\n        timer= setTimeout(function(){\n          var reason= Error('timeout');\n          reason.code = 'ETIMEDOUT'\n          timer= 0;\n          promise.cancel(reason);\n          reject(reason);\n        }, options.timeout);\n      }\n    });\n\n    if (!isCancelable) {\n      promise.cancel = function (reason) {\n        if (!callbacks) {\n          return;\n        }\n        var length = callbacks.length;\n        for (var i = 1; i < length; i++) {\n          callbacks[i](reason);\n        }\n        // internal callback to reject the promise\n        callbacks[0](reason);\n        callbacks = null;\n      };\n    }\n\n    return promise;\n  }\n\n  function findTargetIndex(observer) {\n    var observers = this._observers;\n    if(!observers){\n      return -1;\n    }\n    var len = observers.length;\n    for (var i = 0; i < len; i++) {\n      if (observers[i]._target === observer) return i;\n    }\n    return -1;\n  }\n\n  // Attention, function return type now is array, always !\n  // It has zero elements if no any matches found and one or more\n  // elements (leafs) if there are matches\n  //\n  function searchListenerTree(handlers, type, tree, i, typeLength) {\n    if (!tree) {\n      return null;\n    }\n\n    if (i === 0) {\n      var kind = typeof type;\n      if (kind === 'string') {\n        var ns, n, l = 0, j = 0, delimiter = this.delimiter, dl = delimiter.length;\n        if ((n = type.indexOf(delimiter)) !== -1) {\n          ns = new Array(5);\n          do {\n            ns[l++] = type.slice(j, n);\n            j = n + dl;\n          } while ((n = type.indexOf(delimiter, j)) !== -1);\n\n          ns[l++] = type.slice(j);\n          type = ns;\n          typeLength = l;\n        } else {\n          type = [type];\n          typeLength = 1;\n        }\n      } else if (kind === 'object') {\n        typeLength = type.length;\n      } else {\n        type = [type];\n        typeLength = 1;\n      }\n    }\n\n    var listeners= null, branch, xTree, xxTree, isolatedBranch, endReached, currentType = type[i],\n        nextType = type[i + 1], branches, _listeners;\n\n    if (i === typeLength) {\n      //\n      // If at the end of the event(s) list and the tree has listeners\n      // invoke those listeners.\n      //\n\n      if(tree._listeners) {\n        if (typeof tree._listeners === 'function') {\n          handlers && handlers.push(tree._listeners);\n          listeners = [tree];\n        } else {\n          handlers && handlers.push.apply(handlers, tree._listeners);\n          listeners = [tree];\n        }\n      }\n    } else {\n\n      if (currentType === '*') {\n        //\n        // If the event emitted is '*' at this part\n        // or there is a concrete match at this patch\n        //\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            _listeners = searchListenerTree(handlers, type, tree[branch], i + 1, typeLength);\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (currentType === '**') {\n        endReached = (i + 1 === typeLength || (i + 2 === typeLength && nextType === '*'));\n        if (endReached && tree._listeners) {\n          // The next element has a _listeners, add it to the handlers.\n          listeners = searchListenerTree(handlers, type, tree, typeLength, typeLength);\n        }\n\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            if (branch === '*' || branch === '**') {\n              if (tree[branch]._listeners && !endReached) {\n                _listeners = searchListenerTree(handlers, type, tree[branch], typeLength, typeLength);\n                if (_listeners) {\n                  if (listeners) {\n                    listeners.push.apply(listeners, _listeners);\n                  } else {\n                    listeners = _listeners;\n                  }\n                }\n              }\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            } else if (branch === nextType) {\n              _listeners = searchListenerTree(handlers, type, tree[branch], i + 2, typeLength);\n            } else {\n              // No match on this one, shift into the tree but not in the type array.\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            }\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (tree[currentType]) {\n        listeners = searchListenerTree(handlers, type, tree[currentType], i + 1, typeLength);\n      }\n    }\n\n      xTree = tree['*'];\n    if (xTree) {\n      //\n      // If the listener tree will allow any match for this part,\n      // then recursively explore all branches of the tree\n      //\n      searchListenerTree(handlers, type, xTree, i + 1, typeLength);\n    }\n\n    xxTree = tree['**'];\n    if (xxTree) {\n      if (i < typeLength) {\n        if (xxTree._listeners) {\n          // If we have a listener on a '**', it will catch all, so add its handler.\n          searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n        }\n\n        // Build arrays of matching next branches and others.\n        branches= ownKeys(xxTree);\n        n= branches.length;\n        while(n-->0){\n          branch= branches[n];\n          if (branch !== '_listeners') {\n            if (branch === nextType) {\n              // We know the next element will match, so jump twice.\n              searchListenerTree(handlers, type, xxTree[branch], i + 2, typeLength);\n            } else if (branch === currentType) {\n              // Current node matches, move into the tree.\n              searchListenerTree(handlers, type, xxTree[branch], i + 1, typeLength);\n            } else {\n              isolatedBranch = {};\n              isolatedBranch[branch] = xxTree[branch];\n              searchListenerTree(handlers, type, {'**': isolatedBranch}, i + 1, typeLength);\n            }\n          }\n        }\n      } else if (xxTree._listeners) {\n        // We have reached the end and still on a '**'\n        searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n      } else if (xxTree['*'] && xxTree['*']._listeners) {\n        searchListenerTree(handlers, type, xxTree['*'], typeLength, typeLength);\n      }\n    }\n\n    return listeners;\n  }\n\n  function growListenerTree(type, listener, prepend) {\n    var len = 0, j = 0, i, delimiter = this.delimiter, dl= delimiter.length, ns;\n\n    if(typeof type==='string') {\n      if ((i = type.indexOf(delimiter)) !== -1) {\n        ns = new Array(5);\n        do {\n          ns[len++] = type.slice(j, i);\n          j = i + dl;\n        } while ((i = type.indexOf(delimiter, j)) !== -1);\n\n        ns[len++] = type.slice(j);\n      }else{\n        ns= [type];\n        len= 1;\n      }\n    }else{\n      ns= type;\n      len= type.length;\n    }\n\n    //\n    // Looks for two consecutive '**', if so, don't add the event at all.\n    //\n    if (len > 1) {\n      for (i = 0; i + 1 < len; i++) {\n        if (ns[i] === '**' && ns[i + 1] === '**') {\n          return;\n        }\n      }\n    }\n\n\n\n    var tree = this.listenerTree, name;\n\n    for (i = 0; i < len; i++) {\n      name = ns[i];\n\n      tree = tree[name] || (tree[name] = {});\n\n      if (i === len - 1) {\n        if (!tree._listeners) {\n          tree._listeners = listener;\n        } else {\n          if (typeof tree._listeners === 'function') {\n            tree._listeners = [tree._listeners];\n          }\n\n          if (prepend) {\n            tree._listeners.unshift(listener);\n          } else {\n            tree._listeners.push(listener);\n          }\n\n          if (\n              !tree._listeners.warned &&\n              this._maxListeners > 0 &&\n              tree._listeners.length > this._maxListeners\n          ) {\n            tree._listeners.warned = true;\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\n          }\n        }\n        return true;\n      }\n    }\n\n    return true;\n  }\n\n  function collectTreeEvents(tree, events, root, asArray){\n     var branches= ownKeys(tree);\n     var i= branches.length;\n     var branch, branchName, path;\n     var hasListeners= tree['_listeners'];\n     var isArrayPath;\n\n     while(i-->0){\n         branchName= branches[i];\n\n         branch= tree[branchName];\n\n         if(branchName==='_listeners'){\n             path= root;\n         }else {\n             path = root ? root.concat(branchName) : [branchName];\n         }\n\n         isArrayPath= asArray || typeof branchName==='symbol';\n\n         hasListeners && events.push(isArrayPath? path : path.join(this.delimiter));\n\n         if(typeof branch==='object'){\n             collectTreeEvents.call(this, branch, events, path, isArrayPath);\n         }\n     }\n\n     return events;\n  }\n\n  function recursivelyGarbageCollect(root) {\n    var keys = ownKeys(root);\n    var i= keys.length;\n    var obj, key, flag;\n    while(i-->0){\n      key = keys[i];\n      obj = root[key];\n\n      if(obj){\n          flag= true;\n          if(key !== '_listeners' && !recursivelyGarbageCollect(obj)){\n             delete root[key];\n          }\n      }\n    }\n\n    return flag;\n  }\n\n  function Listener(emitter, event, listener){\n    this.emitter= emitter;\n    this.event= event;\n    this.listener= listener;\n  }\n\n  Listener.prototype.off= function(){\n    this.emitter.off(this.event, this.listener);\n    return this;\n  };\n\n  function setupListener(event, listener, options){\n      if (options === true) {\n        promisify = true;\n      } else if (options === false) {\n        async = true;\n      } else {\n        if (!options || typeof options !== 'object') {\n          throw TypeError('options should be an object or true');\n        }\n        var async = options.async;\n        var promisify = options.promisify;\n        var nextTick = options.nextTick;\n        var objectify = options.objectify;\n      }\n\n      if (async || nextTick || promisify) {\n        var _listener = listener;\n        var _origin = listener._origin || listener;\n\n        if (nextTick && !nextTickSupported) {\n          throw Error('process.nextTick is not supported');\n        }\n\n        if (promisify === undefined) {\n          promisify = listener.constructor.name === 'AsyncFunction';\n        }\n\n        listener = function () {\n          var args = arguments;\n          var context = this;\n          var event = this.event;\n\n          return promisify ? (nextTick ? Promise.resolve() : new Promise(function (resolve) {\n            _setImmediate(resolve);\n          }).then(function () {\n            context.event = event;\n            return _listener.apply(context, args)\n          })) : (nextTick ? process.nextTick : _setImmediate)(function () {\n            context.event = event;\n            _listener.apply(context, args)\n          });\n        };\n\n        listener._async = true;\n        listener._origin = _origin;\n      }\n\n    return [listener, objectify? new Listener(this, event, listener): this];\n  }\n\n  function EventEmitter(conf) {\n    this._events = {};\n    this._newListener = false;\n    this._removeListener = false;\n    this.verboseMemoryLeak = false;\n    configure.call(this, conf);\n  }\n\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\n\n  EventEmitter.prototype.listenTo= function(target, events, options){\n    if(typeof target!=='object'){\n      throw TypeError('target musts be an object');\n    }\n\n    var emitter= this;\n\n    options = resolveOptions(options, {\n      on: undefined,\n      off: undefined,\n      reducers: undefined\n    }, {\n      on: functionReducer,\n      off: functionReducer,\n      reducers: objectFunctionReducer\n    });\n\n    function listen(events){\n      if(typeof events!=='object'){\n        throw TypeError('events must be an object');\n      }\n\n      var reducers= options.reducers;\n      var index= findTargetIndex.call(emitter, target);\n      var observer;\n\n      if(index===-1){\n        observer= new TargetObserver(emitter, target, options);\n      }else{\n        observer= emitter._observers[index];\n      }\n\n      var keys= ownKeys(events);\n      var len= keys.length;\n      var event;\n      var isSingleReducer= typeof reducers==='function';\n\n      for(var i=0; i<len; i++){\n        event= keys[i];\n        observer.subscribe(\n            event,\n            events[event] || event,\n            isSingleReducer ? reducers : reducers && reducers[event]\n        );\n      }\n    }\n\n    isArray(events)?\n        listen(toObject(events)) :\n        (typeof events==='string'? listen(toObject(events.split(/\\s+/))): listen(events));\n\n    return this;\n  };\n\n  EventEmitter.prototype.stopListeningTo = function (target, event) {\n    var observers = this._observers;\n\n    if(!observers){\n      return false;\n    }\n\n    var i = observers.length;\n    var observer;\n    var matched= false;\n\n    if(target && typeof target!=='object'){\n      throw TypeError('target should be an object');\n    }\n\n    while (i-- > 0) {\n      observer = observers[i];\n      if (!target || observer._target === target) {\n        observer.unsubscribe(event);\n        matched= true;\n      }\n    }\n\n    return matched;\n  };\n\n  // By default EventEmitters will print a warning if more than\n  // 10 listeners are added to it. This is a useful default which\n  // helps finding memory leaks.\n  //\n  // Obviously not all Emitters should be limited to 10. This function allows\n  // that to be increased. Set to zero for unlimited.\n\n  EventEmitter.prototype.delimiter = '.';\n\n  EventEmitter.prototype.setMaxListeners = function(n) {\n    if (n !== undefined) {\n      this._maxListeners = n;\n      if (!this._conf) this._conf = {};\n      this._conf.maxListeners = n;\n    }\n  };\n\n  EventEmitter.prototype.getMaxListeners = function() {\n    return this._maxListeners;\n  };\n\n  EventEmitter.prototype.event = '';\n\n  EventEmitter.prototype.once = function(event, fn, options) {\n    return this._once(event, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependOnceListener = function(event, fn, options) {\n    return this._once(event, fn, true, options);\n  };\n\n  EventEmitter.prototype._once = function(event, fn, prepend, options) {\n    return this._many(event, 1, fn, prepend, options);\n  };\n\n  EventEmitter.prototype.many = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependMany = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, true, options);\n  };\n\n  EventEmitter.prototype._many = function(event, ttl, fn, prepend, options) {\n    var self = this;\n\n    if (typeof fn !== 'function') {\n      throw new Error('many only accepts instances of Function');\n    }\n\n    function listener() {\n      if (--ttl === 0) {\n        self.off(event, listener);\n      }\n      return fn.apply(this, arguments);\n    }\n\n    listener._origin = fn;\n\n    return this._on(event, listener, prepend, options);\n  };\n\n  EventEmitter.prototype.emit = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], ns, wildcard= this.wildcard;\n    var args,l,i,j, containsSymbol;\n\n    if (type === 'newListener' && !this._newListener) {\n      if (!this._events.newListener) {\n        return false;\n      }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all && this._all.length) {\n      handler = this._all.slice();\n\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this, type);\n          break;\n        case 2:\n          handler[i].call(this, type, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, type, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, arguments);\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0, l);\n    } else {\n      handler = this._events[type];\n      if (typeof handler === 'function') {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler.call(this);\n          break;\n        case 2:\n          handler.call(this, arguments[1]);\n          break;\n        case 3:\n          handler.call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          args = new Array(al - 1);\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n          handler.apply(this, args);\n        }\n        return true;\n      } else if (handler) {\n        // need to make copy of handlers because list can change in the middle\n        // of emit call\n        handler = handler.slice();\n      }\n    }\n\n    if (handler && handler.length) {\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this);\n          break;\n        case 2:\n          handler[i].call(this, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, args);\n        }\n      }\n      return true;\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        throw arguments[1]; // Unhandled 'error' event\n      } else {\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return !!this._all;\n  };\n\n  EventEmitter.prototype.emitAsync = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], wildcard= this.wildcard, ns, containsSymbol;\n    var args,l,i,j;\n\n    if (type === 'newListener' && !this._newListener) {\n        if (!this._events.newListener) { return Promise.resolve([false]); }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var promises= [];\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all) {\n      for (i = 0, l = this._all.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(this._all[i].call(this, type));\n          break;\n        case 2:\n          promises.push(this._all[i].call(this, type, arguments[1]));\n          break;\n        case 3:\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(this._all[i].apply(this, arguments));\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n    } else {\n      handler = this._events[type];\n    }\n\n    if (typeof handler === 'function') {\n      this.event = type;\n      switch (al) {\n      case 1:\n        promises.push(handler.call(this));\n        break;\n      case 2:\n        promises.push(handler.call(this, arguments[1]));\n        break;\n      case 3:\n        promises.push(handler.call(this, arguments[1], arguments[2]));\n        break;\n      default:\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n        promises.push(handler.apply(this, args));\n      }\n    } else if (handler && handler.length) {\n      handler = handler.slice();\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(handler[i].call(this));\n          break;\n        case 2:\n          promises.push(handler[i].call(this, arguments[1]));\n          break;\n        case 3:\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(handler[i].apply(this, args));\n        }\n      }\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\n      } else {\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return Promise.all(promises);\n  };\n\n  EventEmitter.prototype.on = function(type, listener, options) {\n    return this._on(type, listener, false, options);\n  };\n\n  EventEmitter.prototype.prependListener = function(type, listener, options) {\n    return this._on(type, listener, true, options);\n  };\n\n  EventEmitter.prototype.onAny = function(fn) {\n    return this._onAny(fn, false);\n  };\n\n  EventEmitter.prototype.prependAny = function(fn) {\n    return this._onAny(fn, true);\n  };\n\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n  EventEmitter.prototype._onAny = function(fn, prepend){\n    if (typeof fn !== 'function') {\n      throw new Error('onAny only accepts instances of Function');\n    }\n\n    if (!this._all) {\n      this._all = [];\n    }\n\n    // Add the function to the event listener collection.\n    if(prepend){\n      this._all.unshift(fn);\n    }else{\n      this._all.push(fn);\n    }\n\n    return this;\n  };\n\n  EventEmitter.prototype._on = function(type, listener, prepend, options) {\n    if (typeof type === 'function') {\n      this._onAny(type, listener);\n      return this;\n    }\n\n    if (typeof listener !== 'function') {\n      throw new Error('on only accepts instances of Function');\n    }\n    this._events || init.call(this);\n\n    var returnValue= this, temp;\n\n    if (options !== undefined) {\n      temp = setupListener.call(this, type, listener, options);\n      listener = temp[0];\n      returnValue = temp[1];\n    }\n\n    // To avoid recursion in the case that type == \"newListeners\"! Before\n    // adding it to the listeners, first emit \"newListeners\".\n    if (this._newListener) {\n      this.emit('newListener', type, listener);\n    }\n\n    if (this.wildcard) {\n      growListenerTree.call(this, type, listener, prepend);\n      return returnValue;\n    }\n\n    if (!this._events[type]) {\n      // Optimize the case of one listener. Don't need the extra array object.\n      this._events[type] = listener;\n    } else {\n      if (typeof this._events[type] === 'function') {\n        // Change to array.\n        this._events[type] = [this._events[type]];\n      }\n\n      // If we've already got an array, just add\n      if(prepend){\n        this._events[type].unshift(listener);\n      }else{\n        this._events[type].push(listener);\n      }\n\n      // Check for listener leak\n      if (\n        !this._events[type].warned &&\n        this._maxListeners > 0 &&\n        this._events[type].length > this._maxListeners\n      ) {\n        this._events[type].warned = true;\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\n      }\n    }\n\n    return returnValue;\n  };\n\n  EventEmitter.prototype.off = function(type, listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('removeListener only takes instances of Function');\n    }\n\n    var handlers,leafs=[];\n\n    if(this.wildcard) {\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n      if(!leafs) return this;\n    } else {\n      // does not use listeners(), so no side effect of creating _events[type]\n      if (!this._events[type]) return this;\n      handlers = this._events[type];\n      leafs.push({_listeners:handlers});\n    }\n\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\n      var leaf = leafs[iLeaf];\n      handlers = leaf._listeners;\n      if (isArray(handlers)) {\n\n        var position = -1;\n\n        for (var i = 0, length = handlers.length; i < length; i++) {\n          if (handlers[i] === listener ||\n            (handlers[i].listener && handlers[i].listener === listener) ||\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0) {\n          continue;\n        }\n\n        if(this.wildcard) {\n          leaf._listeners.splice(position, 1);\n        }\n        else {\n          this._events[type].splice(position, 1);\n        }\n\n        if (handlers.length === 0) {\n          if(this.wildcard) {\n            delete leaf._listeners;\n          }\n          else {\n            delete this._events[type];\n          }\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n\n        return this;\n      }\n      else if (handlers === listener ||\n        (handlers.listener && handlers.listener === listener) ||\n        (handlers._origin && handlers._origin === listener)) {\n        if(this.wildcard) {\n          delete leaf._listeners;\n        }\n        else {\n          delete this._events[type];\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n      }\n    }\n\n    this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n\n    return this;\n  };\n\n  EventEmitter.prototype.offAny = function(fn) {\n    var i = 0, l = 0, fns;\n    if (fn && this._all && this._all.length > 0) {\n      fns = this._all;\n      for(i = 0, l = fns.length; i < l; i++) {\n        if(fn === fns[i]) {\n          fns.splice(i, 1);\n          if (this._removeListener)\n            this.emit(\"removeListenerAny\", fn);\n          return this;\n        }\n      }\n    } else {\n      fns = this._all;\n      if (this._removeListener) {\n        for(i = 0, l = fns.length; i < l; i++)\n          this.emit(\"removeListenerAny\", fns[i]);\n      }\n      this._all = [];\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\n\n  EventEmitter.prototype.removeAllListeners = function (type) {\n    if (type === undefined) {\n      !this._events || init.call(this);\n      return this;\n    }\n\n    if (this.wildcard) {\n      var leafs = searchListenerTree.call(this, null, type, this.listenerTree, 0), leaf, i;\n      if (!leafs) return this;\n      for (i = 0; i < leafs.length; i++) {\n        leaf = leafs[i];\n        leaf._listeners = null;\n      }\n      this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n    } else if (this._events) {\n      this._events[type] = null;\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.listeners = function (type) {\n    var _events = this._events;\n    var keys, listeners, allListeners;\n    var i;\n    var listenerTree;\n\n    if (type === undefined) {\n      if (this.wildcard) {\n        throw Error('event name required for wildcard emitter');\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      keys = ownKeys(_events);\n      i = keys.length;\n      allListeners = [];\n      while (i-- > 0) {\n        listeners = _events[keys[i]];\n        if (typeof listeners === 'function') {\n          allListeners.push(listeners);\n        } else {\n          allListeners.push.apply(allListeners, listeners);\n        }\n      }\n      return allListeners;\n    } else {\n      if (this.wildcard) {\n        listenerTree= this.listenerTree;\n        if(!listenerTree) return [];\n        var handlers = [];\n        var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n        searchListenerTree.call(this, handlers, ns, listenerTree, 0);\n        return handlers;\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      listeners = _events[type];\n\n      if (!listeners) {\n        return [];\n      }\n      return typeof listeners === 'function' ? [listeners] : listeners;\n    }\n  };\n\n  EventEmitter.prototype.eventNames = function(nsAsArray){\n    var _events= this._events;\n    return this.wildcard? collectTreeEvents.call(this, this.listenerTree, [], null, nsAsArray) : (_events? ownKeys(_events) : []);\n  };\n\n  EventEmitter.prototype.listenerCount = function(type) {\n    return this.listeners(type).length;\n  };\n\n  EventEmitter.prototype.hasListeners = function (type) {\n    if (this.wildcard) {\n      var handlers = [];\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\n      return handlers.length > 0;\n    }\n\n    var _events = this._events;\n    var _all = this._all;\n\n    return !!(_all && _all.length || _events && (type === undefined ? ownKeys(_events).length : _events[type]));\n  };\n\n  EventEmitter.prototype.listenersAny = function() {\n\n    if(this._all) {\n      return this._all;\n    }\n    else {\n      return [];\n    }\n\n  };\n\n  EventEmitter.prototype.waitFor = function (event, options) {\n    var self = this;\n    var type = typeof options;\n    if (type === 'number') {\n      options = {timeout: options};\n    } else if (type === 'function') {\n      options = {filter: options};\n    }\n\n    options= resolveOptions(options, {\n      timeout: 0,\n      filter: undefined,\n      handleError: false,\n      Promise: Promise,\n      overload: false\n    }, {\n      filter: functionReducer,\n      Promise: constructorReducer\n    });\n\n    return makeCancelablePromise(options.Promise, function (resolve, reject, onCancel) {\n      function listener() {\n        var filter= options.filter;\n        if (filter && !filter.apply(self, arguments)) {\n          return;\n        }\n        self.off(event, listener);\n        if (options.handleError) {\n          var err = arguments[0];\n          err ? reject(err) : resolve(toArray.apply(null, arguments).slice(1));\n        } else {\n          resolve(toArray.apply(null, arguments));\n        }\n      }\n\n      onCancel(function(){\n        self.off(event, listener);\n      });\n\n      self._on(event, listener, false);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    })\n  };\n\n  function once(emitter, name, options) {\n    options= resolveOptions(options, {\n      Promise: Promise,\n      timeout: 0,\n      overload: false\n    }, {\n      Promise: constructorReducer\n    });\n\n    var _Promise= options.Promise;\n\n    return makeCancelablePromise(_Promise, function(resolve, reject, onCancel){\n      var handler;\n      if (typeof emitter.addEventListener === 'function') {\n        handler=  function () {\n          resolve(toArray.apply(null, arguments));\n        };\n\n        onCancel(function(){\n          emitter.removeEventListener(name, handler);\n        });\n\n        emitter.addEventListener(\n            name,\n            handler,\n            {once: true}\n        );\n        return;\n      }\n\n      var eventListener = function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        resolve(toArray.apply(null, arguments));\n      };\n\n      var errorListener;\n\n      if (name !== 'error') {\n        errorListener = function (err){\n          emitter.removeListener(name, eventListener);\n          reject(err);\n        };\n\n        emitter.once('error', errorListener);\n      }\n\n      onCancel(function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        emitter.removeListener(name, eventListener);\n      });\n\n      emitter.once(name, eventListener);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    });\n  }\n\n  var prototype= EventEmitter.prototype;\n\n  Object.defineProperties(EventEmitter, {\n    defaultMaxListeners: {\n      get: function () {\n        return prototype._maxListeners;\n      },\n      set: function (n) {\n        if (typeof n !== 'number' || n < 0 || Number.isNaN(n)) {\n          throw TypeError('n must be a non-negative number')\n        }\n        prototype._maxListeners = n;\n      },\n      enumerable: true\n    },\n    once: {\n      value: once,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  Object.defineProperties(prototype, {\n      _maxListeners: {\n          value: defaultMaxListeners,\n          writable: true,\n          configurable: true\n      },\n      _observers: {value: null, writable: true, configurable: true}\n  });\n\n  if (typeof define === 'function' && define.amd) {\n     // AMD. Register as an anonymous module.\n    define(function() {\n      return EventEmitter;\n    });\n  } else if (typeof exports === 'object') {\n    // CommonJS\n    module.exports = EventEmitter;\n  }\n  else {\n    // global for any kind of environment.\n    var _global= new Function('','return this')();\n    _global.EventEmitter2 = EventEmitter;\n  }\n}();\n", "export const noop = () => {};\n\nexport const objectToString = Object.prototype.toString;\n\nexport const supportWasm = typeof WebAssembly === 'object';\n\nexport const idleCallback =\n  window.requestIdleCallback || window.requestAnimationFrame;\n\nexport function createKey() {\n  return Math.random().toString(36).substr(2, 8);\n}\n\nexport function isObject(val: any) {\n  return val && typeof val === 'object';\n}\n\nexport function isPlainObject(val: any): val is Object {\n  return objectToString.call(val) === '[object Object]';\n}\n\nexport function getType(val: any) {\n  return objectToString.call(val).slice(8, -1).toLowerCase();\n}\n\nexport function isPromise(obj: any): obj is Promise<any> {\n  return isObject(obj) && typeof obj.then === 'function';\n}\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nexport function hasOwn(obj: any, key: PropertyKey): boolean {\n  return hasOwnProperty.call(obj, key);\n}\n\nexport function def(obj: Object, key: string, value: any) {\n  Object.defineProperty(obj, key, {\n    get: () => value,\n    set: (val: any) => {\n      if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n        if (val !== value) {\n          error(`Try to modify a read-only property ${key}`);\n        }\n      }\n    },\n    configurable: (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) ? true : false,\n  });\n}\n\n// Array to Object `['a'] => { a: true }`\nexport function makeMap<T extends Array<PropertyKey>>(list: T) {\n  const map: { [k in T[number]]: true } = Object.create(null);\n  for (let i = 0; i < list.length; i++) {\n    map[list[i]] = true;\n  }\n  return (val: PropertyKey) => !!map[val];\n}\n\n// Array to Object `['a'] => { a: true }`\nexport function makeMapObject<T extends Array<string>>(list: T) {\n  const map: { [k in T[number]]: true } = Object.create(null);\n  for (let i = 0; i < list.length; i++) {\n    map[list[i]] = true;\n  }\n\n  return map as { [k in T[number]]: true };\n}\n\nexport function inBrowser() {\n  return typeof window !== 'undefined';\n}\n\nconst warnPrefix = '[Garfish warning]';\nconst processError = (\n  error: string | Error,\n  fn: (val: string | Error, isString: boolean) => void,\n) => {\n  try {\n    if (typeof error === 'string') {\n      error = `${warnPrefix}: ${error}\\n\\n`;\n      fn(error, true);\n    } else if (error instanceof Error) {\n      if (!error.message.startsWith(warnPrefix)) {\n        error.message = `${warnPrefix}: ${error.message}`;\n      }\n      fn(error, false);\n    }\n  } catch (e) {\n    fn(error, typeof error === 'string');\n  }\n};\n\nexport function warn(msg: string | Error) {\n  processError(msg, (e, isString) => {\n    const warnMsg = isString ? e : (e as Error).message;\n    if (false) {\n      callTestCallback(warn, warnMsg);\n      return;\n    }\n    console.warn(warnMsg);\n  });\n}\n\nexport function error(error: string | Error) {\n  processError(error, (e, isString) => {\n    if (isString) {\n      throw new Error(e as string);\n    } else {\n      throw e;\n    }\n  });\n}\n\nexport function validURL(str) {\n  const pattern = new RegExp(\n    '^(https?:\\\\/\\\\/)?' + // protocol\n      '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name\n      '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\n      '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path\n      '(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string\n      '(\\\\#[-a-z\\\\d_]*)?$',\n    'i',\n  ); // fragment locator\n  return !!pattern.test(str);\n}\n\n// When the string is set as the object property name,\n// it will be attempted to be transformed into a constant version to avoid repeated caching by the browser\nexport function internFunc(internalizeString) {\n  // Don't consider \"Hash-collision\uFF0Chttps://en.wikipedia.org/wiki/Collision_(computer_science)\"\n  // v8 \u8C8C\u4F3C\u5728 16383 \u957F\u5EA6\u65F6\u4F1A\u53D1\u751F hash-collision \u7ECF\u8FC7\u6D4B\u8BD5\u540E\u53D1\u73B0\u6B63\u5E38\n  const temporaryOb = {};\n  temporaryOb[internalizeString] = true;\n  return Object.keys(temporaryOb)[0];\n}\n\nexport function evalWithEnv(\n  code: string,\n  params: Record<string, any>,\n  context: any,\n  useStrict = false,\n) {\n  const keys = Object.keys(params);\n  const nativeWindow = (0, eval)('window;');\n  // No random value can be used, otherwise it cannot be reused as a constant string\n  const randomValKey = '__garfish__exec_temporary__';\n  const values = keys.map((k) => `window.${randomValKey}.${k}`);\n  const contextKey = '__garfish_exec_temporary_context__';\n\n  try {\n    nativeWindow[randomValKey] = params;\n    nativeWindow[contextKey] = context;\n    const evalInfo = [\n      `;(function(${keys.join(',')}){${useStrict ? '\"use strict\";' : ''}`,\n      `\\n}).call(window.${contextKey},${values.join(',')});`,\n    ];\n    const internalizeString = internFunc(evalInfo[0] + code + evalInfo[1]);\n    // (0, eval) This expression makes the eval under the global scope\n    (0, eval)(internalizeString);\n  } catch (e) {\n    throw e;\n  } finally {\n    delete nativeWindow[randomValKey];\n    delete nativeWindow[contextKey];\n  }\n}\n\nexport function safeWrapper(callback: (...args: Array<any>) => any) {\n  try {\n    callback();\n  } catch (e) {\n    (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && warn(e);\n  }\n}\n\nexport function nextTick(cb: () => void): void {\n  Promise.resolve().then(cb);\n}\n\nexport function assert(\n  condition: any,\n  msg?: string | Error,\n): asserts condition {\n  if (!condition) {\n    error(msg || 'unknow reason');\n  }\n}\n\nexport function toBoolean(val: any) {\n  if (val === '') return true;\n  if (val === 'false') return false;\n  return Boolean(val);\n}\n\nexport function remove<T>(list: Array<T> | Set<T>, el: T) {\n  if (Array.isArray(list)) {\n    const i = list.indexOf(el);\n    if (i > -1) {\n      list.splice(i, 1);\n      return true;\n    }\n    return false;\n  } else {\n    if (list.has(el)) {\n      list.delete(el);\n      return true;\n    }\n    return false;\n  }\n}\n\n// \u6709\u4E9B\u6D4B\u8BD5 jest.mock \u4E0D\u597D\u6D4B\uFF0C\u53EF\u7528\u8FD9\u4E2A\u5DE5\u5177\u65B9\u6CD5\nexport function callTestCallback(obj: any, ...args: any[]) {\n  if (false) {\n    const oncalled = obj._oncalled;\n    if (typeof oncalled === 'function') {\n      oncalled.apply(null, args);\n    }\n  }\n}\n\n// \u6570\u7EC4\u53BB\u91CD\uFF0C\u4E0D\u4FDD\u8BC1\u987A\u5E8F\nexport function unique<T>(list: Array<T>) {\n  const res: Array<T> = [];\n  for (let i = 0, len = list.length; i < len; i++) {\n    for (let j = i + 1; j < len; j++) {\n      if (list[i] === list[j]) {\n        j = ++i;\n      }\n    }\n    res.push(list[i]);\n  }\n  return false ? res.sort() : res;\n}\n\nexport function isPrimitive(val: any) {\n  return (\n    val === null ||\n    typeof val === 'string' ||\n    typeof val === 'number' ||\n    typeof val === 'bigint' ||\n    typeof val === 'symbol' ||\n    typeof val === 'boolean' ||\n    typeof val === 'undefined'\n  );\n}\n\nexport function filterUndefinedVal<T extends Object>(ob: T) {\n  return Object.keys(ob).reduce((res: T, key: any) => {\n    if (res[key] === undefined) {\n      delete res[key];\n    }\n    return res;\n  }, ob);\n}\n\n// Deeply merge two objects, can handle circular references, the latter overwrite the previous\nexport function deepMerge<K, T>(\n  o: K,\n  n: T,\n  dp?: boolean,\n  ignores?: Array<string>,\n) {\n  const leftRecord = new WeakMap();\n  const rightRecord = new WeakMap();\n  const valueRecord = new WeakMap();\n  const ignoresMap = makeMap(ignores || []);\n\n  const isArray = Array.isArray;\n  const isAllRefs = (a, b) => {\n    if (leftRecord.has(a) || rightRecord.has(a)) {\n      return leftRecord.has(b) || rightRecord.has(b);\n    }\n  };\n\n  const clone = (v) => {\n    // Deep clone\n    if (isPrimitive(v) || typeof v === 'function') {\n      return v;\n    } else if (valueRecord.has(v)) {\n      return valueRecord.get(v);\n    } else if (leftRecord.has(v)) {\n      return leftRecord.get(v);\n    } else if (rightRecord.has(v)) {\n      return rightRecord.get(v);\n    } else if (isArray(v)) {\n      if (dp) v = unique(v);\n      const arr: Array<any> = [];\n      valueRecord.set(v, arr);\n      for (let i = 0, len = v.length; i < len; i++) {\n        arr[i] = clone(v[i]);\n      }\n      return arr;\n    } else if (typeof v === 'object') {\n      const obj = {};\n      valueRecord.set(v, obj);\n      const keys = Reflect.ownKeys(v);\n      keys.forEach((key) => (obj[key] = clone(v[key])));\n      return obj;\n    }\n  };\n\n  const setValue = (r, k, key) => {\n    if (r.has(k)) {\n      return r.get(k);\n    } else {\n      // Ignore the content does not need to copy\n      if (ignoresMap[key]) {\n        return k;\n      }\n      const val = clone(k);\n      if (!isPrimitive(val) && typeof val !== 'function') {\n        r.set(k, val);\n      }\n      return val;\n    }\n  };\n\n  const mergeObject = (l, r) => {\n    const res = {};\n    const leftKeys = Reflect.ownKeys(l);\n    const rightKeys = Reflect.ownKeys(r);\n\n    leftRecord.set(l, res);\n    rightRecord.set(r, res);\n\n    leftKeys.forEach((key) => {\n      const lv = l[key];\n      const rv = r[key];\n\n      if (hasOwn(r, key)) {\n        if (isArray(lv) && isArray(rv)) {\n          const item = clone([...lv, ...rv]);\n          res[key] = dp ? unique(item) : item;\n        } else if (isPlainObject(lv) && isPlainObject(rv)) {\n          res[key] = isAllRefs(lv, rv)\n            ? leftRecord.get(lv) // The same value on the left and right, whichever is OK\n            : mergeObject(lv, rv);\n        } else {\n          res[key] = setValue(rightRecord, rv, key);\n        }\n      } else {\n        res[key] = setValue(leftRecord, lv, key);\n      }\n    });\n\n    rightKeys.forEach((key) => {\n      if (hasOwn(res, key)) return;\n      res[key] = setValue(rightRecord, r[key], key);\n    });\n\n    return res;\n  };\n\n  return mergeObject(o, n) as K & T;\n}\n\n// Scheme: https://tools.ietf.org/html/rfc3986#section-3.1\n// Absolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\nexport function isAbsolute(url: string) {\n  // `c:\\\\` \u8FD9\u79CD case \u8FD4\u56DE false\uFF0C\u5728\u6D4F\u89C8\u5668\u4E2D\u4F7F\u7528\u672C\u5730\u56FE\u7247\uFF0C\u5E94\u8BE5\u7528 file \u534F\u8BAE\n  if (!/^[a-zA-Z]:\\\\/.test(url)) {\n    if (/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.test(url)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function transformUrl(resolvePath: string, curPath: string) {\n  const baseUrl = new URL(resolvePath, location.href);\n  const realPath = new URL(curPath, baseUrl.href);\n  return realPath.href;\n}\n\nexport function toWsProtocol(url: string) {\n  const data = new URL(url);\n  if (data.protocol.startsWith('http')) {\n    data.protocol = data.protocol === 'https:' ? 'wss:' : 'ws:';\n    return data.toString();\n  }\n  return url;\n}\n\nexport function findTarget(\n  el: Element | ShadowRoot | Document,\n  selectors: Array<string>,\n) {\n  for (const s of selectors) {\n    const target = el.querySelector(s);\n    if (target) return target;\n  }\n  return el;\n}\n\nexport function setDocCurrentScript(\n  target,\n  code: string,\n  define?: boolean,\n  url?: string,\n  async?: boolean,\n  originScript?: HTMLScriptElement,\n) {\n  if (!target) return noop;\n  const el = document.createElement('script');\n  \n  if (!url && code) {\n    el.textContent = code;\n  }\n\n  originScript && originScript.getAttributeNames().forEach((attribute) => {\n    el.setAttribute(attribute, originScript.getAttribute(attribute) || '');\n  });\n\n  if (async) {\n    el.setAttribute('async', 'true');\n  }\n \n  const set = (val) => {\n    try {\n      if (define) {\n        Object.defineProperty(target, 'currentScript', {\n          value: val,\n          writable: true,\n          configurable: true,\n        });\n      } else {\n        target.currentScript = val;\n      }\n    } catch (e) {\n      if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n        warn(e);\n      }\n    }\n  };\n\n  set(el);\n  return () => safeWrapper(()=> delete target.currentScript);\n}\n\nexport function _extends(d, b) {\n  Object.setPrototypeOf(d, b);\n\n  function fNOP(this: any) {\n    this.constructor = d;\n  }\n\n  if (b === null) {\n    d.prototype = Object.create(b);\n  } else {\n    if (b.prototype) fNOP.prototype = b.prototype;\n    d.prototype = new fNOP();\n  }\n}\n\nexport function mapObject(\n  obj: Record<PropertyKey, any>,\n  fn: (key: PropertyKey, val: any) => any,\n) {\n  const destObject = {};\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      destObject[key] = fn(key, obj[key]);\n    }\n  }\n  return destObject;\n}\n\nexport function toBase64(input: string, mimeType?: string) {\n  return new Promise<string>((resolve) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(new Blob([input], { type: mimeType }));\n    reader.onload = () => resolve(reader.result as string);\n  });\n}\n\nexport const hookObjectProperty = <\n  T extends {},\n  K extends keyof T,\n  P extends any[],\n>(\n  obj: T,\n  key: K,\n  hookFunc: (origin: T[K], ...params: P) => T[K],\n) => {\n  return (...params: P) => {\n    if (!obj) {\n      return noop;\n    }\n    const origin = obj[key];\n    const hookedUnsafe = hookFunc(origin, ...params);\n    let hooked = hookedUnsafe;\n\n    // To method packages a layer of a try after all the hooks to catch\n    if (typeof hooked === 'function') {\n      hooked = function (this: any, ...args: any) {\n        try {\n          return (hookedUnsafe as any).apply(this, args);\n        } catch (e) {\n          return typeof origin === 'function' && origin.apply(this, args);\n        }\n      } as any as T[K];\n    }\n    obj[key] = hooked;\n\n    return (strict?: boolean) => {\n      if (!strict || hooked === obj[key]) {\n        obj[key] = origin;\n      }\n    };\n  };\n};\n\nexport function getParameterByName(name, url = window.location.href) {\n  name = name.replace(/[\\[\\]]/g, '\\\\$&');\n  const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n    results = regex.exec(url);\n  if (!results) return null;\n  if (!results[2]) return '';\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\n\nexport function getGarfishDebugInstanceName(): string | null {\n  const DEBUG_GARFISH_TAG = '__GARFISH_INSTANCE_DEBUG__';\n  return (\n    localStorage.getItem(DEBUG_GARFISH_TAG) ||\n    getParameterByName(DEBUG_GARFISH_TAG)\n  );\n}\n\n// Reflect.set will be called in the set callback, and the DefineProperty callback will be triggered after Reflect.set is called.\n// but the descriptor values \u200B\u200Bwritable, enumerable, and configurable on safari 13.x version are set to false for the second time\n// set and defineProperty callback is async Synchronize back\n// Set the default when calling defineProperty through set \u200B\u200Bwritable, enumerable, and configurable default to true\n// safari 13.x default use strict mode\uFF0Cdescriptor's \u200B\u200Bwritable is false can't set again\n// deal safari 13\nexport function safari13Deal() {\n  let fromSetFlag = false;\n  return {\n    triggerSet() {\n      fromSetFlag = true;\n    },\n    // reason: Reflect.set\n    // Object.defineProperty is used to implement, so defineProperty is triggered when set is triggered\n    // but the descriptor values \u200B\u200Bwritable, enumerable, and configurable on safari 13.x version are set to false for the second time\n    handleDescriptor(descriptor: PropertyDescriptor) {\n      if (fromSetFlag === true) {\n        fromSetFlag = false;\n        if (descriptor?.writable === false) descriptor.writable = true;\n        if (descriptor?.enumerable === false) descriptor.enumerable = true;\n        if (descriptor?.configurable === false) descriptor.configurable = true;\n      }\n    },\n  };\n}\n\nconst SOURCEMAP_REG = /[@#] sourceMappingURL=/g;\nexport function haveSourcemap(code: string) {\n  return SOURCEMAP_REG.test(code);\n}\n\nexport async function createSourcemap(code: string, filename: string) {\n  const content = await toBase64(\n    JSON.stringify({\n      version: 3,\n      sources: [filename],\n      sourcesContent: [code],\n      mappings:\n        ';' +\n        code\n          .split('\\n')\n          .map(() => 'AACA')\n          .join(';'),\n    }),\n  );\n  return `//@ sourceMappingURL=${content}`;\n}\n", "interface Defer {\n  resolve: (value?: any) => void;\n  reject: (reason?: any) => void;\n}\n\nexport class Queue {\n  private fx: Array<Function> = [];\n  private init = true;\n  private lock = false;\n  private finishDefers = new Set<Defer>();\n\n  private next() {\n    if (!this.lock) {\n      this.lock = true;\n      if (this.fx.length === 0) {\n        this.init = true;\n        this.finishDefers.forEach((d) => d.resolve());\n        this.finishDefers.clear();\n      } else {\n        const fn = this.fx.shift();\n        if (fn) {\n          fn(() => {\n            this.lock = false;\n            this.next();\n          });\n        }\n      }\n    }\n  }\n\n  add(fn: (next: () => void) => void) {\n    this.fx.push(fn);\n    if (this.init) {\n      this.lock = false;\n      this.init = false;\n      this.next();\n    }\n  }\n\n  awaitCompletion() {\n    if (this.init) return Promise.resolve();\n    const defer = {} as Defer;\n    this.finishDefers.add(defer);\n    return new Promise((resolve, reject) => {\n      defer.resolve = resolve;\n      defer.reject = reject;\n    });\n  }\n}\n", "// copy from https://github.com/getsentry/sentry-javascript/blob/6.4.0/packages/browser/src/tracekit.ts\nimport { makeMap } from './utils';\n\nexport interface StackFrame {\n  url: string;\n  func: string;\n  args: string[];\n  line: number | null;\n  column: number | null;\n}\n\nexport interface StackTrace {\n  name: string;\n  message: string;\n  mechanism?: string;\n  stack: StackFrame[];\n  failed?: boolean;\n}\nconst chrome =\n  /^\\s*at (?:(.*?) ?\\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\\/).*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i;\n// gecko regex: `(?:bundle|\\d+\\.js)`: `bundle` is for react native, `\\d+\\.js` also but specifically for ram bundles because it\n// generates filenames without a prefix like `file://` the filenames in the stacktrace are just 42.js\n// We need this specific case for now because we want no other regex to match.\nconst gecko =\n  /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\\/.*?|\\[native code\\]|[^@]*(?:bundle|\\d+\\.js)|\\/[\\w\\-. /=]+)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nconst winjs =\n  /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\nconst geckoEval = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\nconst chromeEval = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/;\n// Based on our own mapping pattern - https://github.com/getsentry/sentry/blob/9f08305e09866c8bd6d0c24f5b0aabdd7dd6c59c/src/sentry/lang/javascript/errormapping.py#L83-L108\nconst reactMinifiedRegexp = /Minified React error #\\d+;/i;\n\nconst UNKNOWN_FUNCTION = '?';\nfunction extractMessage(ex: any): string {\n  const message = ex && ex.message;\n  if (!message) {\n    return 'No error message';\n  }\n  if (message.error && typeof message.error.message === 'string') {\n    return message.error.message;\n  }\n  return message;\n}\n\nexport function computeStackTraceFromStackProp(ex: any): StackTrace | null {\n  if (!ex || !ex.stack) {\n    return null;\n  }\n\n  const stack: Array<any> = [];\n  const lines = ex.stack.split('\\n');\n  let isEval;\n  let submatch;\n  let parts;\n  let element;\n\n  for (let i = 0; i < lines.length; ++i) {\n    if ((parts = chrome.exec(lines[i]))) {\n      const isNative = parts[2] && parts[2].indexOf('native') === 0; // start of line\n      isEval = parts[2] && parts[2].indexOf('eval') === 0; // start of line\n      if (isEval && (submatch = chromeEval.exec(parts[2]))) {\n        // throw out eval line/column and use top-most line/column number\n        parts[2] = submatch[1]; // url\n      }\n\n      // Arpad: Working with the regexp above is super painful. it is quite a hack, but just stripping the `address at `\n      // prefix here seems like the quickest solution for now.\n      let url =\n        parts[2] && parts[2].indexOf('address at ') === 0\n          ? parts[2].substr('address at '.length)\n          : parts[2];\n\n      // Kamil: One more hack won't hurt us right? Understanding and adding more rules on top of these regexps right now\n      // would be way too time consuming. (TODO: Rewrite whole RegExp to be more readable)\n      let func = parts[1] || UNKNOWN_FUNCTION;\n      const isSafariExtension = func.indexOf('safari-extension') !== -1;\n      const isSafariWebExtension = func.indexOf('safari-web-extension') !== -1;\n      if (isSafariExtension || isSafariWebExtension) {\n        func = func.indexOf('@') !== -1 ? func.split('@')[0] : UNKNOWN_FUNCTION;\n        url = isSafariExtension\n          ? `safari-extension:${url}`\n          : `safari-web-extension:${url}`;\n      }\n\n      element = {\n        url,\n        func,\n        args: isNative ? [parts[2]] : [],\n        line: parts[3] ? +parts[3] : null,\n        column: parts[4] ? +parts[4] : null,\n      };\n    } else if ((parts = winjs.exec(lines[i]))) {\n      element = {\n        url: parts[2],\n        func: parts[1] || UNKNOWN_FUNCTION,\n        args: [],\n        line: +parts[3],\n        column: parts[4] ? +parts[4] : null,\n      };\n    } else if ((parts = gecko.exec(lines[i]))) {\n      isEval = parts[3] && parts[3].indexOf(' > eval') > -1;\n      if (isEval && (submatch = geckoEval.exec(parts[3]))) {\n        // throw out eval line/column and use top-most line number\n        parts[1] = parts[1] || 'eval';\n        parts[3] = submatch[1];\n        parts[4] = submatch[2];\n        parts[5] = ''; // no column when eval\n      } else if (i === 0 && !parts[5] && ex.columnNumber !== void 0) {\n        // FireFox uses this awesome columnNumber property for its top frame\n        // Also note, Firefox's column number is 0-based and everything else expects 1-based,\n        // so adding 1\n        // NOTE: this hack doesn't work if top-most frame is eval\n        stack[0].column = (ex.columnNumber as number) + 1;\n      }\n      element = {\n        url: parts[3],\n        func: parts[1] || UNKNOWN_FUNCTION,\n        args: parts[2] ? parts[2].split(',') : [],\n        line: parts[4] ? +parts[4] : null,\n        column: parts[5] ? +parts[5] : null,\n      };\n    } else {\n      continue;\n    }\n\n    if (!element.func && element.line) {\n      element.func = UNKNOWN_FUNCTION;\n    }\n\n    stack.push(element);\n  }\n\n  if (!stack.length) {\n    return null;\n  }\n\n  return {\n    message: extractMessage(ex),\n    name: ex.name,\n    stack,\n  };\n}\n\nexport const sourceListTags = [\n  'link',\n  'style',\n  'script',\n  'img',\n  'video',\n  'audio',\n];\nexport const sourceNode = makeMap(sourceListTags);\n\n// Calculate the error object file within the address\nexport function computeErrorUrl(ex: any) {\n  if (ex && ex.filename) return ex.filename;\n  const res = computeStackTraceFromStackProp(ex);\n  if (res) {\n    const urls = res.stack.map((item) => {\n      return item.url;\n    });\n    return urls[0] || null;\n  } else if (ex && ex.target && ex.target.tagName) {\n    const tagName = ex.target.tagName.toLowerCase();\n    if (sourceNode(tagName)) {\n      return ex.target.src || ex.target.href;\n    }\n  }\n\n  return null;\n}\n\n// Filter is not a goal resources from the mistake\nexport function filterAndWrapEventListener(\n  type: string,\n  listener: EventListenerOrEventListenerObject,\n  sourceList: Array<string>,\n) {\n  const errorHandler = function (e) {\n    // Conform to the file list type trigger collection of events\n    if (typeof listener === 'function') {\n      // Through error stack source file, and the source of the static resources determine whether the current error belongs to the current application\n      // if belong to the current application environment monitoring error\n      if (sourceList) {\n        console.log('**********', computeErrorUrl(e));\n        const res = sourceList.find((item) => {\n          return item.indexOf(computeErrorUrl(e)) !== -1;\n        });\n        if (res) {\n          // e.stopPropagation();\n          listener(e);\n        }\n      } else {\n        listener(e);\n      }\n    }\n  };\n\n  const unhandledrejection = function (event) {\n    event.promise.catch((e) => {\n      if (e instanceof Error) {\n        errorHandler(e);\n      } else {\n        if (typeof listener === 'function') listener(event);\n      }\n    });\n  };\n\n  const filterError: EventListenerOrEventListenerObject = function (event) {\n    // Due to the current Garfish rendering process is asynchronous behavior leading to originally 'error' trigger events were 'unhandledrejection' to catch\n    // Filtering error does not belong to the current application resources, has reached the area target application exception\n    // Need a sandbox can effectively capture and create resources increase all child application content\n    if (typeof listener === 'function') {\n      if (type === 'unhandledrejection') {\n        unhandledrejection(event);\n      } else if (type === 'error') {\n        errorHandler(event);\n      } else {\n        listener(event);\n      }\n    }\n  };\n  return filterError;\n}\n", "import { makeMap } from './utils';\n\nexport interface Text {\n  content: string;\n  type: 'text' | 'comment';\n}\n\nexport interface Node {\n  key?: string;\n  type: 'element';\n  tagName: string;\n  children: Array<Node | Text>;\n  attributes: Array<Record<string, string | null>>;\n}\n\ntype Attributes = Array<Record<string, string | null>>;\n\nconst xChar = 120; // \"x\" char\nconst colonChar = 58; // \":\" char\nconst ns = 'http://www.w3.org/2000/svg';\nconst xlinkNS = 'http://www.w3.org/1999/xlink'; // xmlns:xlink\nconst xmlNS = 'http://www.w3.org/XML/1998/namespace'; // xmlns\n\n// https://developer.mozilla.org/en-US/docs/Web/SVG/Element\nconst SVG_TAGS =\n  'svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,' +\n  'defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,' +\n  'feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,' +\n  'feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,' +\n  'feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,' +\n  'fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,' +\n  'foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,' +\n  'mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,' +\n  'polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,' +\n  'text,textPath,title,tspan,unknown,use,view';\n\nconst isSVG = makeMap(SVG_TAGS.split(','));\n\nfunction attributesString(attributes: Node['attributes']) {\n  if (!attributes || attributes.length === 0) return '';\n  return attributes.reduce((total, { key, value }) => {\n    return total + (value ? `${key}=\"${value}\" ` : key);\n  }, '');\n}\n\nexport class DOMApis {\n  public document: Document;\n\n  constructor(cusDocument?: Document) {\n    this.document = cusDocument || document;\n  }\n\n  isText(node: Node | Text): node is Text {\n    return node && node.type === 'text';\n  }\n\n  isNode(node: Node | Text) {\n    return node && node.type === 'element';\n  }\n\n  isCommentNode(node: Node | Text) {\n    return node && node.type === 'comment';\n  }\n\n  isCssLinkNode(node: Node) {\n    if (this.isNode(node) && node.tagName === 'link') {\n      return !!node.attributes.find(\n        ({ key, value }) => key === 'rel' && value === 'stylesheet',\n      );\n    }\n    return false;\n  }\n\n  isIconLinkNode(node: Node) {\n    if (this.isNode(node) && node.tagName === 'link') {\n      return !!node.attributes.find(\n        ({ key, value }) => key === 'rel' && value === 'icon',\n      );\n    }\n    return false;\n  }\n\n  isPrefetchJsLinkNode(node: Node) {\n    if (!this.isNode(node) || node.tagName !== 'link') return false;\n    let hasRelAttr, hasAsAttr;\n    for (const { key, value } of node.attributes) {\n      if (key === 'rel') {\n        hasRelAttr = true;\n        if (value !== 'preload' && value !== 'prefetch') {\n          return false;\n        }\n      } else if (key === 'as') {\n        hasAsAttr = true;\n        if (value !== 'script') return false;\n      }\n    }\n    return Boolean(hasRelAttr && hasAsAttr);\n  }\n\n  isRemoteModule(node: Node) {\n    if (!this.isNode(node) || node.tagName !== 'meta') return false;\n    let hasNameAttr, hasSrcAttr;\n    for (const { key, value } of node.attributes) {\n      if (key === 'name') {\n        hasNameAttr = true;\n        if (value !== 'garfish-remote-module') {\n          return false;\n        }\n      } else if (key === 'src') {\n        hasSrcAttr = true;\n        if (typeof value === 'undefined' || value === '') {\n          return false;\n        }\n      }\n    }\n    return Boolean(hasNameAttr && hasSrcAttr);\n  }\n\n  removeElement(el: Element | Comment) {\n    const parentNode = el && el.parentNode;\n    if (parentNode) {\n      parentNode.removeChild(el);\n    }\n  }\n\n  createElement(node: Node) {\n    const { tagName, attributes } = node;\n    const el = isSVG(tagName)\n      ? this.document.createElementNS(ns, tagName)\n      : this.document.createElement(tagName);\n\n    this.applyAttributes(el, attributes);\n    return el;\n  }\n\n  createTextNode(node: Text) {\n    return this.document.createTextNode(node.content);\n  }\n\n  createStyleNode(content: string) {\n    const el = this.document.createElement('style');\n    content && (el.textContent = content);\n    this.applyAttributes(el, [{ key: 'type', value: 'text/css' }]);\n    return el;\n  }\n\n  createLinkCommentNode(node: Node | string) {\n    if (this.isNode(node as Node)) {\n      const ps = attributesString((node as Node).attributes);\n      return `<link ${ps.slice(0, -1)}></link>`;\n    } else {\n      node = node ? `src=\"${node}\" ` : '';\n      return this.document.createComment(\n        `<link ${node}execute by garfish(dynamic)></link>`,\n      );\n    }\n  }\n\n  createScriptCommentNode(node: Node | { code: string; src?: string }) {\n    if (this.isNode(node as Node)) {\n      const { attributes, children } = node as Node;\n      const ps = attributesString(attributes);\n      const code = children?.[0] ? (children[0] as Text).content : '';\n      return this.document.createComment(\n        `<script ${ps} execute by garfish>${code}</script>`,\n      );\n    } else {\n      const { src, code } = node as any;\n      const url = src ? `src=\"${src}\" ` : '';\n      return this.document.createComment(\n        `<script ${url}execute by garfish(dynamic)>${code}</script>`,\n      );\n    }\n  }\n\n  applyAttributes(el: Element, attributes: Attributes) {\n    if (!attributes || attributes.length === 0) return;\n    for (const { key, value } of attributes) {\n      if (key) {\n        if (value === null) {\n          el.setAttribute(key, '');\n        } else if (typeof value === 'string') {\n          if (key.charCodeAt(0) !== xChar) {\n            el.setAttribute(key, value);\n          } else if (key.charCodeAt(3) === colonChar) {\n            el.setAttributeNS(xmlNS, key, value);\n          } else if (key.charCodeAt(5) === colonChar) {\n            el.setAttributeNS(xlinkNS, key, value);\n          } else {\n            el.setAttribute(key, value);\n          }\n        }\n      }\n    }\n  }\n}\n", "export const __LOADER_FLAG__ = Symbol.for('__LOADER_FLAG__');\nexport const __GARFISH_FLAG__ = Symbol.for('__GARFISH_FLAG__');\nexport const __MockHtml__ = '__garfishmockhtml__';\nexport const __MockBody__ = '__garfishmockbody__';\nexport const __MockHead__ = '__garfishmockhead__';\nexport const __REMOVE_NODE__ = '__garfishremovenode__';\n", "export type mimeType = ReturnType<typeof parseContentType>;\n\nexport function parseContentType(input: string) {\n  input = input?.trim();\n  if (!input) return null;\n\n  let idx = 0;\n  let type = '';\n  let subType = '';\n  while (idx < input.length && input[idx] !== '/') {\n    type += input[idx];\n    idx++;\n  }\n  if (type.length === 0 || idx >= input.length) {\n    return null;\n  }\n  // jump over '/'\n  idx++;\n  while (idx < input.length && input[idx] !== ';') {\n    subType += input[idx];\n    idx++;\n  }\n  subType = subType.replace(/[ \\t\\n\\r]+$/, '');\n  if (subType.length === 0) return null;\n\n  return {\n    type: type.toLocaleLowerCase(),\n    subtype: subType.toLocaleLowerCase(),\n  };\n}\n\nexport function isCss(mt: mimeType) {\n  return mt ? mt.type === 'text' && mt.subtype === 'css' : false;\n}\n\nexport function isHtml(mt: mimeType) {\n  return mt ? mt.type === 'text' && mt.subtype === 'html' : false;\n}\n\n// https://mimesniff.spec.whatwg.org/#javascript-mime-type\nexport function isJs(mt: mimeType) {\n  const { type, subtype } = mt || {};\n  switch (type) {\n    case 'text': {\n      switch (subtype) {\n        case 'ecmascript':\n        case 'javascript':\n        case 'javascript1.0':\n        case 'javascript1.1':\n        case 'javascript1.2':\n        case 'javascript1.3':\n        case 'javascript1.4':\n        case 'javascript1.5':\n        case 'jscript':\n        case 'livescript':\n        case 'x-ecmascript':\n        case 'x-javascript': {\n          return true;\n        }\n        default: {\n          return false;\n        }\n      }\n    }\n    case 'application': {\n      switch (subtype) {\n        case 'ecmascript':\n        case 'javascript':\n        case 'x-ecmascript':\n        case 'x-javascript': {\n          return true;\n        }\n        default: {\n          return false;\n        }\n      }\n    }\n    default: {\n      return false;\n    }\n  }\n}\n\nexport function isJsonp(mt: mimeType, src: string) {\n  const callbackRegExp = /callback/;\n  try {\n    const search = new URL(src).search;\n    const { type, subtype } = mt || {};\n    if (\n      type === 'application' &&\n      subtype === 'json' &&\n      callbackRegExp.test(search)\n    ) {\n      return true;\n    }\n  } catch (e) {\n    return false;\n  }\n  return false;\n}\n\nexport function isJsType({ src = '', type }: { src?: string; type?: string }) {\n  if (/\\.js$/.test(src)) return true;\n\n  if (type) {\n    if (type === 'module') return true;\n    const mimeTypeInfo = parseContentType(type);\n    if (isJsonp(mimeTypeInfo, src)) return true;\n    if (isJs(mimeTypeInfo)) return true;\n  }\n\n  return false;\n}\n\nexport function isCssType({ src = '', type }: { src?: string; type?: string }) {\n  if (/\\.css$/.test(src)) return true;\n\n  if (type) {\n    const mimeTypeInfo = parseContentType(type);\n    if (isCss(mimeTypeInfo)) return true;\n  }\n\n  return false;\n}\n\nexport function isHtmlType({\n  src = '',\n  type,\n}: {\n  src?: string;\n  type?: string;\n}) {\n  if (/\\.html$/.test(src)) return true;\n\n  if (type) {\n    const mimeTypeInfo = parseContentType(type);\n    if (isHtml(mimeTypeInfo)) return true;\n  }\n\n  return false;\n}\n\nexport function isGarfishConfigType({\n  type = '',\n}: {\n  type?: string;\n}) {\n  return /garfish-config/i.test(type);\n}\n", "import { hasOwn } from './utils';\n\n// reference https://zh-hans.reactjs.org/docs/events.html\nconst reactEvents = [\n  'onAbort',\n  'onAnimationCancel',\n  'onAnimationEnd',\n  'onAnimationIteration',\n  'onAuxClick',\n  'onBlur',\n  'onChange',\n  'onClick',\n  'onClose',\n  'onContextMenu',\n  'onDoubleClick',\n  'onError',\n  'onFocus',\n  'onGotPointerCapture',\n  'onInput',\n  'onKeyDown',\n  'onKeyPress',\n  'onKeyUp',\n  'onLoad',\n  'onLoadEnd',\n  'onLoadStart',\n  'onLostPointerCapture',\n  'onMouseDown',\n  'onMouseMove',\n  'onMouseOut',\n  'onMouseOver',\n  'onMouseUp',\n  'onPointerCancel',\n  'onPointerDown',\n  'onPointerEnter',\n  'onPointerLeave',\n  'onPointerMove',\n  'onPointerOut',\n  'onPointerOver',\n  'onPointerUp',\n  'onReset',\n  'onResize',\n  'onScroll',\n  'onSelect',\n  'onSelectionChange',\n  'onSelectStart',\n  'onSubmit',\n  'onTouchCancel',\n  'onTouchMove',\n  'onTouchStart',\n  'onTouchEnd',\n  'onTransitionCancel',\n  'onTransitionEnd',\n  'onDrag',\n  'onDragEnd',\n  'onDragEnter',\n  'onDragExit',\n  'onDragLeave',\n  'onDragOver',\n  'onDragStart',\n  'onDrop',\n  'onFocusOut',\n];\n\nconst divergentNativeEvents = {\n  onDoubleClick: 'dblclick',\n};\n\nconst mimickedReactEvents = {\n  onInput: 'onChange',\n  onFocusOut: 'onBlur',\n  onSelectionChange: 'onSelect',\n};\n\nexport function dispatchEvents(shadowRoot) {\n  const removeEventListeners: Array<() => void> = [];\n\n  reactEvents.forEach(function (reactEventName) {\n    const nativeEventName = getNativeEventName(reactEventName);\n\n    function retargetEvent(event) {\n      const path =\n        event.path ||\n        (event.composedPath && event.composedPath()) ||\n        composedPath(event.target);\n\n      for (let i = 0; i < path.length; i++) {\n        const el = path[i];\n        let props = null;\n        const reactComponent = findReactComponent(el);\n        const eventHandlers = findReactEventHandlers(el);\n\n        if (!eventHandlers) {\n          props = findReactProps(reactComponent);\n        } else {\n          props = eventHandlers;\n        }\n\n        if (reactComponent && props) {\n          dispatchEvent(event, reactEventName, props);\n        }\n\n        if (reactComponent && props && mimickedReactEvents[reactEventName]) {\n          dispatchEvent(event, mimickedReactEvents[reactEventName], props);\n        }\n\n        if (event.cancelBubble) {\n          break;\n        }\n\n        if (el === shadowRoot) {\n          break;\n        }\n      }\n    }\n\n    shadowRoot.addEventListener(nativeEventName, retargetEvent, false);\n\n    removeEventListeners.push(function () {\n      shadowRoot.removeEventListener(nativeEventName, retargetEvent, false);\n    });\n  });\n\n  return function () {\n    removeEventListeners.forEach(function (removeEventListener) {\n      removeEventListener();\n    });\n  };\n}\n\nfunction findReactEventHandlers(item) {\n  return findReactProperty(item, '__reactEventHandlers');\n}\n\nfunction findReactComponent(item) {\n  return findReactProperty(item, '_reactInternal');\n}\n\nfunction findReactProperty(item, propertyPrefix) {\n  for (const key in item) {\n    if (hasOwn(item, key) && key.indexOf(propertyPrefix) !== -1) {\n      return item[key];\n    }\n  }\n}\n\nfunction findReactProps(component) {\n  if (!component) return undefined;\n  if (component.memoizedProps) return component.memoizedProps; // React 16 Fiber\n  if (component._currentElement && component._currentElement.props)\n    return component._currentElement.props; // React <=15\n}\n\nfunction dispatchEvent(event, eventType, componentProps) {\n  event.persist = function () {\n    event.isPersistent = () => true;\n  };\n\n  if (componentProps[eventType]) {\n    componentProps[eventType](event);\n  }\n}\n\nfunction getNativeEventName(reactEventName) {\n  if (divergentNativeEvents[reactEventName]) {\n    return divergentNativeEvents[reactEventName];\n  }\n  return reactEventName.replace(/^on/, '').toLowerCase();\n}\n\nfunction composedPath(el) {\n  const path: Array<any> = [];\n  while (el) {\n    path.push(el);\n    if (el.tagName === 'HTML') {\n      path.push(document);\n      path.push(window);\n      return path;\n    }\n    el = el.parentElement;\n  }\n}\n", "import type { interfaces } from '@garfish/core';\nimport { dispatchEvents } from './dispatchEvents';\nimport { __MockHtml__ } from './garfish';\nimport { assert, createKey } from './utils';\n\n// Guarantee in strict isolation mode, the shadow in the dom popup window, floating layer depends on the body style of work\nfunction asyncNodeAttribute(from: Element, to: Element) {\n  const MutationObserver = window.MutationObserver;\n  const observer = new MutationObserver((mutations) => {\n    mutations.forEach(({ type, target, attributeName }) => {\n      if (target) {\n        const tag = target.nodeName?.toLowerCase();\n        if (\n          type === 'attributes' &&\n          attributeName === 'style' &&\n          (target === from || tag === 'body')\n        ) {\n          const style = (target as any)?.getAttribute('style');\n          if (style) {\n            to.setAttribute('style', style);\n          }\n        }\n      }\n    });\n  });\n  observer.observe(from, { attributes: true, subtree: true });\n}\n\nexport const appContainerId = 'garfish_app_for';\n\nexport function createAppContainer(appInfo: interfaces.AppInfo) {\n  // Create a temporary node, which is destroyed by the module itself\n  let htmlNode: HTMLDivElement | HTMLHtmlElement =\n    document.createElement('div');\n  const appContainer = document.createElement('div');\n\n  if (appInfo.sandbox && appInfo.sandbox.strictIsolation) {\n    htmlNode = document.createElement('html');\n    const root = appContainer.attachShadow({ mode: 'open' });\n    root.appendChild(htmlNode);\n    // asyncNodeAttribute(htmlNode, document.body);\n    dispatchEvents(root);\n  } else {\n    htmlNode.setAttribute(__MockHtml__, '');\n    appContainer.appendChild(htmlNode);\n  }\n\n  appContainer.id = `${appContainerId}_${appInfo.name}_${createKey()}`;\n\n  return {\n    htmlNode,\n    appContainer,\n  };\n}\n\n/**\n *  Wait for the specified dom ready tool method\n */\nfunction waitElementReady(selector, callback) {\n  const elem = document.querySelector(selector);\n\n  if (elem !== null) {\n    callback(elem);\n    return;\n  }\n\n  setTimeout(function () {\n    waitElementReady(selector, callback);\n  }, 50);\n}\n\nfunction delay(duration) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, duration);\n  });\n}\n\nfunction waitElement(selector, timeout = 3000) {\n  const waitPromise = new Promise(function (resolve) {\n    waitElementReady(selector, function (elem: Element) {\n      return resolve(elem);\n    });\n  });\n  return Promise.race([delay(timeout), waitPromise]);\n}\n\nexport async function getRenderNode(domGetter?: interfaces.DomGetter) {\n  assert(domGetter, `Invalid domGetter:\\n ${domGetter}.`);\n  let appWrapperNode;\n\n  if (typeof domGetter === 'string') {\n    appWrapperNode = (await waitElement(domGetter)) as\n      | Element\n      | null\n      | undefined;\n  } else if (typeof domGetter === 'function') {\n    appWrapperNode = await Promise.resolve(domGetter());\n  }\n  assert(appWrapperNode instanceof Element, `Invalid domGetter: ${domGetter}`);\n  return appWrapperNode as Element;\n}\n", "import { error } from './utils';\nimport { Node as VNode } from './domApis';\n\nenum ElementType {\n  TEXT = 3,\n  COMMENT = 8,\n  ELEMENT = 1,\n}\n\nfunction Attributes(this: any, { name, value }) {\n  this.key = name;\n  this.value = value;\n}\n\nconst generateAttributes = (el: Element) => {\n  const list: Array<any> = [];\n  const attrs = el.attributes;\n  const len = attrs.length;\n\n  if (len > 0) {\n    // Optimize for the most common cases\n    if (len === 1) {\n      list[0] = new Attributes(attrs[0]);\n    } else if (len === 2) {\n      list[0] = new Attributes(attrs[0]);\n      list[1] = new Attributes(attrs[1]);\n    } else {\n      for (let i = 0; i < len; i++) {\n        list[i] = new Attributes(attrs[i]);\n      }\n    }\n  }\n  return list;\n};\n\nconst createElement = (el: Element, filter: (el: VNode) => VNode) => {\n  switch (el.nodeType) {\n    case ElementType.TEXT:\n      return {\n        type: 'text',\n        content: el.textContent,\n      };\n    case ElementType.COMMENT:\n      return {\n        type: 'comment',\n        content: el.textContent,\n      };\n    case ElementType.ELEMENT:\n      return filter({\n        type: 'element',\n        tagName: el.tagName.toLowerCase(),\n        attributes: generateAttributes(el),\n        children: Array.from(el.childNodes).map((node) => {\n          return createElement(node as Element, filter);\n        }),\n      });\n    default:\n      error(`Invalid node type \"${el.nodeType}\"`);\n  }\n};\n\n// 1M text takes about time 60ms\nexport function templateParse(code: string, tags: Array<string>) {\n  let astTree: Array<VNode> = [];\n  const htmlNode = document.createElement('html');\n  const collectionEls: Record<string, Array<VNode>> = {};\n  const filter = (el) => {\n    if (tags.includes(el.tagName)) {\n      collectionEls[el.tagName].push(el);\n    }\n    return el;\n  };\n\n  htmlNode.innerHTML = code;\n  for (const tag of tags) {\n    collectionEls[tag] = [];\n  }\n  astTree = Array.from(htmlNode.childNodes).map((node) => {\n    return createElement(node as Element, filter);\n  });\n  return [astTree, collectionEls] as const;\n}\n", "import createDebug from 'debug';\n\nconst log = createDebug('garfish');\n\nexport const coreLog = log.extend('core');\nexport const routerLog = log.extend('router');\n", "interface LockItem {\n  id: number;\n  waiting: Promise<void>;\n  resolve: (value?: any) => void;\n}\n\nexport class Lock {\n  private id = 0;\n  private lockQueue: LockItem[] = [];\n\n  genId() {\n    return ++this.id;\n  }\n\n  getId() {\n    return this.id;\n  }\n\n  async wait(id: number) {\n    const { lockQueue } = this;\n    const firstLock = lockQueue[0];\n    const lastLock = firstLock ? lockQueue[lockQueue.length - 1] : undefined;\n\n    // This lock is processing, just return immediately\n    if (firstLock?.id === id) return;\n\n    // This lock should wait for the other lock\n    let lockItem = lockQueue.find(item => item.id === id);\n\n    if (!lockItem) {\n      let promiseResolve: LockItem['resolve'] = () => {};\n      const waiting = new Promise<void>(resolve => {\n        promiseResolve = resolve;\n      });\n      // create a new lock\n      lockItem = { id, waiting, resolve: promiseResolve };\n      lockQueue.push(lockItem);\n    }\n    if (lastLock) {\n      // start waiting\n      await lastLock.waiting;\n    }\n    // don't need to wait\n  }\n\n  release() {\n    const { lockQueue } = this;\n    const firstLock = lockQueue[0];\n    if (!firstLock) return;\n    // remove this lock\n    lockQueue.shift();\n    // resolve the promise of current lock\n    firstLock.resolve();\n  }\n\n  clear() {\n    this.lockQueue = [];\n  }\n}\n", "import { warn } from '@garfish/utils';\n\nexport type Callback<T, K> = (...args: ArgsType<T>) => K;\nexport type ArgsType<T> = T extends Array<any> ? T : Array<any>;\n\nexport class SyncHook<T, K> {\n  public type: string = '';\n  public listeners = new Set<Callback<T, K>>();\n\n  constructor(type?: string) {\n    if (type) this.type = type;\n  }\n\n  on(fn: Callback<T, K>) {\n    if (typeof fn === 'function') {\n      this.listeners.add(fn);\n    } else if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n      warn('Invalid parameter in \"Hook\".');\n    }\n  }\n\n  once(fn: Callback<T, K>) {\n    const self = this;\n    this.on(function wrapper(...args: Array<any>) {\n      self.remove(wrapper);\n      return fn.apply(null, args);\n    });\n  }\n\n  emit(...data: ArgsType<T>) {\n    if (this.listeners.size > 0) {\n      this.listeners.forEach((fn) => fn.apply(null, data));\n    }\n  }\n\n  remove(fn: Callback<T, K>) {\n    return this.listeners.delete(fn);\n  }\n\n  removeAll() {\n    this.listeners.clear();\n  }\n}\n", "import { ArgsType, SyncHook } from './syncHook';\n\ntype CallbackReturnType = void | false | Promise<void | false>;\n\nexport class AsyncHook<\n  T,\n  ExternalEmitReturnType = CallbackReturnType,\n> extends SyncHook<T, CallbackReturnType | Promise<ExternalEmitReturnType>> {\n  emit(...data: ArgsType<T>): Promise<void | false | ExternalEmitReturnType> {\n    let result;\n    const ls = Array.from(this.listeners);\n    if (ls.length > 0) {\n      let i = 0;\n      const call = (prev?: any) => {\n        if (prev === false) {\n          return false; // Abort process\n        } else if (i < ls.length) {\n          return Promise.resolve(ls[i++].apply(null, data)).then(call);\n        } else {\n          return prev;\n        }\n      };\n      result = call();\n    }\n    return Promise.resolve(result);\n  }\n}\n", "import { warn, error, isObject } from '@garfish/utils';\nimport { SyncHook } from './syncHook';\n\nexport function checkReturnData(originData, returnData) {\n  if (!isObject(returnData)) return false;\n  if (originData !== returnData) {\n    for (const key in originData) {\n      if (!(key in returnData)) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nexport class SyncWaterfallHook<T extends Record<string, any>> extends SyncHook<\n  [T],\n  T\n> {\n  public onerror: (errMsg: string | Error) => void = error;\n\n  constructor(type: string) {\n    super();\n    this.type = type;\n  }\n\n  emit(data: T) {\n    if (!isObject(data)) {\n      error(`\"${this.type}\" hook response data must be an object.`);\n    }\n    for (const fn of this.listeners) {\n      try {\n        const tempData = fn(data);\n        if (checkReturnData(data, tempData)) {\n          data = tempData;\n        } else {\n          this.onerror(\n            `The \"${this.type}\" type has a plugin return value error.`,\n          );\n          break;\n        }\n      } catch (e) {\n        (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && warn(e);\n        this.onerror(e);\n      }\n    }\n    return data;\n  }\n}\n", "import { warn, error, isObject } from '@garfish/utils';\nimport { SyncHook } from './syncHook';\nimport { checkReturnData } from './syncWaterfallHook';\n\ntype CallbackReturnType<T> = T | false | Promise<T | false>;\n\nexport class AsyncWaterfallHook<T extends Record<string, any>> extends SyncHook<\n  [T],\n  CallbackReturnType<T>\n> {\n  public onerror: (errMsg: string | Error) => void = error;\n\n  constructor(type: string) {\n    super();\n    this.type = type;\n  }\n\n  emit(data: T): Promise<T | false> {\n    if (!isObject(data)) {\n      error(`\"${this.type}\" hook response data must be an object.`);\n    }\n    const ls = Array.from(this.listeners);\n\n    if (ls.length > 0) {\n      let i = 0;\n      const processError = (e) => {\n        (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && warn(e);\n        this.onerror(e);\n        return data;\n      };\n\n      const call = (prevData: T | false) => {\n        if (prevData === false) {\n          return false;\n        } else if (checkReturnData(data, prevData)) {\n          data = prevData as T;\n          if (i < ls.length) {\n            try {\n              return Promise.resolve(ls[i++](data)).then(call, processError);\n            } catch (e) {\n              return processError(e);\n            }\n          }\n        } else {\n          this.onerror(\n            `The \"${this.type}\" type has a plugin return value error.`,\n          );\n        }\n        return data;\n      };\n      return Promise.resolve(call(data));\n    }\n    return Promise.resolve(data);\n  }\n}\n", "import { warn, assert, isPlainObject } from '@garfish/utils';\n\nexport type Plugin<T extends Record<string, any>> = {\n  [k in keyof T]?: Parameters<T[k]['on']>[0];\n} & {\n  name: string;\n  version?: string;\n};\n\nexport class PluginSystem<T extends Record<string, any>> {\n  lifecycle: T;\n  lifecycleKeys: Array<keyof T>;\n  registerPlugins: Record<string, Plugin<T>> = {};\n\n  constructor(lifecycle: T) {\n    this.lifecycle = lifecycle;\n    this.lifecycleKeys = Object.keys(lifecycle);\n  }\n\n  usePlugin(plugin: Plugin<T>) {\n    assert(isPlainObject(plugin), 'Invalid plugin configuration.');\n    // Plugin name is required and unique\n    const pluginName = plugin.name;\n    assert(pluginName, 'Plugin must provide a name.');\n\n    if (!this.registerPlugins[pluginName]) {\n      this.registerPlugins[pluginName] = plugin;\n\n      for (const key in this.lifecycle) {\n        const pluginLife = plugin[key as string];\n        if (pluginLife) {\n          // Differentiate different types of hooks and adopt different registration strategies\n          this.lifecycle[key].on(pluginLife);\n        }\n      }\n    } else {\n      warn(`Repeat to register plugin hooks \"${pluginName}\".`);\n    }\n  }\n\n  removePlugin(pluginName: string) {\n    assert(pluginName, 'Must provide a name.');\n    const plugin = this.registerPlugins[pluginName];\n    assert(plugin, `plugin \"${pluginName}\" is not registered.`);\n\n    for (const key in plugin) {\n      if (key === 'name') continue;\n      this.lifecycle[key].remove(plugin[key as string]);\n    }\n  }\n\n  inherit<T extends PluginSystem<any>>({ lifecycle, registerPlugins }: T) {\n    for (const hookName in lifecycle) {\n      assert(\n        !this.lifecycle[hookName],\n        `\"${hookName as string}\" hook has conflict and cannot be inherited.`,\n      );\n      (this.lifecycle as any)[hookName] = lifecycle[hookName];\n    }\n\n    for (const pluginName in registerPlugins) {\n      assert(\n        !this.registerPlugins[pluginName],\n        `\"${pluginName}\" plugin has conflict and cannot be inherited.`,\n      );\n      this.usePlugin(registerPlugins[pluginName]);\n    }\n    return this as typeof this & T;\n  }\n}\n", "import { Node, isAbsolute, transformUrl } from '@garfish/utils';\n\n// Match url in css\nconst MATCH_CSS_URL = /url\\(\\s*(['\"])?(.*?)\\1\\s*\\)/g;\nconst MATCH_CHARSET_URL = /@charset\\s+(['\"])(.*?)\\1\\s*;?/g;\nconst MATCH_IMPORT_URL = /@import\\s+(['\"])(.*?)\\1/g;\n\ninterface ScopeData {\n  appName: string;\n  rootElId: string;\n}\n\nexport class StyleManager {\n  public styleCode: string;\n  public url: string | null;\n  public scopeData: ScopeData | null;\n\n  private depsStack = new Set();\n\n  constructor(styleCode: string, url?: string) {\n    this.scopeData = null;\n    this.url = url || null;\n    this.styleCode = styleCode;\n  }\n\n  correctPath(baseUrl?: string) {\n    const { url, styleCode } = this;\n    if (!baseUrl) baseUrl = url as any;\n    if (baseUrl && typeof styleCode === 'string') {\n      // The relative path is converted to an absolute path according to the path of the css file\n      this.styleCode = styleCode\n        .replace(MATCH_CHARSET_URL, '')\n        .replace(MATCH_IMPORT_URL, function (k0, k1, k2) {\n          return k2 ? `@import url(${k1}${k2}${k1})` : k0;\n        })\n        .replace(MATCH_CSS_URL, (k0, k1, k2) => {\n          if (isAbsolute(k2)) return k0;\n          return `url(\"${baseUrl ? transformUrl(baseUrl, k2) : k2}\")`;\n        });\n    }\n  }\n\n  // Provided to plugins to override this method\n  transformCode(code: string) {\n    return code;\n  }\n\n  setDep(node: Node) {\n    this.depsStack.add(node);\n  }\n\n  setScope(data: ScopeData) {\n    this.scopeData = data;\n  }\n\n  isSameOrigin(node: Node) {\n    return this.depsStack.has(node);\n  }\n\n  renderAsStyleElement(extraCode = '') {\n    const node = document.createElement('style');\n    // prettier-ignore\n    const code = extraCode + (\n      this.styleCode\n        ? this.styleCode\n        : '/**empty style**/'\n    );\n    node.setAttribute('type', 'text/css');\n    node.textContent = this.transformCode(code);\n    return node;\n  }\n\n  clone() {\n    // @ts-ignore\n    const cloned = new this.constructor();\n    cloned.url = this.url;\n    cloned.styleCode = this.styleCode;\n    cloned.scopeData = this.scopeData;\n    cloned.depsStack = new Set(this.depsStack);\n    return cloned;\n  }\n}\n", "export class ModuleManager {\n  public moduleCode: string;\n  public url: string | null;\n  public originUrl?: string;\n  public alias: string | null;\n\n  constructor(moduleCode: string, url?: string) {\n    this.alias = null;\n    this.url = url || null;\n    this.moduleCode = moduleCode;\n  }\n\n  setAlias(name: string) {\n    if (name && typeof name === 'string') {\n      this.alias = name;\n    }\n  }\n\n  clone() {\n    // @ts-ignore\n    const cloned = new this.constructor();\n    cloned.url = this.url;\n    cloned.alias = this.alias;\n    cloned.moduleCode = this.moduleCode;\n    return cloned;\n  }\n}\n", "import {\n  Node,\n  Text,\n  DOMApis,\n  deepMerge,\n  transformUrl,\n  templateParse,\n} from '@garfish/utils';\n\ntype Renderer = Record<string, (node: Node) => null | Element | Comment>;\n\nexport class TemplateManager {\n  public url: string | undefined;\n  public DOMApis = new DOMApis();\n  public astTree: Array<Node> = [];\n  private pretreatmentStore: Record<string, Node[]> = {};\n\n  constructor(template: string, url?: string) {\n    // The url is only base url, it may also be a js resource address.\n    this.url = url;\n    if (template) {\n      const [astTree, collectionEls] = templateParse(template, [\n        'meta',\n        'link',\n        'style',\n        'script',\n      ]);\n      this.astTree = astTree;\n      this.pretreatmentStore = collectionEls;\n    }\n  }\n\n  getNodesByTagName<T>(...tags: Array<keyof T>) {\n    let counter = 0;\n    const collection: Record<keyof T, Array<Node>> = {} as any;\n\n    for (const tag of tags as string[]) {\n      if (this.pretreatmentStore[tag]) {\n        counter++;\n        collection[tag] = this.pretreatmentStore[tag];\n      } else {\n        collection[tag] = [];\n      }\n    }\n\n    if (counter !== tags.length) {\n      const traverse = (node: Node | Text) => {\n        if (node.type !== 'element') return;\n        if (\n          tags.indexOf(node.tagName as any) > -1 &&\n          !this.pretreatmentStore[node.tagName]\n        ) {\n          collection[node.tagName].push(node);\n        }\n        for (const child of node.children) traverse(child);\n      };\n      for (const node of this.astTree) traverse(node);\n    }\n    return collection;\n  }\n\n  // Render dom tree\n  createElements(renderer: Renderer, parent: Element) {\n    const elements: Array<Element> = [];\n    const traverse = (node: Node | Text, parentEl?: Element) => {\n      let el: any;\n      if (this.DOMApis.isCommentNode(node)) {\n        // Filter comment node\n      } else if (this.DOMApis.isText(node)) {\n        el = this.DOMApis.createTextNode(node);\n        parentEl && parentEl.appendChild(el);\n      } else if (this.DOMApis.isNode(node)) {\n        const { tagName, children } = node as Node;\n        if (renderer[tagName]) {\n          el = renderer[tagName](node as Node);\n        } else {\n          el = this.DOMApis.createElement(node as Node);\n        }\n        if (parentEl && el) parentEl.appendChild(el);\n\n        if (el) {\n          const { nodeType, _ignoreChildNodes } = el;\n          // Filter \"comment\" and \"document\" node\n          if (!_ignoreChildNodes && nodeType !== 8 && nodeType !== 10) {\n            for (const child of children) {\n              traverse(child, el);\n            }\n          }\n        }\n      }\n      return el;\n    };\n\n    for (const node of this.astTree) {\n      if (this.DOMApis.isNode(node) && node.tagName !== '!doctype') {\n        const el = traverse(node, parent);\n        el && elements.push(el);\n      }\n    }\n    return elements;\n  }\n\n  toResolveUrl(node: Node, type: string, baseUrl?: string) {\n    const src = node.attributes?.find(({ key }) => key === type);\n    if (src && src.value && baseUrl) {\n      src.value = transformUrl(baseUrl, src.value);\n    }\n  }\n\n  ignoreChildNodesCreation(node: Element) {\n    if (node) {\n      (node as any)._ignoreChildNodes = true;\n    }\n    return node;\n  }\n\n  findAllMetaNodes() {\n    return this.getNodesByTagName('meta').meta;\n  }\n\n  findAllLinkNodes() {\n    return this.getNodesByTagName('link').link;\n  }\n\n  findAllJsNodes() {\n    return this.getNodesByTagName('script').script;\n  }\n\n  findAttributeValue(node: Node, type: string) {\n    return node.attributes?.find(({ key }) => key === type)?.value || undefined;\n  }\n\n  cloneNode(node: Node) {\n    return deepMerge(node, {});\n  }\n\n  clone() {\n    // @ts-ignore\n    const cloned = new this.constructor();\n    cloned.url = this.url;\n    cloned.astTree = this.astTree;\n    cloned.pretreatmentStore = this.pretreatmentStore;\n    cloned.DOMApis = new DOMApis(this.DOMApis.document);\n    return cloned;\n  }\n}\n", "import { Node } from '@garfish/utils';\n\nexport class JavaScriptManager {\n  public async: boolean;\n  public mimeType: string;\n  public scriptCode: string;\n  public url?: string;\n\n  // Need to remove duplication, so use \"set\"\n  private depsStack = new Set();\n\n  constructor(scriptCode: string, url?: string) {\n    this.mimeType = '';\n    this.async = false;\n    this.url = url;\n    this.scriptCode = scriptCode;\n  }\n\n  isModule() {\n    return this.mimeType === 'module';\n  }\n\n  isInlineScript() {\n    return Boolean(!this.url);\n  }\n\n  setMimeType(mimeType: string) {\n    this.mimeType = mimeType || '';\n  }\n\n  setAsyncAttribute(val: boolean) {\n    this.async = Boolean(val);\n  }\n\n  setDep(node: Node) {\n    this.depsStack.add(node);\n  }\n\n  isSameOrigin(node: Node) {\n    return this.depsStack.has(node);\n  }\n\n  clone() {\n    // @ts-ignore\n    const cloned = new this.constructor();\n    cloned.url = this.url;\n    cloned.async = this.async;\n    cloned.mimeType = this.mimeType;\n    cloned.scriptCode = this.scriptCode;\n    cloned.depsStack = new Set(this.depsStack);\n    return cloned;\n  }\n}\n", "import { error, parseContentType } from '@garfish/utils';\nimport { Manager, Loader } from './index';\n\nexport function getRequest(customFetch: Loader['hooks']['lifecycle']['fetch']) {\n  return async function request(url: string, config: RequestInit) {\n    let result = await customFetch.emit(url, config || {});\n    if (!result || !(result instanceof Response)) {\n      result = await fetch(url, config || {});\n    }\n\n    // Response codes greater than \"400\" are regarded as errors\n    if (result.status >= 400) {\n      error(`\"${url}\" load failed with status \"${result.status}\"`);\n    }\n    const code = await result.text();\n    const type = result.headers.get('content-type') || '';\n    const size = Number(result.headers.get('content-size'));\n    const mimeType = parseContentType(type || '');\n\n    return {\n      code,\n      result,\n      mimeType,\n      type,\n      size: Number.isNaN(size) ? null : size,\n    };\n  };\n}\n\nexport function copyResult(result) {\n  if (result.resourceManager) {\n    result.resourceManager = (result.resourceManager as Manager).clone();\n  }\n  return result;\n}\n\n// Compatible with old api\nexport function mergeConfig(loader: Loader, url: string) {\n  const extra = loader.requestConfig;\n  const config = typeof extra === 'function' ? extra(url) : extra;\n  return { mode: 'cors', ...config } as RequestInit;\n}\n", "import type { Manager, CacheValue } from './index';\n\nexport const cachedDataSet = new WeakSet();\n\nexport enum FileTypes {\n  js = 'js',\n  css = 'css',\n  module = 'module', // remote module\n  template = 'template',\n}\n\nconst MAX_SIZE = 1024 * 1024 * 50;\nconst DEFAULT_POLL = Symbol('__defaultBufferPoll__');\nconst FILE_TYPES = [\n  FileTypes.js,\n  FileTypes.css,\n  FileTypes.module,\n  FileTypes.template,\n  DEFAULT_POLL,\n];\n\nexport class AppCacheContainer {\n  private maxSize: number;\n  private totalSize = 0;\n  private recorder = {};\n\n  constructor(maxSize = MAX_SIZE) {\n    this.maxSize = maxSize;\n    FILE_TYPES.forEach((key) => {\n      this.recorder[key] = 0;\n      this[key] = new Map<string, CacheValue<Manager>>();\n    });\n  }\n\n  private bufferPool(type: FileTypes | typeof DEFAULT_POLL) {\n    return this[type] as Map<string, CacheValue<Manager>>;\n  }\n\n  has(url: string) {\n    return FILE_TYPES.some((key) => this[key].has(url));\n  }\n\n  get(url: string) {\n    for (const key of FILE_TYPES) {\n      if (this[key].has(url)) {\n        return this[key].get(url);\n      }\n    }\n  }\n\n  set(url: string, data: CacheValue<Manager>, type: FileTypes) {\n    const curSize = cachedDataSet.has(data) ? 0 : data.size;\n    const totalSize = this.totalSize + curSize;\n\n    if (totalSize < this.maxSize) {\n      let bar = type;\n      let bufferPool = this.bufferPool(type);\n      if (!bufferPool) {\n        bar = DEFAULT_POLL as any;\n        bufferPool = this.bufferPool(DEFAULT_POLL);\n      }\n\n      bufferPool.set(url, data);\n      this.totalSize = totalSize;\n      this.recorder[bar] += curSize;\n      return true;\n    }\n    return false;\n  }\n\n  clear(type?: FileTypes) {\n    if (typeof type === 'string') {\n      const cacheBox = this.bufferPool(type);\n      if (cacheBox && cacheBox instanceof Map) {\n        const size = this.recorder[type];\n        this.totalSize -= size;\n        this.recorder[type] = 0;\n        cacheBox.clear();\n      }\n    } else {\n      FILE_TYPES.forEach((key) => {\n        this[key].clear();\n        this.recorder[key] = 0;\n      });\n      this.totalSize = 0;\n    }\n  }\n}\n", "import {\n  SyncHook,\n  SyncWaterfallHook,\n  PluginSystem,\n  AsyncHook,\n} from '@garfish/hooks';\nimport {\n  error,\n  __LOADER_FLAG__,\n  isJsType,\n  isCssType,\n  isHtmlType,\n  parseContentType,\n} from '@garfish/utils';\nimport { StyleManager } from './managers/style';\nimport { ModuleManager } from './managers/module';\nimport { TemplateManager } from './managers/template';\nimport { JavaScriptManager } from './managers/javascript';\nimport { getRequest, copyResult, mergeConfig } from './utils';\nimport { FileTypes, cachedDataSet, AppCacheContainer } from './appCache';\n\n// Export types and manager constructor\nexport * from './managers/style';\nexport * from './managers/module';\nexport * from './managers/template';\nexport * from './managers/javascript';\n\nexport type Manager =\n  | StyleManager\n  | ModuleManager\n  | TemplateManager\n  | JavaScriptManager;\n\nexport interface LoaderOptions {\n  /**\n   * The unit is byte\n   */\n  maxSize?: number;\n}\n\nexport interface CacheValue<T extends Manager> {\n  url: string;\n  code: string;\n  size: number;\n  scope: string;\n  fileType: FileTypes | '';\n  resourceManager: T | null;\n}\n\nexport interface LoadedHookArgs<T extends Manager> {\n  result: Response;\n  value: CacheValue<T>;\n}\n\nexport enum CrossOriginCredentials {\n  anonymous = 'same-origin',\n  'use-credentials' = 'include',\n}\n\ntype LifeCycle = Loader['hooks']['lifecycle'];\n\nexport type LoaderLifecycle = Partial<{\n  [k in keyof LifeCycle]: Parameters<LifeCycle[k]['on']>[0];\n}>;\n\nexport interface LoaderPlugin extends LoaderLifecycle {\n  name: string;\n  version?: string;\n}\n\nexport class Loader {\n  public personalId = __LOADER_FLAG__;\n  public StyleManager = StyleManager;\n  public ModuleManager = ModuleManager;\n  public TemplateManager = TemplateManager;\n  public JavaScriptManager = JavaScriptManager;\n  /** @deprecated */\n  public requestConfig: RequestInit | ((url: string) => RequestInit);\n\n  public hooks = new PluginSystem({\n    error: new SyncHook<[Error, { scope: string }], void>(),\n    loaded: new SyncWaterfallHook<LoadedHookArgs<Manager>>('loaded'),\n    clear: new SyncWaterfallHook<{\n      scope: string;\n      fileType?: FileTypes;\n    }>('clear'),\n    beforeLoad: new SyncWaterfallHook<{\n      url: string;\n      scope: string;\n      requestConfig: ResponseInit;\n    }>('beforeLoad'),\n    fetch: new AsyncHook<[string, RequestInit], Response | void | false>(\n      'fetch',\n    ),\n  });\n\n  private options: LoaderOptions;\n  private loadingList: Record<string, null | Promise<CacheValue<any>>>;\n  private cacheStore: { [name: string]: AppCacheContainer };\n\n  constructor(options?: LoaderOptions) {\n    this.options = options || {};\n    this.loadingList = Object.create(null);\n    this.cacheStore = Object.create(null);\n  }\n\n  setOptions(options: Partial<LoaderOptions>) {\n    this.options = { ...this.options, ...options };\n  }\n\n  clear(scope: string, fileType?: FileTypes) {\n    const appCacheContainer = this.cacheStore[scope];\n    if (appCacheContainer) {\n      appCacheContainer.clear(fileType);\n      this.hooks.lifecycle.clear.emit({ scope, fileType });\n    }\n  }\n\n  clearAll(fileType?: FileTypes) {\n    for (const scope in this.cacheStore) {\n      this.clear(scope, fileType);\n    }\n  }\n\n  usePlugin(options: LoaderPlugin) {\n    this.hooks.usePlugin(options);\n  }\n\n  setLifeCycle(lifeCycle: Partial<LoaderLifecycle>) {\n    this.hooks.usePlugin({\n      name: 'loader-lifecycle',\n      ...lifeCycle,\n    });\n  }\n\n  loadModule(url: string) {\n    return this.load<ModuleManager>({\n      scope: 'modules',\n      url,\n      isRemoteModule: true,\n    });\n  }\n\n  // Unable to know the final data type, so through \"generics\"\n  async load<T extends Manager>({\n    scope,\n    url,\n    isRemoteModule = false,\n    crossOrigin = 'anonymous',\n    defaultContentType = '',\n  }: {\n    scope: string;\n    url: string;\n    isRemoteModule?: boolean;\n    crossOrigin?: NonNullable<HTMLScriptElement['crossOrigin']>;\n    defaultContentType?: string;\n  }): Promise<LoadedHookArgs<T>['value']> {\n    const { options, loadingList, cacheStore } = this;\n\n    const res = loadingList[url];\n    if (res) {\n      return res;\n    }\n\n    let appCacheContainer = cacheStore[scope];\n    if (!appCacheContainer) {\n      appCacheContainer = cacheStore[scope] = new AppCacheContainer(\n        options.maxSize,\n      );\n    }\n\n    if (appCacheContainer.has(url)) {\n      return Promise.resolve(copyResult(appCacheContainer.get(url)));\n    } else {\n      // If other containers have cache\n      for (const key in cacheStore) {\n        const container = cacheStore[key];\n        if (container !== appCacheContainer) {\n          if (container.has(url)) {\n            const result = container.get(url);\n            cachedDataSet.add(result);\n            appCacheContainer.set(url, result, result.fileType);\n            return Promise.resolve(copyResult(result));\n          }\n        }\n      }\n    }\n\n    const requestConfig = mergeConfig(this, url);\n    // Tells browsers to include credentials in both same- and cross-origin requests, and always use any credentials sent back in responses.\n    requestConfig.credentials = CrossOriginCredentials[crossOrigin];\n    const resOpts = this.hooks.lifecycle.beforeLoad.emit({\n      url,\n      scope,\n      requestConfig,\n    });\n\n    const request = getRequest(this.hooks.lifecycle.fetch);\n    const loadRes = request(resOpts.url, resOpts.requestConfig)\n      .then(({ code, size, result, type }) => {\n        let managerCtor,\n          fileType: FileTypes | '' = '';\n\n        if (isRemoteModule) {\n          fileType = FileTypes.module;\n          managerCtor = ModuleManager;\n        } else if (\n          isHtmlType({ type, src: result.url }) ||\n          isHtmlType({\n            type: defaultContentType,\n          })\n        ) {\n          fileType = FileTypes.template;\n          managerCtor = TemplateManager;\n        } else if (\n          isJsType({ type: defaultContentType }) ||\n          isJsType({ type, src: result.url })\n        ) {\n          fileType = FileTypes.js;\n          managerCtor = JavaScriptManager;\n        } else if (\n          isCssType({ src: result.url, type }) ||\n          isCssType({\n            type: defaultContentType,\n          })\n        ) {\n          fileType = FileTypes.css;\n          managerCtor = StyleManager;\n        }\n\n        // Use result.url, resources may be redirected\n        const resourceManager: Manager | null = managerCtor\n          ? new managerCtor(code, result.url)\n          : null;\n\n        // The results will be cached this time.\n        // So, you can transform the request result.\n        const data = this.hooks.lifecycle.loaded.emit({\n          result,\n          value: {\n            url,\n            scope,\n            resourceManager,\n            fileType: fileType || '',\n            // For performance reasons, take an approximation\n            size: size || code.length,\n            code: resourceManager ? '' : code,\n          },\n        });\n\n        fileType && appCacheContainer.set(url, data.value, fileType);\n        return copyResult(data.value as any);\n      })\n      .catch((e) => {\n        (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && error(e);\n        this.hooks.lifecycle.error.emit(e, { scope });\n        throw e; // Let the upper application catch the error\n      })\n      .finally(() => {\n        loadingList[url] = null;\n      });\n\n    loadingList[url] = loadRes;\n    return loadRes;\n  }\n}\n", "import { Loader } from '@garfish/loader';\nimport { EventEmitter2 } from 'eventemitter2';\nimport { warn, assert, isPlainObject, __GARFISH_FLAG__ } from '@garfish/utils';\nimport {\n  SyncHook,\n  AsyncHook,\n  SyncWaterfallHook,\n  AsyncWaterfallHook,\n  PluginSystem,\n} from '@garfish/hooks';\nimport {\n  deepMergeConfig,\n  generateAppOptions,\n  createDefaultOptions,\n} from './config';\nimport { App } from './module/app';\nimport { interfaces } from './interface';\nimport { globalLifecycle } from './lifecycle';\nimport { processAppResources } from './module/resource';\nimport { GarfishHMRPlugin } from './plugins/fixHMR';\nimport { GarfishOptionsLife } from './plugins/lifecycle';\nimport { GarfishPreloadPlugin } from './plugins/preload';\nimport { GarfishPerformance } from './plugins/performance';\nimport { GarfishLogger } from './plugins/logger';\n\nconst DEFAULT_PROPS = new WeakMap();\nconst HOOKS_API = {\n  SyncHook,\n  AsyncHook,\n  SyncWaterfallHook,\n  AsyncWaterfallHook,\n};\n\nexport class Garfish extends EventEmitter2 {\n  public running = false;\n  public version = '1.12.0';\n  public flag = __GARFISH_FLAG__; // A unique identifier\n  public loader = new Loader();\n  public hooks = globalLifecycle();\n  public channel = new EventEmitter2();\n  public options = createDefaultOptions();\n  public externals: Record<string, any> = {};\n  public activeApps: Array<interfaces.App> = [];\n  public plugins: interfaces.Plugins = {} as any;\n  public cacheApps: Record<string, interfaces.App> = {};\n  public appInfos: Record<string, interfaces.AppInfo> = {};\n\n  private loading: Record<string, Promise<any>> = {};\n\n  get props(): Record<string, any> {\n    return (this.options && this.options.props) || DEFAULT_PROPS.get(this);\n  }\n\n  constructor(options: interfaces.Options) {\n    super();\n    this.setOptions(options);\n    DEFAULT_PROPS.set(this, {});\n    this.options.plugins?.forEach((plugin) => this.usePlugin(plugin));\n    this.usePlugin(GarfishHMRPlugin());\n    this.usePlugin(GarfishPerformance());\n    this.usePlugin(GarfishPreloadPlugin());\n    this.usePlugin(GarfishLogger());\n  }\n\n  setOptions(options: Partial<interfaces.Options>) {\n    assert(!this.running, 'Garfish is running, can`t set options');\n    if (isPlainObject(options)) {\n      this.options = deepMergeConfig(this.options, options);\n    }\n    return this;\n  }\n\n  createPluginSystem<T extends (api: typeof HOOKS_API) => any>(callback: T) {\n    const hooks = callback(HOOKS_API);\n    return new PluginSystem<ReturnType<T>>(hooks);\n  }\n\n  usePlugin(\n    plugin: (context: Garfish) => interfaces.Plugin,\n    ...args: Array<any>\n  ) {\n    assert(!this.running, 'Cannot register plugin after Garfish is started.');\n    assert(typeof plugin === 'function', 'Plugin must be a function.');\n    args.unshift(this);\n    const pluginConfig = plugin.apply(null, args) as interfaces.Plugin;\n    assert(pluginConfig.name, 'The plugin must have a name.');\n\n    if (!this.plugins[pluginConfig.name]) {\n      this.plugins[pluginConfig.name] = pluginConfig;\n      // Register hooks, Compatible with the old api\n      this.hooks.usePlugin(pluginConfig);\n    } else if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n      warn('Please do not register the plugin repeatedly.');\n    }\n    return this;\n  }\n\n  run(options: interfaces.Options = {}) {\n    if (this.running) {\n      if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n        warn('Garfish is already running now, Cannot run Garfish repeatedly.');\n      }\n      return this;\n    }\n\n    this.setOptions(options);\n    // Register plugins\n    options.plugins?.forEach((plugin) => this.usePlugin(plugin));\n    // Put the lifecycle plugin at the end, so that you can get the changes of other plugins\n    this.usePlugin(GarfishOptionsLife(this.options, 'global-lifecycle'));\n\n    // Emit hooks and register apps\n    this.hooks.lifecycle.beforeBootstrap.emit(this.options);\n    this.registerApp(this.options.apps || []);\n    this.running = true;\n    this.hooks.lifecycle.bootstrap.emit(this.options);\n    return this;\n  }\n\n  registerApp(list: interfaces.AppInfo | Array<interfaces.AppInfo>) {\n    const currentAdds = {};\n    this.hooks.lifecycle.beforeRegisterApp.emit(list);\n    if (!Array.isArray(list)) list = [list];\n\n    for (const appInfo of list) {\n      assert(appInfo.name, 'Miss app.name.');\n      if (!this.appInfos[appInfo.name]) {\n        assert(\n          appInfo.entry,\n          `${appInfo.name} application entry is not url: ${appInfo.entry}`,\n        );\n        currentAdds[appInfo.name] = appInfo;\n        this.appInfos[appInfo.name] = appInfo;\n      } else if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n        warn(`The \"${appInfo.name}\" app is already registered.`);\n      }\n    }\n    this.hooks.lifecycle.registerApp.emit(currentAdds);\n    return this;\n  }\n\n  setExternal(nameOrExtObj: string | Record<string, any>, value?: any) {\n    assert(nameOrExtObj, 'Invalid parameter.');\n    if (typeof nameOrExtObj === 'object') {\n      for (const key in nameOrExtObj) {\n        if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n          this.externals[key] &&\n            warn(`The \"${key}\" will be overwritten in external.`);\n        }\n        this.externals[key] = nameOrExtObj[key];\n      }\n    } else {\n      this.externals[nameOrExtObj] = value;\n    }\n    return this;\n  }\n\n  loadApp(\n    appName: string,\n    options?: Partial<Omit<interfaces.AppInfo, 'name'>>,\n  ): Promise<interfaces.App | null> {\n    assert(appName, 'Miss appName.');\n\n    let appInfo = generateAppOptions(appName, this, options);\n\n    const asyncLoadProcess = async () => {\n      // Return not undefined type data directly to end loading\n      const stop = await this.hooks.lifecycle.beforeLoad.emit(appInfo);\n\n      if (stop === false) {\n        warn(`Load ${appName} application is terminated by beforeLoad.`);\n        return null;\n      }\n\n      //merge configs again after beforeLoad for the reason of app may be re-registered during beforeLoad resulting in an incorrect information\n      appInfo = generateAppOptions(appName, this, options);\n\n      assert(\n        appInfo.entry,\n        `Can't load unexpected child app \"${appName}\", ` +\n          'Please provide the entry parameters or registered in advance of the app.',\n      );\n\n      // Existing cache caching logic\n      let appInstance: interfaces.App | null = null;\n      const cacheApp = this.cacheApps[appName];\n\n      if (appInfo.cache && cacheApp) {\n        appInstance = cacheApp;\n      } else {\n        try {\n          const [manager, resources, isHtmlMode] = await processAppResources(\n            this.loader,\n            appInfo,\n          );\n\n          appInstance = new App(\n            this,\n            appInfo,\n            manager,\n            resources,\n            isHtmlMode,\n            appInfo.customLoader,\n          );\n\n          // The registration hook will automatically remove the duplication\n          for (const key in this.plugins) {\n            appInstance.hooks.usePlugin(this.plugins[key]);\n          }\n          if (appInfo.cache) {\n            this.cacheApps[appName] = appInstance;\n          }\n        } catch (e) {\n          (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && warn(e);\n          this.hooks.lifecycle.errorLoadApp.emit(e, appInfo);\n        }\n      }\n\n      await this.hooks.lifecycle.afterLoad.emit(appInfo, appInstance);\n      return appInstance;\n    };\n\n    if (!this.loading[appName]) {\n      this.loading[appName] = asyncLoadProcess().finally(() => {\n        delete this.loading[appName];\n      });\n    }\n    return this.loading[appName];\n  }\n}\n", "import {\n  error,\n  isObject,\n  deepMerge,\n  filterUndefinedVal,\n  assert,\n} from '@garfish/utils';\nimport { AppInfo } from './module/app';\nimport { interfaces } from './interface';\n\n// filter unless global config\nconst filterAppConfigKeys: Record<\n  Exclude<keyof interfaces.Options, keyof AppInfo>,\n  true\n> = {\n  beforeBootstrap: true,\n  bootstrap: true,\n  beforeRegisterApp: true,\n  registerApp: true,\n  beforeLoad: true,\n  afterLoad: true,\n  errorLoadApp: true,\n  appID: true,\n  apps: true,\n  disableStatistics: true,\n  disablePreloadApp: true,\n  plugins: true,\n  autoRefreshApp: true,\n  onNotMatchRouter: true,\n  loader: true,\n};\n\n// `props` may be responsive data\nexport const deepMergeConfig = <\n  T extends { props?: Record<string, any> },\n  U extends { props?: Record<string, any> },\n>(\n  globalConfig: T,\n  localConfig: U,\n) => {\n  const props = {\n    ...(globalConfig.props || {}),\n    ...(localConfig.props || {}),\n  };\n\n  const result = deepMerge(\n    filterUndefinedVal(globalConfig),\n    filterUndefinedVal(localConfig),\n  );\n  result.props = props;\n  return result;\n};\n\nexport const getAppConfig = (\n  globalConfig: interfaces.Options,\n  localConfig: AppInfo,\n): AppInfo => {\n  const mergeResult = deepMergeConfig(globalConfig, localConfig);\n\n  Object.keys(mergeResult).forEach((key: keyof interfaces.Config) => {\n    if (filterAppConfigKeys[key]) {\n      delete mergeResult[key];\n    }\n  });\n\n  return mergeResult;\n};\n\nexport const generateAppOptions = (\n  appName: string,\n  garfish: interfaces.Garfish,\n  options?: Partial<Omit<AppInfo, 'name'>>,\n): AppInfo => {\n  let appInfo: AppInfo = garfish.appInfos[appName] || { name: appName };\n\n  // Merge register appInfo config and loadApp config\n  appInfo = getAppConfig(garfish.options, {\n    ...appInfo,\n    ...options,\n    props: {\n      ...(appInfo.props || {}),\n      ...(options?.props || {}),\n    },\n  });\n\n  return appInfo;\n};\n\n// Each main application needs to generate a new configuration\nexport const createDefaultOptions = () => {\n  const config: interfaces.Options = {\n    // global config\n    appID: '',\n    apps: [],\n    autoRefreshApp: true,\n    disableStatistics: false,\n    disablePreloadApp: false,\n    // app config\n    basename: '/',\n    props: {},\n    // Use an empty div by default\n    domGetter: () => document.createElement('div'),\n    sandbox: {\n      snapshot: false,\n      fixBaseUrl: false,\n      disableWith: false,\n      strictIsolation: false,\n    },\n    // global hooks\n    beforeLoad: () => {},\n    afterLoad: () => {},\n    errorLoadApp: (e) => error(e),\n    // Router\n    onNotMatchRouter: () => {},\n    // app hooks\n    // Code eval hooks\n    beforeEval: () => {},\n    afterEval: () => {},\n    // App mount hooks\n    beforeMount: () => {},\n    afterMount: () => {},\n    beforeUnmount: () => {},\n    afterUnmount: () => {},\n    // Error hooks\n    errorMountApp: (e) => error(e),\n    errorUnmountApp: (e) => error(e),\n    customLoader: undefined, // deprecated\n  };\n\n  return config;\n};\n", "import { SyncHook, AsyncHook, PluginSystem } from '@garfish/hooks';\nimport { interfaces } from './interface';\n\n// prettier-ignore\nexport function globalLifecycle() {\n  return new PluginSystem({\n    beforeBootstrap: new SyncHook<[interfaces.Options], void>(),\n    bootstrap: new SyncHook<[interfaces.Options], void>(),\n    beforeRegisterApp: new SyncHook<[interfaces.AppInfo | Array<interfaces.AppInfo>], void>(),\n    registerApp: new SyncHook<[Record<string, interfaces.AppInfo>], void>(),\n    beforeLoad: new AsyncHook<[interfaces.AppInfo]>(),\n    afterLoad: new AsyncHook<[interfaces.AppInfo, interfaces.App | null]>(),\n    errorLoadApp: new SyncHook<[Error, interfaces.AppInfo], void>(),\n  });\n}\n\n// prettier-ignore\nexport function appLifecycle() {\n  return new PluginSystem({\n    beforeEval: new SyncHook<[\n        interfaces.AppInfo,\n        string,\n        Record<string, any>?,\n        string?,\n        { async?: boolean; noEntry?: boolean }?,\n      ],\n      void\n    >(),\n    afterEval: new SyncHook<\n      [\n        interfaces.AppInfo,\n        string,\n        Record<string, any>?,\n        string?,\n        { async?: boolean; noEntry?: boolean }?,\n      ],\n      void\n    >(),\n    beforeMount: new SyncHook<[interfaces.AppInfo, interfaces.App, boolean], void>(),\n    afterMount: new SyncHook<[interfaces.AppInfo, interfaces.App, boolean], void>(),\n    errorMountApp: new SyncHook<[Error, interfaces.AppInfo], void>(),\n    beforeUnmount: new SyncHook<[interfaces.AppInfo, interfaces.App, boolean], void>(),\n    afterUnmount: new SyncHook<[interfaces.AppInfo, interfaces.App, boolean], void>(),\n    errorUnmountApp: new SyncHook<[Error, interfaces.AppInfo], void>(),\n    errorExecCode: new SyncHook<\n      [\n        Error,\n        interfaces.AppInfo,\n        string,\n        Record<string, any>?,\n        string?,\n        { async?: boolean; noEntry?: boolean }?,\n      ],\n      void\n    >(),\n  });\n}\n", "/* es-module-lexer 0.10.5 */\nconst A=1===new Uint8Array(new Uint16Array([1]).buffer)[0];export function parse(E,g=\"@\"){if(!C)return init.then((()=>parse(E)));const I=E.length+1,o=(C.__heap_base.value||C.__heap_base)+4*I-C.memory.buffer.byteLength;o>0&&C.memory.grow(Math.ceil(o/65536));const k=C.sa(I-1);if((A?B:Q)(E,new Uint16Array(C.memory.buffer,k,I)),!C.parse())throw Object.assign(new Error(`Parse error ${g}:${E.slice(0,C.e()).split(\"\\n\").length}:${C.e()-E.lastIndexOf(\"\\n\",C.e()-1)}`),{idx:C.e()});const J=[],i=[];for(;C.ri();){const A=C.is(),Q=C.ie(),B=C.ai(),g=C.id(),I=C.ss(),o=C.se();let k;C.ip()&&(k=w(E.slice(-1===g?A-1:A,-1===g?Q+1:Q))),J.push({n:k,s:A,e:Q,ss:I,se:o,d:g,a:B})}for(;C.re();){const A=E.slice(C.es(),C.ee()),Q=A[0];i.push('\"'===Q||\"'\"===Q?w(A):A)}function w(A){try{return(0,eval)(A)}catch(A){}}return[J,i,!!C.f()]}function Q(A,Q){const B=A.length;let C=0;for(;C<B;){const B=A.charCodeAt(C);Q[C++]=(255&B)<<8|B>>>8}}function B(A,Q){const B=A.length;let C=0;for(;C<B;)Q[C]=A.charCodeAt(C++)}let C;export const init=WebAssembly.compile((E=\"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ajYCiApBARAhIQMLQQAoAogKIQICQCADQf0ARg0AIAIgAUYNBSACIQEgAkEAKAKMCk0NAQwFCwtBACACQQJqNgKICgwBC0EAIANBAmo2AogKQQEQIRpBACgCiAoiAiACECYaC0EBECEhAgtBACgCiAohAwJAIAJB5gBHDQAgA0ECakGeCEEGECgNAEEAIANBCGo2AogKIABBARAhECIPC0EAIANBfmo2AogKDAMLEB0PCwJAIAMpAAJC7ICEg7COwDlSDQAgAy8BChAeRQ0AQQAgA0EKajYCiApBARAhIQJBACgCiAohAyACECQaIANBACgCiAoQAkEAQQAoAogKQX5qNgKICg8LQQAgA0EEaiIDNgKICgtBACADQQRqIgI2AogKQQBBADoA5AkDQEEAIAJBAmo2AogKQQEQISEDQQAoAogKIQICQCADECRBIHJB+wBHDQBBAEEAKAKICkF+ajYCiAoPC0EAKAKICiIDIAJGDQEgAiADEAICQEEBECEiAkEsRg0AAkAgAkE9Rw0AQQBBACgCiApBfmo2AogKDwtBAEEAKAKICkF+ajYCiAoPC0EAKAKICiECDAALCw8LQQAgA0EKajYCiApBARAhGkEAKAKICiEDC0EAIANBEGo2AogKAkBBARAhIgJBKkcNAEEAQQAoAogKQQJqNgKICkEBECEhAgtBACgCiAohAyACECQaIANBACgCiAoQAkEAQQAoAogKQX5qNgKICg8LIAMgA0EOahACC6sGAQR/QQBBACgCiAoiAEEMaiIBNgKICgJAAkACQAJAAkACQAJAAkACQAJAQQEQISICQVlqDggCCAECAQEBBwALIAJBIkYNASACQfsARg0CC0EAKAKICiABRg0HC0EALwHqCQ0BQQAoAogKIQJBACgCjAohAwNAIAIgA08NBAJAAkAgAi8BACIBQSdGDQAgAUEiRw0BCyAAIAEQIg8LQQAgAkECaiICNgKICgwACwtBACgCiAohAkEALwHqCQ0BAkADQAJAAkACQCACQQAoAowKTw0AQQEQISICQSJGDQEgAkEnRg0BIAJB/QBHDQJBAEEAKAKICkECajYCiAoLQQEQIRpBACgCiAoiAikAAELmgMiD8I3ANlINBkEAIAJBCGo2AogKQQEQISICQSJGDQMgAkEnRg0DDAYLIAIQFwtBAEEAKAKICkECaiICNgKICgwACwsgACACECIMBQtBAEEAKAKICkF+ajYCiAoPC0EAIAJBfmo2AogKDwsQHQ8LQQBBACgCiApBAmo2AogKQQEQIUHtAEcNAUEAKAKICiICQQJqQZYIQQYQKA0BQQAoAvAJLwEAQS5GDQEgACAAIAJBCGpBACgCqAkQAQ8LQQAoAvwJQQAvAeoJIgJBAnRqQQAoAogKNgIAQQAgAkEBajsB6glBACgC8AkvAQBBLkYNAEEAQQAoAogKIgFBAmo2AogKQQEQISECIABBACgCiApBACABEAFBAEEALwHoCSIBQQFqOwHoCUEAKAKACiABQQJ0akEAKALECTYCAAJAIAJBIkYNACACQSdGDQBBAEEAKAKICkF+ajYCiAoPCyACEBdBAEEAKAKICkECaiICNgKICgJAAkACQEEBECFBV2oOBAECAgACC0EAQQAoAogKQQJqNgKICkEBECEaQQAoAsQJIgEgAjYCBCABQQE6ABggAUEAKAKICiICNgIQQQAgAkF+ajYCiAoPC0EAKALECSIBIAI2AgQgAUEBOgAYQQBBAC8B6glBf2o7AeoJIAFBACgCiApBAmo2AgxBAEEALwHoCUF/ajsB6AkPC0EAQQAoAogKQX5qNgKICg8LC0cBA39BACgCiApBAmohAEEAKAKMCiEBAkADQCAAIgJBfmogAU8NASACQQJqIQAgAi8BAEF2ag4EAQAAAQALC0EAIAI2AogKC5gBAQN/QQBBACgCiAoiAUECajYCiAogAUEGaiEBQQAoAowKIQIDQAJAAkACQCABQXxqIAJPDQAgAUF+ai8BACEDAkACQCAADQAgA0EqRg0BIANBdmoOBAIEBAIECyADQSpHDQMLIAEvAQBBL0cNAkEAIAFBfmo2AogKDAELIAFBfmohAQtBACABNgKICg8LIAFBAmohAQwACwu/AQEEf0EAKAKICiEAQQAoAowKIQECQAJAA0AgACICQQJqIQAgAiABTw0BAkACQCAALwEAIgNBpH9qDgUBAgICBAALIANBJEcNASACLwEEQfsARw0BQQBBAC8B5gkiAEEBajsB5glBACgC+AkgAEEBdGpBAC8B7Ak7AQBBACACQQRqNgKICkEAQQAvAeoJQQFqIgA7AewJQQAgADsB6gkPCyACQQRqIQAMAAsLQQAgADYCiAoQHQ8LQQAgADYCiAoL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\",\"undefined\"!=typeof Buffer?Buffer.from(E,\"base64\"):Uint8Array.from(atob(E),(A=>A.charCodeAt(0))))).then(WebAssembly.instantiate).then((({exports:A})=>{C=A}));var E;", "import { ImportSpecifier, init, parse } from 'es-module-lexer';\nimport type { JavaScriptManager } from '@garfish/loader';\nimport { Lock } from '@garfish/utils';\nimport {\n  isAbsolute,\n  transformUrl,\n  haveSourcemap,\n  createSourcemap,\n} from '@garfish/utils';\nimport { interfaces } from '../interface';\nimport type { App } from './app';\n\nconst __GARFISH_ESM_ENV__ = '__GARFISH_ESM_ENV__';\n\nexport const getModuleImportProcessor = (code: string) => {\n  // split code into two segments\n  // avoid 'pause before potential out of memory crash' in chrome\n  // for super large string, it can improve performance as well\n  let finalCode = '';\n  let resetCode = code;\n  let prevCodeIndex = 0;\n  const rawImport = 'import';\n  const wrapImport = '_import_';\n  return (importAnalysis: ImportSpecifier, newModuleName = '') => {\n    const { d: importType, n: moduleName, s, e, ss, se } = importAnalysis;\n    const isDynamicImport = importType > -1;\n    if (isDynamicImport) {\n      // dynamic import\n      // replace 'import' keyword\n      const codeStart = ss - prevCodeIndex;\n      const codeEnd = se - prevCodeIndex;\n      const dynamicImportStatement = resetCode.slice(codeStart, codeEnd);\n      // append the code before import statement\n      finalCode += resetCode.slice(0, codeStart);\n      // append import statement\n      finalCode += dynamicImportStatement.replace(rawImport, wrapImport);\n      resetCode = resetCode.slice(codeEnd);\n      prevCodeIndex = se;\n    } else if (moduleName) {\n      // static import\n      // replace module name\n      const codeStart = s - prevCodeIndex;\n      const codeEnd = e - prevCodeIndex;\n      // append the code before import name\n      finalCode += resetCode.slice(0, codeStart);\n      // append new import name\n      finalCode += newModuleName;\n      resetCode = resetCode.slice(codeEnd);\n      prevCodeIndex = e;\n    }\n    return [finalCode, resetCode];\n  };\n};\n\nexport const genShellExecutionCode = (\n  id: string | number,\n  sourceModuleName: string,\n  shellUrl: string,\n) =>\n  `;import*as m$$_${id} from'${sourceModuleName}';import{u$$_ as u$$_${id}}from'${shellUrl}';u$$_${id}(m$$_${id})`;\n\ninterface ModuleCacheItem {\n  blobUrl?: string;\n  shellUrl?: string;\n  shellExecuted?: boolean;\n  analysis?: ReturnType<typeof parse>;\n  source: string;\n}\n\nexport class ESModuleLoader {\n  private app: App;\n  private globalVarKey: string;\n  private moduleCache: Record<string, ModuleCacheItem> = {};\n  private lock = new Lock();\n\n  constructor(app: App) {\n    this.app = app;\n    this.globalVarKey = `${__GARFISH_ESM_ENV__}_${this.app.appId}`;\n  }\n\n  private execModuleCode(blobUrl: string) {\n    const result = (0, eval)(`import('${blobUrl}')`);\n    this.lock.release();\n    return result;\n  }\n\n  private createBlobUrl(code: string) {\n    return URL.createObjectURL(new Blob([code], { type: 'text/javascript' }));\n  }\n\n  private setBlobUrl(saveId: string, blobUrl: string) {\n    this.moduleCache[saveId].blobUrl = blobUrl;\n  }\n\n  private async fetchModuleResource(\n    lockId: number,\n    envVarStr: string,\n    noEntryEnvVarStr: string,\n    saveUrl: string,\n    requestUrl: string,\n  ) {\n    const { resourceManager } =\n      await this.app.context.loader.load<JavaScriptManager>({\n        scope: this.app.name,\n        url: requestUrl,\n      });\n    // Maybe other resource\n    if (resourceManager) {\n      let sourcemap = '';\n      // eslint-disable-next-line prefer-const\n      let { url, scriptCode } = resourceManager;\n\n      if (!haveSourcemap(scriptCode)) {\n        sourcemap = await createSourcemap(scriptCode, requestUrl);\n      }\n      scriptCode = await this.analysisModule(\n        lockId,\n        scriptCode,\n        envVarStr,\n        noEntryEnvVarStr,\n        saveUrl,\n        url,\n      );\n      const blobUrl = this.createBlobUrl(\n        `import.meta.url='${url}';${this.app.isNoEntryScript(url) ? noEntryEnvVarStr : envVarStr}${scriptCode}\\n${sourcemap}`,\n      );\n      this.setBlobUrl(saveUrl, blobUrl);\n    }\n  }\n\n  private getUrl(referUrl, targetUrl) {\n    return !isAbsolute(targetUrl) && referUrl\n      ? transformUrl(referUrl, targetUrl)\n      : targetUrl;\n  }\n\n  private preloadStaticModuleAsync(\n    analysis: ReturnType<typeof parse>,\n    realUrl?: string | null,\n  ) {\n    const [imports] = analysis;\n\n    for (let i = 0, length = imports.length; i < length; i++) {\n      const importAnalysis = imports[i];\n      const { d: importType, n: moduleName } = importAnalysis;\n      const isDynamicImport = importType > -1;\n      if (moduleName && !isDynamicImport) {\n        // async preload all static import module of current file\n        this.app.context.loader.load<JavaScriptManager>({\n          scope: this.app.name,\n          url: this.getUrl(realUrl, moduleName),\n        });\n      }\n    }\n  }\n\n  private async analysisModule(\n    lockId: number,\n    code: string,\n    envVarStr: string,\n    noEntryEnvVarStr: string,\n    baseUrl?: string,\n    realUrl?: string | null,\n  ) {\n    // wait for the other task\n    await this.lock.wait(lockId);\n\n    // this is necessary for the Web Assembly boot\n    await init;\n\n    const analysis = parse(code, realUrl || '');\n    const thisModule: ModuleCacheItem = {\n      analysis,\n      source: code,\n    };\n\n    if (baseUrl) {\n      this.moduleCache[baseUrl] = thisModule;\n    }\n\n    let result = ['', code];\n    let shellExecutionCode = '';\n    const dynamicImport = `var _import_=(url)=>window.${this.globalVarKey}.import(url,'${baseUrl}','${realUrl}');`;\n    const processImportModule = getModuleImportProcessor(code);\n    const [imports] = analysis;\n\n    this.preloadStaticModuleAsync(analysis, realUrl);\n\n    for (let i = 0, length = imports.length; i < length; i++) {\n      const importAnalysis = imports[i];\n      const { d: importType, n: moduleName } = importAnalysis;\n      const isDynamicImport = importType > -1;\n      let saveUrl = moduleName || '';\n      let newModuleName = '';\n      if (moduleName && !isDynamicImport) {\n        // static import\n        const requestUrl = this.getUrl(realUrl, moduleName);\n        saveUrl = this.getUrl(baseUrl, moduleName);\n\n        let currentModule = this.moduleCache[saveUrl];\n        if (currentModule && !currentModule.blobUrl) {\n          // circular dependency\n          if (!currentModule.shellUrl) {\n            const [currentModuleImports, currentModuleExports] =\n              currentModule.analysis!;\n            // case 'export * from \"xxx\"'\n            // we can find this in the import statement\n            const wildcardExports = currentModuleImports.filter(\n              (importItem) => {\n                const statement = currentModule.source.substring(\n                  importItem.ss,\n                  importItem.se,\n                );\n                return /^export\\s*\\*\\s*from\\s*/.test(statement);\n              },\n            );\n            const wildcardExportStatements: string[] = [];\n            for (let j = 0, l = wildcardExports.length; j < l; j++) {\n              // find wildcard exports\n              const wildcardExport = wildcardExports[j];\n              const wildcardExportUrl = wildcardExport.n || '';\n              const wildcardExportSaveUrl = this.getUrl(\n                baseUrl,\n                wildcardExportUrl,\n              );\n              // fetch and analyze wildcard export module\n              await this.fetchModuleResource(\n                lockId,\n                envVarStr,\n                noEntryEnvVarStr,\n                wildcardExportSaveUrl,\n                this.getUrl(realUrl, wildcardExportUrl),\n              );\n              const wildcardModule = this.moduleCache[wildcardExportSaveUrl];\n              if (wildcardModule?.blobUrl) {\n                wildcardExportStatements.push(\n                  `export * from '${wildcardModule.blobUrl}'`,\n                );\n              }\n            }\n            // create a shell code for delay assignment\n            currentModule.shellUrl = this.createBlobUrl(\n              `export function u$$_(m){${currentModuleExports\n                .map((name) =>\n                  name === 'default' ? 'd$$_=m.default' : `${name}=m.${name}`,\n                )\n                .join(',')}}${currentModuleExports\n                .map((name) =>\n                  name === 'default'\n                    ? 'let d$$_;export{d$$_ as default}'\n                    : `export let ${name}`,\n                )\n                .join(';')}${\n                wildcardExportStatements.length\n                  ? `;${wildcardExportStatements.join(';')}`\n                  : ''\n              }\\n//# sourceURL=${saveUrl}?cycle`,\n            );\n          }\n          newModuleName = currentModule.shellUrl;\n        } else if (!currentModule) {\n          await this.fetchModuleResource(lockId, envVarStr, noEntryEnvVarStr, saveUrl, requestUrl);\n          currentModule = this.moduleCache[saveUrl];\n          const { blobUrl, shellUrl, shellExecuted } = currentModule;\n          newModuleName = blobUrl!;\n          if (shellUrl && !shellExecuted) {\n            // find circular shell, just execute it\n            shellExecutionCode += genShellExecutionCode(\n              i,\n              newModuleName,\n              shellUrl,\n            );\n            currentModule.shellExecuted = true;\n          }\n        } else {\n          newModuleName = currentModule.blobUrl!;\n        }\n      }\n      result = processImportModule(importAnalysis, newModuleName || moduleName);\n    }\n\n    // clear\n    thisModule.source = '';\n    delete thisModule.analysis;\n\n    return `${dynamicImport}${shellExecutionCode};${result.join('')}`;\n  }\n\n  destroy() {\n    for (const key in this.moduleCache) {\n      const { blobUrl, shellUrl } = this.moduleCache[key];\n      if (blobUrl) {\n        URL.revokeObjectURL(blobUrl);\n      }\n      if (shellUrl) {\n        URL.revokeObjectURL(shellUrl);\n      }\n    }\n    this.moduleCache = {};\n    this.lock.clear();\n    delete this.app.global[this.globalVarKey];\n  }\n\n  load(\n    code: string,\n    env: Record<string, any>,\n    url?: string,\n    options?: interfaces.ExecScriptOptions,\n  ) {\n    return new Promise<void>(async (resolve) => {\n      if (url && this.moduleCache[url]) {\n        return resolve();\n      }\n\n      const genShellCodeWrapper = (\n        blobUrl: string,\n        shellUrl: string,\n        sourceUrl: string,\n      ) => {\n        return `export * from '${blobUrl}'${genShellExecutionCode(\n          0,\n          blobUrl,\n          shellUrl,\n        )}\\n//# sourceURL=${sourceUrl}?cycle`;\n      };\n\n      env = {\n        ...env,\n        resolve,\n        import: async (moduleId: string, baseUrl: string, realUrl: string) => {\n          let saveUrl = moduleId;\n          let requestUrl = moduleId;\n\n          if (!isAbsolute(moduleId)) {\n            saveUrl = transformUrl(baseUrl, moduleId);\n            requestUrl = transformUrl(realUrl, moduleId);\n          }\n          let targetModule = this.moduleCache[saveUrl];\n          if (!targetModule?.blobUrl) {\n            await this.fetchModuleResource(this.lock.genId(), envVarStr, noEntryEnvVarStr, saveUrl, requestUrl);\n            targetModule = this.moduleCache[saveUrl];\n          }\n          if (\n            targetModule &&\n            targetModule.shellUrl &&\n            !targetModule.shellExecuted &&\n            targetModule.blobUrl\n          ) {\n            // if the top level load is a shell code, we need to run its update function\n            return this.execModuleCode(\n              this.createBlobUrl(\n                genShellCodeWrapper(\n                  targetModule.blobUrl,\n                  targetModule.shellUrl,\n                  saveUrl,\n                ),\n              ),\n            );\n          }\n          return this.execModuleCode(targetModule.blobUrl!);\n        },\n      };\n      const genEnvVarStr = (targetEnv: Record<string, any>, noEntry?: boolean) => {\n        const newEnv = { ...targetEnv };\n        if (noEntry) {\n          delete newEnv.exports;\n          delete newEnv.module;\n        }\n        return Object.keys(newEnv).reduce((prevCode, name) => {\n          if (name === 'resolve' || name === 'import') return prevCode;\n          return `${prevCode} var ${name} = window.${this.globalVarKey}.${name};`;\n        }, '');\n      };\n      const envVarStr = genEnvVarStr(env);\n      const noEntryEnvVarStr = genEnvVarStr(env, true);\n\n      let sourcemap = '';\n      if (!haveSourcemap(code) && url) {\n        sourcemap = await createSourcemap(\n          code,\n          options && options.isInline\n            ? `index.html(inline.${this.app.scriptCount}.js)`\n            : url,\n        );\n      }\n\n      code = await this.analysisModule(this.lock.genId(), code, envVarStr, noEntryEnvVarStr, url, url);\n      code = `import.meta.url='${url}';${options?.noEntry ? noEntryEnvVarStr : envVarStr}${code}\\n;window.${this.globalVarKey}.resolve();\\n${sourcemap}`;\n\n      this.app.global[this.globalVarKey] = env;\n\n      let blobUrl = this.createBlobUrl(code);\n      if (options && !options.isInline && url) {\n        this.setBlobUrl(url, blobUrl);\n      }\n      const currentModule = this.moduleCache[url || ''];\n      if (currentModule?.shellUrl && !currentModule.shellExecuted) {\n        // if the top level load is a shell code, we need to run its update function\n        blobUrl = this.createBlobUrl(\n          genShellCodeWrapper(blobUrl, currentModule.shellUrl, url || ''),\n        );\n      }\n      this.execModuleCode(blobUrl);\n    });\n  }\n}\n", "import { StyleManager, TemplateManager } from '@garfish/loader';\nimport {\n  Text,\n  Node,\n  warn,\n  assert,\n  hasOwn,\n  remove,\n  Queue,\n  coreLog,\n  isJsType,\n  isObject,\n  isPromise,\n  isGarfishConfigType,\n  toBoolean,\n  findTarget,\n  evalWithEnv,\n  transformUrl,\n  __MockBody__,\n  __MockHead__,\n  getRenderNode,\n  sourceListTags,\n  createAppContainer,\n  setDocCurrentScript,\n} from '@garfish/utils';\nimport { Garfish } from '../garfish';\nimport { interfaces } from '../interface';\nimport { appLifecycle } from '../lifecycle';\nimport { ESModuleLoader } from './esModule';\nimport { SubAppObserver } from '../plugins/performance/subAppObserver';\n\nexport type CustomerLoader = (\n  provider: interfaces.Provider,\n  appInfo: interfaces.AppInfo,\n  path?: string,\n) => Promise<interfaces.LoaderResult | void> | interfaces.LoaderResult | void;\n\nexport type AppInfo = interfaces.AppInfo & {\n  appId?: number;\n};\n\nexport interface ExecScriptOptions {\n  node?: Node;\n  async?: boolean;\n  noEntry?: boolean;\n  isInline?: boolean;\n  isModule?: boolean;\n}\n\nlet appId = 0;\nconst __GARFISH_GLOBAL_ENV__ = '__GARFISH_GLOBAL_ENV__';\nexport const __GARFISH_EXPORTS__ = '__GARFISH_EXPORTS__';\n\n// Have the ability to App instance\n// 1. Provide static resource, the structure of the HTML, CSS, js.\n// 2. Can be extracted in the js CJS through scope __GARFISH_EXPORTS__ namespace or get child application provider is deduced.\n// 3. Through execCode incoming environment variables such as CJS specification of the module, the require, exports to realize external sharing\n// 4. Trigger rendering\uFF1AApplication related nodes placed in the document flow, which in turn perform application scripts, final render function,\n//    perform the son application provides complete application independent runtime execution.\n// 5. Trigger the destruction: Perform the destroy function of child application, and applies the child node is removed from the document flow.\nexport class App {\n  public appId = appId++;\n  public scriptCount = 0;\n  public display = false;\n  public mounted = false;\n  public strictIsolation = false;\n  public esmQueue = new Queue();\n  public esModuleLoader = new ESModuleLoader(this);\n  public name: string;\n  public isHtmlMode: boolean;\n  public global: any = window;\n  public appContainer: HTMLElement;\n  public cjsModules: Record<string, any>;\n  public htmlNode: HTMLElement | ShadowRoot;\n  public customExports: Record<string, any> = {}; // If you don't want to use the CJS export, can use this\n  public sourceList: Array<{ tagName: string; url: string }> = [];\n  public sourceListMap: Map<string, { tagName: string; url: string }> = new Map();\n  public appInfo: AppInfo;\n  public context: Garfish;\n  public hooks: interfaces.AppHooks;\n  public provider?: interfaces.Provider;\n  public entryManager: TemplateManager;\n  public appPerformance: SubAppObserver;\n  public customLoader?: CustomerLoader;\n  public childGarfishConfig: interfaces.ChildGarfishConfig = {};\n  private active = false;\n  public mounting = false;\n  private unmounting = false;\n  private resources: interfaces.ResourceModules;\n  // Environment variables injected by garfish for linkage with child applications\n  private globalEnvVariables: Record<string, any>;\n\n  constructor(\n    context: Garfish,\n    appInfo: AppInfo,\n    entryManager: TemplateManager,\n    resources: interfaces.ResourceModules,\n    isHtmlMode: boolean,\n    customLoader?: CustomerLoader,\n  ) {\n    this.context = context;\n    this.appInfo = appInfo;\n    this.name = appInfo.name;\n    this.resources = resources;\n    this.isHtmlMode = isHtmlMode;\n    this.entryManager = entryManager;\n\n    // `appInfo` is completely independent and can be associated with `appId`\n    this.appInfo.appId = this.appId;\n\n    // Garfish environment variables\n    this.globalEnvVariables = {\n      currentApp: this,\n      loader: context.loader,\n      externals: context.externals,\n      remoteModulesCode: resources.modules,\n    };\n    this.cjsModules = {\n      exports: {},\n      module: null,\n      require: (key: string) => {\n        const pkg = this.global[key] || context.externals[key] || window[key];\n        if (!pkg) {\n          warn(`Package \"${key}\" is not found`);\n        }\n        return pkg;\n      },\n    };\n    this.cjsModules.module = this.cjsModules;\n    this.customLoader = customLoader;\n\n    // Register hooks\n    this.hooks = appLifecycle();\n    this.hooks.usePlugin({\n      ...appInfo,\n      name: `${appInfo.name}-lifecycle`,\n    });\n\n    // Save all the resources to address\n    const nodes = entryManager.getNodesByTagName(...sourceListTags);\n    for (const key in nodes) {\n      nodes[key].forEach((node) => {\n        const url =\n          entryManager.findAttributeValue(node, 'href') ||\n          entryManager.findAttributeValue(node, 'src');\n        if (url) {\n          this.addSourceList({\n            tagName: node.tagName,\n            url: entryManager.url ? transformUrl(entryManager.url, url) : url,\n          });\n        }\n        if (isGarfishConfigType({ type: entryManager.findAttributeValue(node, 'type') })) {\n          // garfish config script founded\n          // parse it\n          this.childGarfishConfig = JSON.parse((node.children?.[0] as Text)?.content);\n        }\n      });\n    }\n    this.appInfo.entry && this.addSourceList({ tagName: 'html', url: this.appInfo.entry })\n  }\n\n  get rootElement() {\n    return findTarget(this.htmlNode, [`div[${__MockBody__}]`, 'body']);\n  }\n\n  get getSourceList () {\n    return this.sourceList;\n  }\n\n  addSourceList(sourceInfo: Array<{ tagName: string; url: string }> | { tagName: string; url: string }){\n    if (this.appInfo.disableSourceListCollect) return;\n    if (Array.isArray(sourceInfo)){\n      let nSourceList = sourceInfo.filter(item => {\n        if (!this.sourceListMap.has(item.url) && item.url.startsWith('http')) {\n          this.sourceListMap.set(item.url, item);\n          return true;\n        }\n        return false;\n      });\n      this.sourceList = this.sourceList.concat(nSourceList);\n    } else {\n      if (!this.sourceListMap.get(sourceInfo.url) && sourceInfo.url.startsWith('http')){\n        this.sourceList.push(sourceInfo);\n        this.sourceListMap.set(sourceInfo.url, sourceInfo);\n      }\n    }\n  }\n  \n  getProvider() {\n    return this.provider\n      ? Promise.resolve(this.provider)\n      : this.checkAndGetProvider();\n  }\n\n  isNoEntryScript(url = '') {\n    return this.childGarfishConfig.sandbox?.noEntryScripts?.some(item => url.indexOf(item) > -1);\n  }\n\n  execScript(\n    code: string,\n    env: Record<string, any>,\n    url?: string,\n    options?: interfaces.ExecScriptOptions,\n  ) {\n    env = {\n      ...this.getExecScriptEnv(options?.noEntry),\n      ...(env || {}),\n    };\n\n    this.scriptCount++;\n\n    const args = [this.appInfo, code, env, url, options] as const;\n    this.hooks.lifecycle.beforeEval.emit(...args);\n    try {\n      this.runCode(code, env, url, options);\n    } catch (err) {\n      this.hooks.lifecycle.errorExecCode.emit(err, ...args);\n      throw err;\n    }\n\n    this.hooks.lifecycle.afterEval.emit(...args);\n  }\n\n  // `vm sandbox` can override this method\n  runCode(\n    code: string,\n    env: Record<string, any>,\n    url?: string,\n    options?: interfaces.ExecScriptOptions,\n  ) {\n    // If the node is an es module, use native esmModule\n    if (options && options.isModule) {\n      this.esmQueue.add(async (next) => {\n        await this.esModuleLoader.load(code, {\n          // rebuild full env\n          ...this.getExecScriptEnv(),\n          // this 'env' may lost commonjs data\n          ...env,\n        }, url, options);\n        next();\n      });\n    } else {\n      const revertCurrentScript = setDocCurrentScript(\n        this.global.document,\n        code,\n        true,\n        url,\n        options?.async,\n        options?.originScript,\n      );\n      code += url ? `\\n//# sourceURL=${url}\\n` : '';\n      if (!hasOwn(env, 'window')) {\n        env = {\n          ...env,\n          window: this.global,\n        };\n      }\n      evalWithEnv(`;${code}`, env, this.global);\n      Promise.resolve().then(revertCurrentScript);\n    }\n  }\n\n  async show() {\n    this.active = true;\n    const { display, mounted, provider } = this;\n    if (display) return false;\n    if (!mounted) {\n      (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && warn('Need to call the \"app.mount()\" method first.');\n      return false;\n    }\n    this.hooks.lifecycle.beforeMount.emit(this.appInfo, this, true);\n    this.context.activeApps.push(this);\n\n    await this.addContainer();\n    this.callRender(provider, false);\n    this.display = true;\n    this.hooks.lifecycle.afterMount.emit(this.appInfo, this, true);\n    return true;\n  }\n\n  hide() {\n    this.active = false;\n    this.mounting = false;\n    const { display, mounted, provider } = this;\n    if (!display) return false;\n    if (!mounted) {\n      (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && warn('Need to call the \"app.mount()\" method first.');\n      return false;\n    }\n    this.hooks.lifecycle.beforeUnmount.emit(this.appInfo, this, true);\n\n    this.callDestroy(provider, false);\n    this.display = false;\n    remove(this.context.activeApps, this);\n    this.hooks.lifecycle.afterUnmount.emit(this.appInfo, this, true);\n    return true;\n  }\n\n  async mount() {\n    if (!this.canMount()) return false;\n    this.hooks.lifecycle.beforeMount.emit(this.appInfo, this, false);\n\n    this.active = true;\n    this.mounting = true;\n    try {\n      this.context.activeApps.push(this);\n      // add container and compile js with cjs\n      const { asyncScripts } = await this.compileAndRenderContainer();\n      if (!this.stopMountAndClearEffect()) return false;\n\n      // Good provider is set at compile time\n      const provider = await this.getProvider();\n      // Existing asynchronous functions need to decide whether the application has been unloaded\n      if (!this.stopMountAndClearEffect()) return false;\n\n      this.callRender(provider, true);\n      this.display = true;\n      this.mounted = true;\n      this.hooks.lifecycle.afterMount.emit(this.appInfo, this, false);\n\n      await asyncScripts;\n      if (!this.stopMountAndClearEffect()) return false;\n    } catch (e) {\n      this.entryManager.DOMApis.removeElement(this.appContainer);\n      this.hooks.lifecycle.errorMountApp.emit(e, this.appInfo);\n      return false;\n    } finally {\n      this.mounting = false;\n    }\n    return true;\n  }\n\n  unmount() {\n    this.active = false;\n    this.mounting = false;\n    if (!this.mounted || !this.appContainer) {\n      return false;\n    }\n    if (this.unmounting) {\n      (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && warn(`The ${this.name} app unmounting.`);\n      return false;\n    }\n    // This prevents the unmount of the current app from being called in \"provider.destroy\"\n    this.unmounting = true;\n    this.hooks.lifecycle.beforeUnmount.emit(this.appInfo, this, false);\n\n    try {\n      this.callDestroy(this.provider, true);\n      this.display = false;\n      this.mounted = false;\n      this.provider = undefined;\n      this.customExports = {};\n      this.cjsModules.exports = {};\n      this.esModuleLoader.destroy();\n      remove(this.context.activeApps, this);\n      this.hooks.lifecycle.afterUnmount.emit(this.appInfo, this, false);\n    } catch (e) {\n      remove(this.context.activeApps, this);\n      this.entryManager.DOMApis.removeElement(this.appContainer);\n      this.hooks.lifecycle.errorUnmountApp.emit(e, this.appInfo);\n      return false;\n    } finally {\n      this.unmounting = false;\n    }\n    return true;\n  }\n\n  getExecScriptEnv(noEntry?: boolean) {\n    // The legacy of commonJS function support\n    const envs = {\n      [__GARFISH_EXPORTS__]: this.customExports,\n      [__GARFISH_GLOBAL_ENV__]: this.globalEnvVariables,\n    };\n\n    if (noEntry) {\n      return {\n        ...envs,\n        require: this.cjsModules.require,\n      };\n    }\n\n    return {\n      ...envs,\n      ...this.cjsModules,\n    };\n  }\n\n  // Performs js resources provided by the module, finally get the content of the export\n  async compileAndRenderContainer() {\n    // Render the application node\n    // If you don't want to use the CJS export, at the entrance is not can not pass the module, the require\n    await this.renderTemplate();\n\n    // Execute asynchronous script\n    return {\n      asyncScripts: new Promise<void>((resolve) => {\n        // Asynchronous script does not block the rendering process\n        setTimeout(() => {\n          if (this.stopMountAndClearEffect()) {\n            for (const jsManager of this.resources.js) {\n              if (jsManager.async) {\n                try {\n                  this.execScript(\n                    jsManager.scriptCode,\n                    {},\n                    jsManager.url || this.appInfo.entry,\n                    {\n                      async: false,\n                      noEntry: true,\n                    },\n                  );\n                } catch (e) {\n                  this.hooks.lifecycle.errorMountApp.emit(e, this.appInfo);\n                }\n              }\n            }\n          }\n          resolve();\n        });\n      }),\n    };\n  }\n\n  private canMount() {\n    // If you are not in mount mount\n    if (this.mounting) {\n      (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && warn(`The ${this.appInfo.name} app mounting.`);\n      return false;\n    }\n    // If the application has been rendered complete, apply colours to a drawing again, need to destroy the rendering\n    if (this.mounted) {\n      (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && warn(`The ${this.appInfo.name} app already mounted.`);\n      return false;\n    }\n    // Application in destruction state, the need to destroy completed to render\n    if (this.unmounting) {\n      (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) &&\n        warn(\n          `The ${this.appInfo.name} app is unmounting can't Perform application rendering.`,\n        );\n      return false;\n    }\n    return true;\n  }\n\n  // If asynchronous task encountered in the rendering process, such as triggering the beforeEval before executing code,\n  // after the asynchronous task, you need to determine whether the application has been destroyed or in the end state.\n  // If in the end state will need to perform the side effects of removing rendering process, adding a mount point to a document,\n  // for example, execute code of the environmental effects, and rendering the state in the end.\n  private stopMountAndClearEffect() {\n    if (!this.active) {\n      if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n        warn(`The app \"${this.name}\" rendering process has been blocked.`);\n      }\n      this.mounting = false;\n      // Will have been added to the document flow on the container\n      if (this.appContainer) {\n        this.entryManager.DOMApis.removeElement(this.appContainer);\n      }\n      coreLog(\n        `${this.appInfo.name} id:${this.appId} stopMountAndClearEffect`,\n        this.appContainer,\n      );\n      return false;\n    }\n    return true;\n  }\n\n  // Calls to render do compatible with two different sandbox\n  private callRender(provider?: interfaces.Provider, isMount?: boolean) {\n    if (provider && provider.render) {\n      provider.render({\n        appName: this.appInfo.name,\n        dom: this.rootElement,\n        basename: this.appInfo.basename,\n        appRenderInfo: { isMount },\n        props: this.appInfo.props,\n      });\n    }\n  }\n\n  // Call to destroy do compatible with two different sandbox\n  private callDestroy(provider?: interfaces.Provider, isUnmount?: boolean) {\n    const { rootElement, appContainer } = this;\n    if (provider && provider.destroy) {\n      provider.destroy({\n        appName: this.appInfo.name,\n        dom: rootElement,\n        appRenderInfo: { isUnmount },\n        props: this.appInfo.props,\n      });\n    }\n    this.entryManager.DOMApis.removeElement(appContainer);\n  }\n\n  // Create a container node and add in the document flow\n  // domGetter Have been dealing with\n  private async addContainer() {\n    // Initialize the mount point, support domGetter as promise, is advantageous for the compatibility\n    const wrapperNode = await getRenderNode(this.appInfo.domGetter);\n    if (typeof wrapperNode.appendChild === 'function') {\n      wrapperNode.appendChild(this.appContainer);\n    }\n  }\n\n  private async renderTemplate() {\n    const { appInfo, entryManager, resources } = this;\n    const { url: baseUrl, DOMApis } = entryManager;\n    const { htmlNode, appContainer } = createAppContainer(appInfo);\n\n    // Transformation relative path\n    this.htmlNode = htmlNode;\n    this.appContainer = appContainer;\n\n    // To append to the document flow, recursive again create the contents of the HTML or execute the script\n    await this.addContainer();\n\n    const customRenderer: Parameters<typeof entryManager.createElements>[0] = {\n      meta: () => null,\n\n      img: (node) => {\n        baseUrl && entryManager.toResolveUrl(node, 'src', baseUrl);\n        return DOMApis.createElement(node);\n      },\n\n      video: (node) => {\n        baseUrl && entryManager.toResolveUrl(node, 'src', baseUrl);\n        return DOMApis.createElement(node);\n      },\n\n      audio: (node) => {\n        baseUrl && entryManager.toResolveUrl(node, 'src', baseUrl);\n        return DOMApis.createElement(node);\n      },\n\n      // The body and head this kind of treatment is to compatible with the old version\n      body: (node) => {\n        if (!this.strictIsolation) {\n          node = entryManager.cloneNode(node);\n          node.tagName = 'div';\n          node.attributes.push({\n            key: __MockBody__,\n            value: null,\n          });\n        }\n        return DOMApis.createElement(node);\n      },\n\n      head: (node) => {\n        if (!this.strictIsolation) {\n          node = entryManager.cloneNode(node);\n          node.tagName = 'div';\n          node.attributes.push({\n            key: __MockHead__,\n            value: null,\n          });\n        }\n        return DOMApis.createElement(node);\n      },\n\n      script: (node) => {\n        const mimeType = entryManager.findAttributeValue(node, 'type');\n        const isModule = mimeType === 'module';\n\n        if (mimeType) {\n          // Other script template\n          if (!isModule && !isJsType({ type: mimeType })) {\n            return DOMApis.createElement(node);\n          }\n        }\n        const jsManager = resources.js.find((manager) => {\n          return !manager.async ? manager.isSameOrigin(node) : false;\n        });\n\n        if (jsManager) {\n          const { url, scriptCode } = jsManager;\n          const mockOriginScript = document.createElement('script');\n          node.attributes.forEach((attribute)=>{\n            if (attribute.key) {\n              mockOriginScript.setAttribute(attribute.key, attribute.value || '');\n            }\n          });\n\n          const targetUrl = url || this.appInfo.entry;\n          this.execScript(scriptCode, {}, targetUrl, {\n            isModule,\n            async: false,\n            isInline: jsManager.isInlineScript(),\n            noEntry: toBoolean(\n              entryManager.findAttributeValue(node, 'no-entry')\n                || this.isNoEntryScript(targetUrl),\n            ),\n            originScript: mockOriginScript,\n          });\n        } else if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n          const async = entryManager.findAttributeValue(node, 'async');\n          if (typeof async === 'undefined' || async === 'false') {\n            const tipInfo = JSON.stringify(node, null, 2);\n            warn(\n              `Current js node cannot be found, the resource may not exist.\\n\\n ${tipInfo}`,\n            );\n          }\n        }\n        return DOMApis.createScriptCommentNode(node);\n      },\n\n      style: (node) => {\n        const text = node.children[0] as Text;\n        if (text) {\n          const styleManager = new StyleManager(text.content, baseUrl);\n          styleManager.setScope({\n            appName: this.name,\n            rootElId: this.appContainer.id,\n          });\n          baseUrl && styleManager.correctPath(baseUrl);\n          return entryManager.ignoreChildNodesCreation(\n            styleManager.renderAsStyleElement(),\n          );\n        }\n        return DOMApis.createElement(node);\n      },\n\n      link: (node) => {\n        if (DOMApis.isCssLinkNode(node)) {\n          const styleManager = this.resources.link.find((manager) =>\n            manager.isSameOrigin(node),\n          );\n          if (styleManager) {\n            styleManager.setScope({\n              appName: this.name,\n              rootElId: this.appContainer.id,\n            });\n            return styleManager.renderAsStyleElement(\n              (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) ? `\\n/*${DOMApis.createLinkCommentNode(node)}*/\\n` : '',\n            );\n          }\n        }\n        // prettier-ignore\n        return DOMApis.isPrefetchJsLinkNode(node)\n          ? DOMApis.createScriptCommentNode(node)\n          : DOMApis.isIconLinkNode(node)\n            ? null // Filter the icon of the child app, and cannot affect the main application\n            : DOMApis.createElement(node);\n      },\n    };\n\n    // Render dom tree and append to document.\n    entryManager.createElements(customRenderer, htmlNode);\n  }\n\n  private async checkAndGetProvider() {\n    const { appInfo, rootElement, cjsModules, customExports } = this;\n    const { name, props, basename } = appInfo;\n    let provider:\n      | ((...args: any[]) => interfaces.Provider)\n      | interfaces.Provider\n      | undefined = undefined;\n\n    // esModule export\n    await this.esmQueue.awaitCompletion();\n\n    // Cjs exports\n    if (cjsModules.exports) {\n      if (isPromise(cjsModules.exports))\n        cjsModules.exports = await cjsModules.exports;\n      // Is not set in the configuration of webpack library option\n      if (cjsModules.exports.provider) provider = cjsModules.exports.provider;\n    }\n\n    // Custom export prior to export by default\n    if (customExports.provider) {\n      provider = customExports.provider;\n    }\n\n    if (typeof provider === 'function') {\n      provider = await provider(\n        {\n          basename,\n          dom: rootElement,\n          ...(props || {}),\n        },\n        props,\n      );\n    } else if (isPromise(provider)) {\n      provider = await provider;\n    }\n\n    // The provider may be a function object\n    if (!isObject(provider) && typeof provider !== 'function') {\n      warn(\n        ` Invalid module content: ${name}, you should return both render and destroy functions in provider function.`,\n      );\n    }\n\n    // If you have customLoader, the dojo.provide by user\n    const hookRes = await (this.customLoader &&\n      this.customLoader(provider as interfaces.Provider, appInfo, basename));\n\n    if (hookRes) {\n      const { mount, unmount } = hookRes || ({} as any);\n      if (typeof mount === 'function' && typeof unmount === 'function') {\n        (provider as interfaces.Provider).render = mount;\n        (provider as interfaces.Provider).destroy = unmount;\n      }\n    }\n\n    if (!appInfo.noCheckProvider) {\n      assert(provider, `\"provider\" is \"${provider}\".`);\n      // No need to use \"hasOwn\", because \"render\" may be on the prototype chain\n      assert('render' in provider, '\"render\" is required in provider.');\n      assert('destroy' in provider, '\"destroy\" is required in provider.');\n    }\n\n    this.provider = provider as interfaces.Provider;\n    return provider as interfaces.Provider;\n  }\n}\n", "import { warn, error, Text, transformUrl, assert } from '@garfish/utils';\nimport {\n  Loader,\n  StyleManager,\n  TemplateManager,\n  JavaScriptManager,\n} from '@garfish/loader';\nimport { AppInfo } from './app';\n\n// Fetch `script`, `link` and `module meta` elements\nfunction fetchStaticResources(\n  appName: string,\n  loader: Loader,\n  entryManager: TemplateManager,\n) {\n  const isAsync = (val) => typeof val !== 'undefined' && val !== 'false';\n\n  // Get all script elements\n  const jsNodes = Promise.all(\n    entryManager\n      .findAllJsNodes()\n      .map((node) => {\n        const src = entryManager.findAttributeValue(node, 'src');\n        const type = entryManager.findAttributeValue(node, 'type');\n        const crossOrigin = entryManager.findAttributeValue(\n          node,\n          'crossorigin',\n        );\n\n        // There should be no embedded script in the script element tag with the src attribute specified\n        if (src) {\n          const fetchUrl = entryManager.url\n            ? transformUrl(entryManager.url, src)\n            : src;\n          const async = entryManager.findAttributeValue(node, 'async');\n\n          // Scripts with \"async\" attribute will make the rendering process very complicated,\n          // we have a preload mechanism, so we don\u2019t need to deal with it.\n          return loader\n            .load<JavaScriptManager>({\n              scope: appName,\n              url: fetchUrl,\n              crossOrigin,\n              defaultContentType: type,\n            })\n            .then(({ resourceManager: jsManager }) => {\n              if (jsManager) {\n                jsManager.setDep(node);\n                type && jsManager.setMimeType(type);\n                jsManager.setAsyncAttribute(isAsync(async));\n                return jsManager;\n              } else {\n                warn(`[${appName}] Failed to load script: ${fetchUrl}`);\n              }\n            })\n            .catch(() => null);\n        } else if (node.children.length > 0) {\n          const code = (node.children[0] as Text).content;\n          if (code) {\n            const jsManager = new JavaScriptManager(code, '');\n            jsManager.setDep(node);\n            type && jsManager.setMimeType(type);\n            return jsManager;\n          }\n        }\n      })\n      .filter(Boolean),\n  );\n\n  // Get all link elements\n  const linkNodes = Promise.all(\n    entryManager\n      .findAllLinkNodes()\n      .map((node) => {\n        if (!entryManager.DOMApis.isCssLinkNode(node)) return;\n        const href = entryManager.findAttributeValue(node, 'href');\n        if (href) {\n          const fetchUrl = entryManager.url\n            ? transformUrl(entryManager.url, href)\n            : href;\n          return loader\n            .load<StyleManager>({ scope: appName, url: fetchUrl })\n            .then(({ resourceManager: styleManager }) => {\n              if (styleManager) {\n                styleManager.setDep(node);\n                styleManager.correctPath();\n                return styleManager;\n              } else {\n                warn(`${appName} Failed to load link: ${fetchUrl}`);\n              }\n            })\n            .catch(() => null);\n        }\n      })\n      .filter(Boolean),\n  );\n\n  // Get all remote modules\n  const metaNodes = Promise.all(\n    entryManager\n      .findAllMetaNodes()\n      .map((node) => {\n        if (!entryManager.DOMApis.isRemoteModule(node)) return;\n        const async = entryManager.findAttributeValue(node, 'async');\n        const alias = entryManager.findAttributeValue(node, 'alias');\n        if (!isAsync(async)) {\n          const src = entryManager.findAttributeValue(node, 'src');\n          if (src) {\n            return loader\n              .loadModule(src)\n              .then(({ resourceManager: moduleManager }) => {\n                if (moduleManager && alias) {\n                  moduleManager && moduleManager.setAlias(alias);\n                }\n                return moduleManager;\n              })\n              .catch(() => null);\n          }\n        } else if (alias) {\n          warn(`Asynchronous loading module, the alias \"${alias}\" is invalid.`);\n        }\n      })\n      .filter(Boolean),\n  );\n\n  return Promise.all([jsNodes, linkNodes, metaNodes]).then((ls) =>\n    ls.map((ns: any) => ns.filter(Boolean)),\n  );\n}\n\nexport async function processAppResources(loader: Loader, appInfo: AppInfo) {\n  let isHtmlMode: Boolean = false,\n    fakeEntryManager;\n  const resources: any = { js: [], link: [], modules: [] }; // Default resources\n  assert(appInfo.entry, `[${appInfo.name}] Entry is not specified.`);\n  const { resourceManager: entryManager } = await loader.load({\n    scope: appInfo.name,\n    url: transformUrl(location.href, appInfo.entry),\n  });\n\n  // Html entry\n  if (entryManager instanceof TemplateManager) {\n    isHtmlMode = true;\n    const [js, link, modules] = await fetchStaticResources(\n      appInfo.name,\n      loader,\n      entryManager,\n    );\n    resources.js = js;\n    resources.link = link;\n    resources.modules = modules;\n  } else if (entryManager instanceof JavaScriptManager) {\n    // Js entry\n    isHtmlMode = false;\n    const mockTemplateCode = `<script src=\"${entryManager.url}\"></script>`;\n    fakeEntryManager = new TemplateManager(mockTemplateCode, entryManager.url);\n    entryManager.setDep(fakeEntryManager.findAllJsNodes()[0]);\n    resources.js = [entryManager];\n  } else {\n    error(`Entrance wrong type of resource of \"${appInfo.name}\".`);\n  }\n\n  return [fakeEntryManager || entryManager, resources, isHtmlMode];\n}\n", "import { interfaces } from '../interface';\n\n// When the main application is updated, the currently active child applications need to rerender.\nexport function GarfishHMRPlugin() {\n  let hasInit = false;\n  let isHotUpdate = false;\n  return function (Garfish: interfaces.Garfish): interfaces.Plugin {\n    return {\n      name: 'fix-hmr',\n      version: '1.12.0',\n\n      bootstrap() {\n        if (hasInit) return;\n        hasInit = true;\n\n        let webpackHotUpdateName = 'webpackHotUpdate';\n        let webpackHotUpdate = (window as any)[webpackHotUpdateName];\n\n        // \u67E5\u627E webpackHotUpdate \u51FD\u6570\n        for (const i in window) {\n          if (i.includes('webpackHotUpdate')) {\n            webpackHotUpdateName = i;\n            webpackHotUpdate = window[i];\n          }\n        }\n\n        if (typeof webpackHotUpdate === 'function') {\n          (window as any)[webpackHotUpdateName] = function () {\n            isHotUpdate = true;\n            return webpackHotUpdate.apply(this, arguments);\n          };\n\n          const observer = new MutationObserver(() => {\n            if (!isHotUpdate) return;\n            isHotUpdate = false;\n\n            Garfish.activeApps.forEach((app) => {\n              if (app.mounted) {\n                setTimeout(() => {\n                  app.display && app.hide();\n                  app.show();\n                });\n              }\n            });\n          });\n\n          observer.observe(document.documentElement, {\n            subtree: true,\n            childList: true,\n            attributes: true,\n          });\n        }\n      },\n    };\n  };\n}\n", "import { interfaces } from '../interface';\n\nexport function GarfishOptionsLife(options, name: string) {\n  return function (): interfaces.Plugin {\n    return {\n      name,\n      version: '1.12.0',\n      ...options,\n    };\n  };\n}\n", "import {\n  warn,\n  Queue,\n  isAbsolute,\n  transformUrl,\n  idleCallback,\n  callTestCallback,\n  safeWrapper,\n} from '@garfish/utils';\nimport { Loader, Manager, TemplateManager } from '@garfish/loader';\nimport { interfaces } from '../interface';\n\nexport const storageKey = '__garfishPreloadApp__';\n\nconst isMobile =\n  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n    navigator.userAgent,\n  );\n\n// Using queues, to avoid interference with the normal request\nconst requestQueue = new Queue();\n\nconst isSlowNetwork = () =>\n  (navigator as any).connection\n    ? (navigator as any).connection.saveData ||\n      /(2|3)g/.test((navigator as any).connection.effectiveType)\n    : false;\n\nexport const requestIdleCallback =\n  false || typeof idleCallback !== 'function'\n    ? window.setTimeout\n    : idleCallback;\n\n// Test size, catch mistakes, avoid preload first screen white during parsing error\nfunction safeLoad({\n  loader,\n  appName,\n  url,\n  isModule,\n  immediately,\n  callback,\n}: {\n  loader: Loader;\n  appName: string;\n  url: string;\n  isModule: boolean;\n  immediately: boolean;\n  callback?: (m: Manager) => any;\n}) {\n  const generateSuccess =\n    (next: () => void = () => {}) =>\n    ({ resourceManager }) => {\n      callback && callback(resourceManager);\n      setTimeout(next, 500);\n    };\n\n  const generateThrowWarn =\n    (next: () => void = () => {}) =>\n    (e) => {\n      if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n        warn(e);\n        warn(`Preload failed. \"${url}\"`);\n      }\n      next();\n    };\n\n  const loadResource = (next: () => void = () => {}) => {\n    const throwWarn = generateThrowWarn(next);\n    const success = generateSuccess(next);\n    try {\n      if (isModule) {\n        loader.loadModule(url).then(success, throwWarn);\n      } else {\n        loader.load({ scope: appName, url }).then(success, throwWarn);\n      }\n    } catch (e) {\n      throwWarn(e);\n      next();\n    }\n  };\n\n  if (immediately) {\n    loadResource();\n  } else {\n    requestQueue.add((next) => {\n      requestIdleCallback(() => loadResource(next));\n    });\n  }\n}\n\nexport function loadAppResource(\n  loader: Loader,\n  info: interfaces.AppInfo,\n  immediately = false,\n) {\n  false && callTestCallback(loadAppResource, info);\n  const fetchUrl = transformUrl(location.href, info.entry);\n\n  safeLoad({\n    loader,\n    appName: info.name,\n    url: fetchUrl,\n    isModule: false,\n    immediately,\n    callback: (manager) => {\n      const loadStaticResource = () => {\n        if (manager instanceof TemplateManager) {\n          const baseUrl = manager.url;\n          const jsNodes = manager.findAllJsNodes();\n          const linkNodes = manager.findAllLinkNodes();\n          const metaNodes = manager.findAllMetaNodes();\n\n          if (jsNodes) {\n            jsNodes.forEach((node) => {\n              const src = manager.findAttributeValue(node, 'src');\n              src &&\n                safeLoad({\n                  loader,\n                  appName: info.name,\n                  url: baseUrl ? transformUrl(baseUrl, src) : src,\n                  isModule: false,\n                  immediately,\n                });\n            });\n          }\n          if (linkNodes) {\n            linkNodes.forEach((node) => {\n              if (manager.DOMApis.isCssLinkNode(node)) {\n                const href = manager.findAttributeValue(node, 'href');\n                href &&\n                  safeLoad({\n                    loader,\n                    appName: info.name,\n                    url: baseUrl ? transformUrl(baseUrl, href) : href,\n                    isModule: false,\n                    immediately,\n                  });\n              }\n            });\n          }\n          if (metaNodes) {\n            metaNodes.forEach((node) => {\n              if (manager.DOMApis.isRemoteModule(node)) {\n                const src = manager.findAttributeValue(node, 'src');\n                if (src && isAbsolute(src)) {\n                  safeLoad({\n                    loader,\n                    appName: info.name,\n                    url: src,\n                    isModule: true,\n                    immediately,\n                  });\n                } else {\n                  warn(\n                    `The loading of the remote module must be an absolute path. \"${src}\"`,\n                  );\n                }\n              }\n            });\n          }\n        }\n      };\n      if (immediately) {\n        loadStaticResource();\n      } else {\n        requestIdleCallback(loadStaticResource);\n      }\n    },\n  });\n}\n\nexport function getRanking() {\n  const str = localStorage.getItem(storageKey);\n  if (str) {\n    const data = JSON.parse(str);\n    return data.sort((a, b) => b.count - a.count);\n  }\n  return [];\n}\n\nexport function setRanking(appName: string) {\n  const str = localStorage.getItem(storageKey);\n  const newCurrent = { appName, count: 1 };\n\n  if (!str) {\n    safeWrapper(() =>\n      localStorage.setItem(storageKey, JSON.stringify([newCurrent])),\n    );\n  } else {\n    const data = JSON.parse(str);\n    const current = data.find((app) => app.appName === appName);\n    current ? current.count++ : data.push(newCurrent);\n    safeWrapper(() => localStorage.setItem(storageKey, JSON.stringify(data)));\n  }\n}\n\nconst loadedMap = Object.create(null); // Global cache, only load again is enough\n\ndeclare module '@garfish/core' {\n  export default interface Garfish {\n    preloadApp: (appName: string) => void;\n  }\n}\n\nexport function GarfishPreloadPlugin() {\n  return function (Garfish: interfaces.Garfish): interfaces.Plugin {\n    Garfish.preloadApp = (appName) => {\n      loadAppResource(Garfish.loader, Garfish.appInfos[appName], true);\n    };\n\n    return {\n      name: 'preload',\n      version: '1.12.0',\n\n      beforeLoad(appInfo) {\n        if (Garfish.options.disablePreloadApp) {\n          return;\n        }\n        setRanking(appInfo.name);\n      },\n\n      registerApp(appInfos) {\n        // Through disablePreloadApp preload is prohibited\n        if (Garfish.options.disablePreloadApp) {\n          return;\n        }\n        setTimeout(\n          () => {\n            if (isMobile || isSlowNetwork()) return;\n            const ranking = getRanking();\n\n            for (const { appName } of ranking) {\n              if (appInfos[appName] && !loadedMap[appName]) {\n                loadedMap[appName] = true;\n                loadAppResource(Garfish.loader, appInfos[appName]);\n              }\n            }\n\n            for (const key in appInfos) {\n              if (!loadedMap[key]) {\n                loadAppResource(Garfish.loader, appInfos[key]);\n              }\n            }\n          },\n          false ? 0 : 5000,\n        );\n      },\n    };\n  };\n}\n", "import { getRenderNode, warn } from '@garfish/utils';\nimport { interfaces } from '../../interface';\n\n// Child app performance monitoring tools\ninterface PerformanceData {\n  resourceLoadTime: number;\n  blankScreenTime: number;\n  firstScreenTime: number;\n  isFirstRender: boolean;\n  entry: string;\n  action: string;\n}\n\ninterface CallbackFunction {\n  (performanceData: PerformanceData): void;\n}\n\ninterface Config {\n  attributes: boolean;\n  childList: boolean;\n  subtree: boolean;\n}\n\ninterface IOptions {\n  subAppRootSelector: interfaces.DomGetter;\n  domObserverMaxTime?: number;\n  waitSubAppNotifyMaxTime?: number;\n  observeConfig?: Config;\n}\n\nexport class SubAppObserver {\n  private observer: MutationObserver;\n  private timeLag: number;\n  private reportTimeLag: number;\n  private observeTimer: number;\n  private dataTimer: number;\n  private entry: string;\n  private subAppBeforeLoadTime: number;\n  private subAppBeforeMountTime: number;\n  private subAppStartPageShowTime: number;\n  private subAppPageShowTime: number;\n  private domQuerySelector: interfaces.DomGetter;\n  private finishAction: string;\n  private config: Config;\n  private isRecordFinish: boolean;\n  private isCallBackFinish: boolean;\n  private isStartShowFlag: boolean;\n  private isSubAppNotifyFinish: boolean;\n  private targetSubscriber: CallbackFunction[];\n  private cbEntryList: string[];\n  private performanceData: PerformanceData;\n\n  constructor(options: IOptions) {\n    this.observer = new MutationObserver(\n      this._mutationObserverCallback.bind(this),\n    );\n    this.subAppBeforeLoadTime = 0;\n    this.subAppBeforeMountTime = 0;\n    this.subAppStartPageShowTime = 0;\n    this.subAppPageShowTime = 0;\n    this.entry = '';\n    this.observeTimer = 0;\n    this.dataTimer = 0;\n    this.domQuerySelector = options.subAppRootSelector;\n    this.config = { attributes: true, childList: true, subtree: true };\n    this.targetSubscriber = [];\n    this.timeLag = options.domObserverMaxTime || 3000;\n    this.reportTimeLag = options.waitSubAppNotifyMaxTime || 10000;\n    this.isRecordFinish = false;\n    this.cbEntryList = [];\n    this.isStartShowFlag = true;\n    this.isCallBackFinish = false;\n    this.isSubAppNotifyFinish = false;\n    this.finishAction = '';\n    this.performanceData = {\n      resourceLoadTime: 0,\n      blankScreenTime: 0,\n      firstScreenTime: 0,\n      isFirstRender: true,\n      entry: '',\n      action: '',\n    };\n  }\n\n  subscribePerformanceData(callback: CallbackFunction) {\n    try {\n      this.targetSubscriber.push(callback);\n    } catch (e) {\n      warn(e);\n    }\n  }\n\n  subscribePerformanceDataOnce(callback: CallbackFunction) {\n    try {\n      const wrapCallback = (performanceData) => {\n        callback(performanceData);\n        this.unsubscribePerformanceData(wrapCallback);\n      };\n\n      this.targetSubscriber.push(wrapCallback);\n    } catch (e) {\n      warn(e);\n    }\n  }\n\n  unsubscribePerformanceData(callback: CallbackFunction) {\n    try {\n      this.targetSubscriber = this.targetSubscriber.filter(\n        (sub) => sub === callback,\n      );\n    } catch (e) {\n      warn(e);\n    }\n  }\n\n  subAppBeforeLoad(entry: string) {\n    this.entry = entry;\n    this.isRecordFinish = false;\n    this.isSubAppNotifyFinish = false;\n    this.subAppBeforeLoadTime = performance.now();\n    this.isCallBackFinish = false;\n    this._handleSubscribeCallback(false);\n  }\n\n  subAppBeforeMount() {\n    this.subAppBeforeMountTime = performance.now();\n    this._subAppStartObserver();\n  }\n\n  subAppUnmount() {\n    if (!this.isRecordFinish) {\n      this._subAppEndObserver('subAppUnmount');\n    }\n    this._handleSubscribeCallback(true);\n  }\n\n  // The child app actively notifies the first screen loading is complete\n  afterRenderNotify() {\n    if (!this.isRecordFinish) {\n      // If the monitoring rendering has not ended, actively stop the observation and process the data\n      this._subAppEndObserver('SubAppRenderNotify');\n    } else if (!this.isSubAppNotifyFinish) {\n      // If the monitoring rendering has ended, actively update the processed data\n      this.isSubAppNotifyFinish = true;\n      this.isRecordFinish = true;\n      this.finishAction = 'SubAppRenderNotify';\n      this._subAppPerformanceDataHandle();\n    }\n  }\n\n  private _mutationObserverCallback() {\n    // Start rendering elements in the child app container to record the dot\n    if (this.isStartShowFlag) {\n      this.subAppStartPageShowTime = performance.now();\n      this.isStartShowFlag = false;\n    }\n\n    // The rendering elements in the child app container no longer change for a certain period of time\n    clearTimeout(this.observeTimer);\n    this.observeTimer = setTimeout(() => {\n      clearTimeout(this.observeTimer);\n      if (!this.isRecordFinish) {\n        this._subAppEndObserver('MutationObserver');\n      }\n    }, this.timeLag) as unknown as number;\n  }\n\n  private _subAppEndObserver(finishAction: string) {\n    this.isRecordFinish = true;\n    this.finishAction = finishAction;\n    this.subAppPageShowTime = performance.now();\n    this.observer.disconnect();\n    this._subAppPerformanceDataHandle();\n    this.isStartShowFlag = true;\n  }\n\n  private async _subAppStartObserver() {\n    try {\n      const targetNode = await getRenderNode(this.domQuerySelector);\n      this.observer.observe(targetNode, this.config);\n      this._subAppClickEventObserver(targetNode as HTMLElement);\n    } catch (e) {\n      warn(e);\n    }\n  }\n\n  private _subAppPerformanceDataHandle() {\n    const timeDifference =\n      this.finishAction === 'MutationObserver' ? this.timeLag : 0;\n    this.performanceData = {\n      resourceLoadTime: this.subAppBeforeMountTime - this.subAppBeforeLoadTime,\n      blankScreenTime: this.subAppStartPageShowTime - this.subAppBeforeLoadTime,\n      firstScreenTime:\n        this.subAppPageShowTime - this.subAppBeforeLoadTime - timeDifference,\n      isFirstRender: this.cbEntryList.indexOf(this.entry) === -1,\n      entry: this.entry,\n      action: this.finishAction,\n    };\n  }\n\n  private _subAppClickEventObserver(targetNode: HTMLElement) {\n    const eventCallback = () => {\n      clearTimeout(this.observeTimer);\n      if (!this.isRecordFinish) {\n        this._subAppEndObserver('UserEvent');\n      }\n    };\n    targetNode.addEventListener('click', eventCallback);\n    targetNode.addEventListener('keyup', eventCallback);\n    targetNode.addEventListener('keydown', eventCallback);\n    targetNode.addEventListener('keypress', eventCallback);\n  }\n\n  private _handleCallback() {\n    try {\n      this.isCallBackFinish = true;\n      this.targetSubscriber.forEach((callback) => {\n        const {\n          firstScreenTime,\n          blankScreenTime,\n          resourceLoadTime,\n          action,\n          entry,\n        } = this.performanceData;\n        if (\n          firstScreenTime > 0 &&\n          blankScreenTime > 0 &&\n          resourceLoadTime > 0 &&\n          action &&\n          entry\n        ) {\n          if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n            console.warn('SUCCESS: ', this.performanceData);\n          }\n          this.cbEntryList.push(this.entry);\n          callback(this.performanceData);\n        } else if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n          console.warn('ERROR: ', this.performanceData);\n        }\n      });\n    } catch (e) {\n      warn(e);\n    }\n  }\n\n  private _handleSubscribeCallback(isImmediately: boolean) {\n    try {\n      clearTimeout(this.dataTimer);\n      if (isImmediately && !this.isCallBackFinish) {\n        this._handleCallback();\n      } else {\n        this.dataTimer = setTimeout(() => {\n          this._handleCallback();\n        }, this.reportTimeLag) as unknown as number;\n      }\n    } catch (e) {\n      warn(e);\n    }\n  }\n}\n", "import { getRenderNode } from '@garfish/utils';\nimport { interfaces } from '../../index';\nimport { SubAppObserver } from './subAppObserver';\n\n// Key nodes in Garfish corresponding to the life cycle of registration\nexport function GarfishPerformance() {\n  return function (): interfaces.Plugin {\n    const subAppMap = {};\n    return {\n      name: 'performance',\n\n      beforeLoad(appInfo) {\n        if (!subAppMap[appInfo.name] && appInfo.domGetter) {\n          subAppMap[appInfo.name] = new SubAppObserver({\n            subAppRootSelector: appInfo.domGetter,\n          });\n        }\n        subAppMap[appInfo.name].subAppBeforeLoad(appInfo.entry);\n      },\n\n      afterLoad(appInfo, appInstance: interfaces.App) {\n        if (appInstance) {\n          appInstance.appPerformance = subAppMap[appInfo.name] as any;\n        }\n      },\n\n      beforeMount(appInfo) {\n        subAppMap[appInfo.name].subAppBeforeMount(appInfo.entry);\n      },\n\n      beforeUnmount(appInfo) {\n        subAppMap[appInfo.name].subAppUnmount(appInfo.entry);\n      },\n    };\n  };\n}\n", "import { coreLog } from '@garfish/utils';\nimport { interfaces } from '../interface';\n\nexport function GarfishLogger() {\n  return function (): interfaces.Plugin {\n    return {\n      name: 'garfish-logger',\n      version: '1.12.0',\n      beforeLoad(appInfo, ...args) {\n        coreLog(`${appInfo.name} beforeLoad`, [appInfo, ...args]);\n      },\n      afterLoad(appInfo, appInstance, ...args) {\n        if (appInstance) {\n          coreLog(`${appInfo.name} id: ${appInstance.appId} afterLoad`, [\n            appInfo,\n            ...args,\n          ]);\n        }\n      },\n      beforeMount(appInfo, appInstance, ...args) {\n        coreLog(`${appInfo.name} id: ${appInstance.appId} beforeMount`, [\n          appInfo,\n          ...args,\n        ]);\n      },\n      afterMount(appInfo, appInstance, ...args) {\n        coreLog(`${appInfo.name} id: ${appInstance.appId} afterMount`, [\n          appInfo,\n          ...args,\n        ]);\n      },\n      beforeUnmount(appInfo, appInstance, ...args) {\n        coreLog(`${appInfo.name} id: ${appInstance.appId} beforeUnmount`, [\n          appInfo,\n          ...args,\n        ]);\n      },\n      afterUnmount(appInfo, appInstance, ...args) {\n        coreLog(`${appInfo.name} id: ${appInstance.appId} afterUnmount`, [\n          appInfo,\n          ...args,\n        ]);\n      },\n    };\n  };\n}\n", "import { interfaces } from '@garfish/core';\n\nexport type RouterHook = (\n  to: CurrentRouterInfo,\n  from: CurrentRouterInfo,\n  next,\n) => void;\n\nexport type RouterChange = (path: string) => void;\n\nexport interface RouterInfo {\n  fullPath: string;\n  path: string;\n  query: Object;\n  state: Object;\n}\n\nexport interface CurrentRouterInfo extends RouterInfo {\n  matched: Array<interfaces.AppInfo>;\n}\n\n// Don't change the logo, in order to avoid inconsistent version leads to failure\nexport const __GARFISH_ROUTER_UPDATE_FLAG__ = '__GARFISH_ROUTER_UPDATE_FLAG__';\n\nexport const __GARFISH_ROUTER_FLAG__ = '__GARFISH_ROUTER_FLAG__';\n\nexport const __GARFISH_BEFORE_ROUTER_EVENT__ = 'garfish:before-routing-event';\n\nexport interface Options {\n  basename?: string;\n  listening?: boolean;\n  current?: CurrentRouterInfo;\n  autoRefreshApp?: boolean;\n  apps: Array<interfaces.AppInfo>;\n  beforeEach?: RouterHook;\n  afterEach?: RouterHook;\n  routerChange?: (url: string) => void;\n  active: (\n    appInfo: interfaces.AppInfo,\n    rootPath: string | undefined,\n  ) => Promise<void>;\n  deactive: (\n    appInfo: interfaces.AppInfo,\n    rootPath: string | undefined,\n  ) => Promise<void>;\n  notMatch?: (path: string) => void;\n}\n\nexport const RouterConfig: Options = {\n  basename: '/',\n  current: {\n    fullPath: '/',\n    path: '/',\n    matched: [],\n    query: {},\n    state: {},\n  },\n  apps: [],\n  beforeEach: (to, from, next) => next(),\n  afterEach: (to, from, next) => next(),\n  active: () => Promise.resolve(),\n  deactive: () => Promise.resolve(),\n  routerChange: () => {},\n  autoRefreshApp: true,\n  listening: true,\n};\n\nexport function set<T extends keyof Options>(field: T, value: Options[T]) {\n  RouterConfig[field] = value;\n}\n\nexport function get(field: keyof Options) {\n  return RouterConfig[field];\n}\n\nexport function setRouterConfig(options: Partial<Options>) {\n  Object.assign(RouterConfig, options);\n}\n", "import { interfaces } from '@garfish/core';\n\nexport function formatQuery(query: { [props: string]: string } = {}) {\n  const qs = Object.keys(query)\n    .map((key) => `${key}=${query[key]}`)\n    .join('&');\n  return qs ? '?' + qs : '';\n}\n\nexport function parseQuery(query = '') {\n  const res: { [props: string]: string[] } = {};\n  if (query) {\n    query\n      .slice(1)\n      .split('&')\n      .map((item) => {\n        const pairs = item.split('=');\n        res[pairs[0]] = pairs;\n      });\n  }\n  return res;\n}\n\n/**\n * \u89E3\u6790\u51FA\u5B50\u5E94\u7528\u7684\u6839\u8DEF\u7531,\u53D6\u5F97app1\n * \u89E3\u6790\u5185\u5BB9\uFF1A\n *    /basename/app1/about\u3001basename/app1\u3001basename/app1/\u3001/app1/\u3001/app1/about\u3001app1/\n *    #/app1\u3001/#/app1/\u3001/#/app1/detail/\u3001/#/app1/detail\n * @param path\n */\nexport function parsePath(path: string) {\n  const matches = path.match(new RegExp('^/([^/]+)')) || [];\n  return `/${matches[1] || ''}`;\n}\n\nexport function find(arr: Array<Function>, func: Function) {\n  for (let i = 0; i < arr.length; i++) {\n    if (func(arr[i])) {\n      return arr[i];\n    }\n  }\n\n  return null;\n}\n\nexport function getPath(basename: string = '/', pathname?: string) {\n  if (basename === '/' || basename === '') {\n    return pathname || location.pathname;\n  } else {\n    return (pathname || location.pathname).replace(\n      new RegExp(`^/?${basename}`),\n      '',\n    );\n  }\n}\n\nexport function getAppRootPath(appInfo: interfaces.AppInfo) {\n  const path = getPath(appInfo.basename, location.pathname);\n  let appRootPath = appInfo.basename === '/' ? '' : (appInfo.basename || '');\n  if (typeof appInfo.activeWhen === 'string') {\n    appRootPath += appInfo.activeWhen;\n  } else {\n    appRootPath += path.split('').reduce((pre, next) => {\n      // \u5339\u914D\n      if (typeof appInfo.activeWhen === 'function' && !appInfo.activeWhen(pre))\n        return pre + next;\n      return pre;\n    }, '');\n  }\n  return appRootPath;\n}\n", "import { RouterHook } from '../config';\n\nexport async function asyncForEach<T>(\n  arr: T[],\n  callback: (v: T, k: number, O: T[]) => Promise<any>,\n) {\n  const length = arr.length;\n  let k = 0;\n  while (k < length) {\n    const kValue = arr[k];\n    await callback(kValue, k, arr);\n    k++;\n  }\n}\n\nexport function toMiddleWare(to, from, cb: RouterHook) {\n  return new Promise((resolve, reject) => {\n    try {\n      cb(to, from, resolve);\n    } catch (err) {\n      reject(err);\n    }\n  });\n}\n\nexport function createEvent(type) {\n  let e;\n  // Compatible with ie\n  if (\n    navigator.userAgent.indexOf('MSIE') !== -1 ||\n    navigator.appVersion.indexOf('Trident/') > 0\n  ) {\n    e = document.createEvent('UIEvents');\n    e.initUIEvent(type.toLowerCase(), true, false, window, 0);\n  } else {\n    e = new Event(type.toLowerCase());\n  }\n  return e;\n}\n", "// copy from https://github.com/webmodules/custom-event\n\nconst NativeCustomEvent =\n  typeof global !== 'undefined' ? (global as any)?.CustomEvent : null;\n\nfunction useNative() {\n  try {\n    const p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });\n    return 'cat' === p.type && 'bar' === p.detail.foo;\n  } catch (e) {}\n  return false;\n}\n\nlet CustomEvent: any;\n\nif (NativeCustomEvent && useNative()) {\n  CustomEvent = NativeCustomEvent;\n} else if (\n  'undefined' !== typeof document &&\n  'function' === typeof document.createEvent\n) {\n  // IE >= 9\n  CustomEvent = function (type, params) {\n    params = params || { bubbles: false, cancelable: false, detail: null };\n    const evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(\n      type,\n      params.bubbles || false,\n      params.cancelable || false,\n      params.detail || null,\n    );\n    return evt;\n  };\n} else {\n  // IE <= 8\n  CustomEvent = function (type, params) {\n    const e = (document as any).createEventObject();\n    e.type = type;\n    if (params) {\n      e.bubbles = Boolean(params.bubbles);\n      e.cancelable = Boolean(params.cancelable);\n      e.detail = params.detail;\n    } else {\n      e.bubbles = false;\n      e.cancelable = false;\n      e.detail = void 0;\n    }\n    return e;\n  };\n}\n\nexport default CustomEvent;\n", "import { validURL } from '@garfish/utils';\nimport { RouterConfig, __GARFISH_ROUTER_UPDATE_FLAG__ } from '../config';\n\nfunction createPopStateEvent(state: any, originalMethodName: string) {\n  let evt;\n  try {\n    evt = new PopStateEvent('popstate', { state });\n  } catch (err) {\n    // IE 11 compatibility\n    evt = document.createEvent('PopStateEvent');\n    (evt as any).initPopStateEvent('popstate', false, false, state);\n  }\n  (evt as any).garfish = true;\n  (evt as any).garfishTrigger = originalMethodName;\n  return evt;\n}\n\nexport const callCapturedEventListeners = (type: keyof History) => {\n  const eventArguments = createPopStateEvent(window.history.state, type);\n  window.dispatchEvent(eventArguments);\n};\n\nconst handlerParams = function (\n  path: string,\n  query: { [key: string]: string },\n  basename?: string,\n): string {\n  if (!path || typeof path !== 'string') return '';\n  let url = path;\n  if (url[0] !== '/') url = '/' + url;\n  if (Object.prototype.toString.call(query) === '[object Object]') {\n    const qs = Object.keys(query)\n      .map((key) => `${key}=${query[key]}`)\n      .join('&');\n    url += qs ? '?' + qs : '';\n  }\n  if (basename !== '/') url = basename + url;\n  if (url[0] !== '/') url = '/' + url;\n  return url;\n};\n\nexport const push = ({\n  path,\n  query,\n  basename,\n}: {\n  path: string;\n  query?: { [key: string]: string };\n  basename?: string;\n}) => {\n  if (!basename) basename = RouterConfig.basename || '/';\n\n  let url: string | null = null;\n  if (validURL(path)) {\n    url = /(^https?:)|(^\\/\\/)/.test(path) ? path : `//${path}`;\n  } else {\n    url = handlerParams(path, query!, basename);\n  }\n  // \u4E0D\u4FDD\u7559\u4E4B\u524Dhistory.state\u7684\u72B6\u6001\u4F1A\u5BFC\u81F4vue3\u4F9D\u8D56state\u7684\u60C5\u51B5\u65E0\u6CD5\u6B63\u5E38\u6E32\u67D3\u9875\u9762\n  history.pushState(\n    { [__GARFISH_ROUTER_UPDATE_FLAG__]: true, ...history.state },\n    '',\n    url,\n  );\n};\n\nexport const replace = ({\n  path,\n  query,\n  basename,\n}: {\n  path: string;\n  query?: { [key: string]: string };\n  basename?: string;\n}) => {\n  if (!basename) basename = RouterConfig.basename || '/';\n\n  let url: string | null = null;\n  if (validURL(path)) {\n    url = /^(https?:)(\\/\\/)/.test(path) ? path : `//${path}`;\n  } else {\n    url = handlerParams(path, query!, basename);\n  }\n  history.replaceState(\n    { [__GARFISH_ROUTER_UPDATE_FLAG__]: true, ...history.state },\n    '',\n    url,\n  );\n};\n", "import { parseQuery, getAppRootPath, getPath } from './utils/urlUt';\nimport { callCapturedEventListeners } from './utils/navEvent';\nimport { asyncForEach, toMiddleWare } from './utils';\nimport {\n  RouterConfig,\n  setRouterConfig,\n  RouterInfo,\n  __GARFISH_ROUTER_UPDATE_FLAG__,\n  __GARFISH_ROUTER_FLAG__,\n  __GARFISH_BEFORE_ROUTER_EVENT__,\n} from './config';\n\n// Inspection application is activated\nconst hasActive = (activeWhen: any, path: string) => {\n  if (typeof activeWhen === 'string') {\n    if (activeWhen[0] !== '/') activeWhen = `/${activeWhen}`;\n    // Set to the root path must be congruent\n    if (activeWhen === '/' && path === activeWhen) return true;\n\n    const activeWhenArr = activeWhen.split('/');\n    const pathArr = path.split('/');\n    let flag: boolean = true;\n    activeWhenArr.forEach((pathItem: string, index: number) => {\n      if (pathItem && pathItem !== pathArr[index]) {\n        flag = false;\n      }\n    });\n    return flag;\n  } else {\n    return activeWhen(path);\n  }\n};\n\n// Overloading to specify the routing\n// 1. Applications for current needs to be destroyed\n// 2. Gets the current need to activate the application\n// 3. To acquire new need to activate the application\n// 4. Trigger function beforeEach, trigger in front of the destroyed all applications\n// 5. Trigger the need to destroy deactive function of application\n// 6. If there is no need to activate the application, by default, triggering popstate application component view child to update\nexport const linkTo = async ({\n  toRouterInfo,\n  fromRouterInfo,\n  eventType,\n}: {\n  toRouterInfo: RouterInfo;\n  fromRouterInfo: RouterInfo;\n  eventType: keyof History | 'popstate';\n}) => {\n  const {\n    current,\n    apps,\n    deactive,\n    active,\n    notMatch,\n    beforeEach,\n    afterEach,\n    autoRefreshApp,\n  } = RouterConfig;\n\n  const deactiveApps = current!.matched.filter(\n    (appInfo) =>\n      !hasActive(\n        appInfo.activeWhen,\n        getPath(appInfo.basename, location.pathname),\n      ),\n  );\n\n  // Activate the corresponding application\n  const activeApps = apps.filter((appInfo) => {\n    return hasActive(\n      appInfo.activeWhen,\n      getPath(appInfo.basename, location.pathname),\n    );\n  });\n\n  const needToActive = activeApps.filter(({ name }) => {\n    return !current!.matched.some(({ name: cName }) => name === cName);\n  });\n\n  // router infos\n  const to = {\n    ...toRouterInfo,\n    matched: needToActive,\n  };\n\n  const from = {\n    ...fromRouterInfo,\n    matched: deactiveApps,\n  };\n\n  await toMiddleWare(to, from, beforeEach!);\n\n  // Pause the current application of active state\n  if (current!.matched.length > 0) {\n    await asyncForEach(\n      deactiveApps,\n      async (appInfo) =>\n        await deactive(appInfo, getPath(appInfo.basename, location.pathname)),\n    );\n  }\n\n  setRouterConfig({\n    current: {\n      path: getPath(RouterConfig.basename!),\n      fullPath: location.pathname,\n      matched: activeApps,\n      state: history.state,\n      query: parseQuery(location.search),\n    },\n  });\n\n  // Within the application routing jump, by collecting the routing function for processing.\n  // Filtering gar-router popstate hijacking of the router\n  // In the switch back and forth in the application is provided through routing push method would trigger application updates\n  // application will refresh when autoRefresh configuration to true\n  const curState = window.history.state || {};\n  if (\n    eventType !== 'popstate' &&\n    (curState[__GARFISH_ROUTER_UPDATE_FLAG__] || autoRefreshApp)\n  ) {\n    callCapturedEventListeners(eventType);\n  }\n\n  await asyncForEach(needToActive, async (appInfo) => {\n    // Function using matches character and routing using string matching characters\n    const appRootPath = getAppRootPath(appInfo);\n    await active(appInfo, appRootPath);\n  });\n\n  if (activeApps.length === 0 && notMatch) notMatch(location.pathname);\n\n  await toMiddleWare(to, from, afterEach!);\n};\n", "import { getPath, parseQuery } from './utils/urlUt';\nimport { createEvent } from './utils';\nimport {\n  RouterConfig,\n  __GARFISH_ROUTER_UPDATE_FLAG__,\n  __GARFISH_ROUTER_FLAG__,\n  __GARFISH_BEFORE_ROUTER_EVENT__,\n} from './config';\nimport CustomEvent from './utils/customEvent';\nimport { linkTo } from './linkTo';\n\nexport const normalAgent = () => {\n  // By identifying whether have finished listening, if finished listening, listening to the routing changes do not need to hijack the original event\n  // Support nested scene\n  const addRouterListener = function () {\n    window.addEventListener(__GARFISH_BEFORE_ROUTER_EVENT__, function (env) {\n      RouterConfig.routerChange && RouterConfig.routerChange(location.pathname);\n      linkTo((env as any).detail);\n    });\n  };\n\n  if (!window[__GARFISH_ROUTER_FLAG__]) {\n    // Listen for pushState and replaceState, call linkTo, processing, listen back\n    // Rewrite the history API method, triggering events in the call\n\n    const rewrite = function (type: keyof History) {\n      const hapi = history[type];\n      return function (this: History) {\n        const urlBefore = window.location.pathname + window.location.hash;\n        const stateBefore = history?.state;\n        const res = hapi.apply(this, arguments);\n        const urlAfter = window.location.pathname + window.location.hash;\n        const stateAfter = history?.state;\n\n        const e = createEvent(type);\n        (e as any).arguments = arguments;\n\n        if (\n          urlBefore !== urlAfter ||\n          JSON.stringify(stateBefore) !== JSON.stringify(stateAfter)\n        ) {\n          window.dispatchEvent(\n            new CustomEvent(__GARFISH_BEFORE_ROUTER_EVENT__, {\n              detail: {\n                toRouterInfo: {\n                  fullPath: urlAfter,\n                  query: parseQuery(location.search),\n                  path: getPath(RouterConfig.basename!, urlAfter),\n                  state: stateAfter,\n                },\n                fromRouterInfo: {\n                  fullPath: urlBefore,\n                  query: parseQuery(location.search),\n                  path: getPath(RouterConfig.basename!, urlBefore),\n                  state: stateBefore,\n                },\n                eventType: type,\n              },\n            }),\n          );\n        }\n        // window.dispatchEvent(e);\n        return res;\n      };\n    };\n\n    history.pushState = rewrite('pushState');\n    history.replaceState = rewrite('replaceState');\n\n    // Before the collection application sub routing, forward backward routing updates between child application\n    window.addEventListener(\n      'popstate',\n      function (event) {\n        // Stop trigger collection function, fire again match rendering\n        if (event && typeof event === 'object' && (event as any).garfish)\n          return;\n        if (history.state && typeof history.state === 'object')\n          delete history.state[__GARFISH_ROUTER_UPDATE_FLAG__];\n        window.dispatchEvent(\n          new CustomEvent(__GARFISH_BEFORE_ROUTER_EVENT__, {\n            detail: {\n              toRouterInfo: {\n                fullPath: location.pathname,\n                query: parseQuery(location.search),\n                path: getPath(RouterConfig.basename!),\n              },\n              fromRouterInfo: {\n                fullPath: RouterConfig.current!.fullPath,\n                path: getPath(\n                  RouterConfig.basename!,\n                  RouterConfig.current!.path,\n                ),\n                query: RouterConfig.current!.query,\n              },\n              eventType: 'popstate',\n            },\n          }),\n        );\n      },\n      false,\n    );\n\n    window[__GARFISH_ROUTER_FLAG__] = true;\n  }\n  addRouterListener();\n};\n\nexport const initRedirect = () => {\n  linkTo({\n    toRouterInfo: {\n      fullPath: location.pathname,\n      path: getPath(RouterConfig.basename!),\n      query: parseQuery(location.search),\n      state: history.state,\n    },\n    fromRouterInfo: {\n      fullPath: '/',\n      path: '/',\n      query: {},\n      state: {},\n    },\n    eventType: 'pushState',\n  });\n};\n\nexport const listen = () => {\n  normalAgent();\n  initRedirect();\n};\n", "import { interfaces } from '@garfish/core';\nimport { listen } from './agentRouter';\nimport {\n  setRouterConfig,\n  RouterConfig,\n  set as RouterSet,\n  Options,\n  RouterHook,\n  RouterChange,\n} from './config';\n\nimport { push, replace } from './utils/navEvent';\n\nexport { push, replace } from './utils/navEvent';\n\nexport const beforeEach = (hook: RouterHook) => {\n  RouterSet('beforeEach', hook);\n};\n\nexport const afterEach = (hook: RouterHook) => {\n  RouterSet('afterEach', hook);\n};\n\nexport const routerChange = (hook: RouterChange) => {\n  RouterSet('routerChange', hook);\n};\n\nexport const registerRouter = (Apps: Array<interfaces.AppInfo>) => {\n  const unregisterApps = Apps.filter(\n    (app) => !RouterConfig.apps.some((item) => app.name === item.name),\n  );\n  RouterSet('apps', RouterConfig.apps.concat(unregisterApps));\n};\n\n/**\n * 1.\u6CE8\u518C\u5B50\u5E94\u7528\n * 2.\u5BF9\u5E94\u5B50\u5E94\u7528\u6FC0\u6D3B\uFF0C\u89E6\u53D1\u6FC0\u6D3B\u56DE\u8C03\n * @param Options\n */\nexport const listenRouterAndReDirect = ({\n  apps,\n  basename = '/',\n  autoRefreshApp,\n  active,\n  deactive,\n  notMatch,\n  listening = true,\n}: Options) => {\n  // \u6CE8\u518C\u5B50\u5E94\u7528\u3001\u6CE8\u518C\u6FC0\u6D3B\u3001\u9500\u6BC1\u94A9\u5B50\n  registerRouter(apps);\n\n  // \u521D\u59CB\u5316\u4FE1\u606F\n  setRouterConfig({\n    basename,\n    autoRefreshApp,\n    // supportProxy: !!window.Proxy,\n    active,\n    deactive,\n    notMatch,\n    listening,\n  });\n\n  // \u5F00\u59CB\u76D1\u542C\u8DEF\u7531\u53D8\u5316\u89E6\u53D1\u3001\u5B50\u5E94\u7528\u66F4\u65B0\u3002\u91CD\u8F7D\u9ED8\u8BA4\u521D\u59CB\u5B50\u5E94\u7528\n  listen();\n};\n\nexport interface RouterInterface {\n  push: ({\n    path,\n    query,\n    basename,\n  }: {\n    path: string;\n    basename?: string;\n    query?: {\n      [key: string]: string;\n    };\n  }) => void;\n  replace: ({\n    path,\n    query,\n    basename,\n  }: {\n    path: string;\n    basename?: string;\n    query?: {\n      [key: string]: string;\n    };\n  }) => void;\n  beforeEach: (hook: RouterHook) => void;\n  afterEach: (hook: RouterHook) => void;\n  registerRouter: (\n    Apps: interfaces.AppInfo | Array<interfaces.AppInfo>,\n  ) => void;\n  routerChange: (hook: RouterChange) => void;\n  setRouterConfig: typeof setRouterConfig;\n  listenRouterAndReDirect: ({\n    apps,\n    basename,\n    autoRefreshApp,\n    active,\n    deactive,\n    notMatch,\n  }: Options) => void;\n  routerConfig: Options;\n}\n\nconst Router: RouterInterface = {\n  push,\n  replace,\n  beforeEach,\n  afterEach,\n  registerRouter,\n  routerChange,\n  listenRouterAndReDirect,\n  setRouterConfig,\n  routerConfig: RouterConfig,\n};\n\nexport { initRedirect } from './agentRouter';\n\n//eslint-disable-next-line\nexport default Router;\n", "import type { interfaces } from '@garfish/core';\nimport { createKey, routerLog } from '@garfish/utils';\nimport { RouterConfig } from './config';\nimport router, {\n  initRedirect,\n  RouterInterface,\n  listenRouterAndReDirect,\n} from './context';\n\ndeclare module '@garfish/core' {\n  export default interface Garfish {\n    router: RouterInterface;\n    apps: Record<string, interfaces.App>;\n  }\n\n  export namespace interfaces {\n    export interface Config {\n      autoRefreshApp?: boolean;\n      onNotMatchRouter?: (path: string) => Promise<void> | void;\n    }\n\n    export interface AppInfo {\n      activeWhen?: string | ((path: string) => boolean); // \u624B\u52A8\u52A0\u8F7D\uFF0C\u53EF\u4E0D\u586B\u5199\u8DEF\u7531\n      active?: (appInfo: AppInfo, rootPath: string) => void;\n      deactive?: (appInfo: AppInfo, rootPath: string) => void;\n      rootPath?: string;\n      basename?: string;\n    }\n  }\n}\n\nexport type { RouterInterface } from './context';\n\ninterface Options {\n  autoRefreshApp?: boolean;\n  onNotMatchRouter?: (path: string) => Promise<void> | void;\n}\n\nexport function GarfishRouter(_args?: Options) {\n  return function (Garfish: interfaces.Garfish): interfaces.Plugin {\n    Garfish.apps = {};\n    Garfish.router = router;\n\n    return {\n      name: 'router',\n      version: '1.12.0',\n\n      bootstrap(options: interfaces.Options) {\n        let activeApp: null | string = null;\n        const unmounts: Record<string, Function> = {};\n        const { basename } = options;\n        const { autoRefreshApp = true, onNotMatchRouter = () => null } =\n          Garfish.options;\n\n        async function active(\n          appInfo: interfaces.AppInfo,\n          rootPath: string = '/',\n        ) {\n          routerLog(`${appInfo.name} active`, {\n            appInfo,\n            rootPath,\n            listening: RouterConfig.listening,\n          });\n\n          // In the listening state, trigger the rendering of the application\n          if (!RouterConfig.listening) return;\n\n          const { name, active, cache = true } = appInfo;\n          if (active) return active(appInfo, rootPath);\n          appInfo.rootPath = rootPath;\n\n          const currentApp = (activeApp = createKey());\n          const app = await Garfish.loadApp(appInfo.name, {\n            cache,\n            basename: rootPath,\n            entry: appInfo.entry,\n            domGetter: appInfo.domGetter,\n          });\n\n          if (app) {\n            app.appInfo.basename = rootPath;\n\n            const call = async (app: interfaces.App, isRender: boolean) => {\n              if (!app) return;\n              const isDes = cache && app.mounted;\n              if (isRender) {\n                return await app[isDes ? 'show' : 'mount']();\n              } else {\n                return app[isDes ? 'hide' : 'unmount']();\n              }\n            };\n\n            Garfish.apps[name] = app;\n            unmounts[name] = () => {\n              // Destroy the application during rendering and discard the application instance\n              if (app.mounting) {\n                delete Garfish.cacheApps[name];\n              }\n              call(app, false);\n            };\n\n            if (currentApp === activeApp) {\n              await call(app, true);\n            }\n          }\n        }\n\n        async function deactive(appInfo: interfaces.AppInfo, rootPath: string) {\n          routerLog(`${appInfo.name} deactive`, {\n            appInfo,\n            rootPath,\n          });\n\n          activeApp = null;\n          const { name, deactive } = appInfo;\n          if (deactive) return deactive(appInfo, rootPath);\n\n          const unmount = unmounts[name];\n          unmount && unmount();\n          delete Garfish.apps[name];\n\n          // Nested scene to remove the current application of nested data\n          // To avoid the main application prior to application\n          const needToDeleteApps = router.routerConfig.apps.filter((app) => {\n            if (appInfo.rootPath === app.basename) return true;\n          });\n          if (needToDeleteApps.length > 0) {\n            needToDeleteApps.forEach((app) => {\n              delete Garfish.appInfos[app.name];\n              delete Garfish.cacheApps[app.name];\n            });\n            router.setRouterConfig({\n              apps: router.routerConfig.apps.filter((app) => {\n                return !needToDeleteApps.some(\n                  (needDelete) => app.name === needDelete.name,\n                );\n              }),\n            });\n          }\n        }\n\n        const apps = Object.values(Garfish.appInfos);\n\n        const appList = apps.filter((app) => {\n          if (!app.basename) app.basename = basename;\n          return !!app.activeWhen;\n        }) as Array<Required<interfaces.AppInfo>>;\n\n        const listenOptions = {\n          basename,\n          active,\n          deactive,\n          autoRefreshApp,\n          notMatch: onNotMatchRouter,\n          apps: appList,\n          listening: true,\n        };\n        routerLog('listenRouterAndReDirect', listenOptions);\n        listenRouterAndReDirect(listenOptions);\n      },\n\n      registerApp(appInfos) {\n        const appList = Object.values(appInfos);\n        // @ts-ignore\n        router.registerRouter(appList.filter((app) => !!app.activeWhen));\n        // After completion of the registration application, trigger application mount\n        // Has been running after adding routing to trigger the redirection\n        if (!Garfish.running) return;\n        routerLog('registerApp initRedirect', appInfos);\n        initRedirect();\n      },\n    };\n  };\n}\n", "export const GARFISH_NAMESPACE_PREFIX = '__Garfish__';\nexport const GARFISH_OPTIMIZE_NAME = '__garfish_optimize__';\nexport const __proxyNode__ = Symbol.for('garfish.proxyNode');\nexport const __domWrapper__ = Symbol.for('garfish.domWrapper');\nexport const __windowBind__ = Symbol.for('garfish.windowBind');\nexport const __sandboxMap__ = Symbol.for('garfish.sandboxMap');\nexport const __documentBind__ = Symbol.for('garfish.documentBind');\nexport const __garfishGlobal__ = Symbol.for('garfish.globalObject');\nexport const __elementSandboxTag__ = Symbol.for('garfish.elementSandboxTag');\n", "import { hasOwn, makeMap, nextTick } from '@garfish/utils';\nimport { Sandbox } from './sandbox';\nimport { FakeWindow } from './types';\nimport {\n  __proxyNode__,\n  __sandboxMap__,\n  __elementSandboxTag__,\n} from './symbolTypes';\n\n// https://tc39.es/ecma262/#sec-function-properties-of-the-global-object\nconst esGlobalMethods =\n  // Function properties of the global object // Function properties of the global object\n  (\n    'eval,isFinite,isNaN,parseFloat,parseInt,' +\n    // URL handling functions\n    'decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,' +\n    // Constructor properties of the global object\n    'Array,ArrayBuffer,BigInt,BigInt64Array,BigUint64Array,Boolean,DataView,Date,Error,EvalError,' +\n    'FinalizationRegistry,Float32Array,Float64Array,Function,Int8Array,Int16Array,Int32Array,Map,Number,' +\n    'Object,Promise,Proxy,RangeError,ReferenceError,RegExp,Set,SharedArrayBuffer,String,Symbol,SyntaxError,' +\n    'TypeError,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,URIError,WeakMap,WeakRef,WeakSet,' +\n    // Other Properties of the Global Object\n    'Atomics,JSON,Math,Reflect,'\n  ).split(',');\n\nconst nativeCodeMethods = 'hasOwnProperty,'.split(',');\n\nexport const isEsGlobalMethods = makeMap(esGlobalMethods);\nexport const isNativeCodeMethods = makeMap(nativeCodeMethods);\n\n// Need to optimize, avoid from the with\n// Can't filter document, eval keywords, such as document in handling parentNode useful\nexport const optimizeMethods = [...esGlobalMethods].filter((v) => v !== 'eval');\n\n// The sandbox may be used alone, to ensure that the `sandboxMap` is globally unique,\n// because we will only rewrite `appendChild` once\nlet sandboxList: Map<number, Sandbox> = new Map();\nif (!(window as FakeWindow)[__sandboxMap__]) {\n  (window as FakeWindow)[__sandboxMap__] = sandboxList;\n} else {\n  sandboxList = (window as FakeWindow)[__sandboxMap__];\n}\n\nexport const sandboxMap = {\n  sandboxMap: sandboxList,\n\n  get(element: Element): Sandbox | undefined {\n    if (!element) return;\n    const sandboxId = element[__elementSandboxTag__];\n    if (typeof sandboxId !== 'number') return;\n    return this.sandboxMap.get(sandboxId);\n  },\n\n  setElementTag(element: Element, sandbox: Sandbox) {\n    if (!element) return;\n    element[__elementSandboxTag__] = sandbox.id;\n  },\n\n  set(sandbox: Sandbox) {\n    if (this.sandboxMap.get(sandbox.id)) return;\n    this.sandboxMap.set(sandbox.id, sandbox);\n  },\n\n  del(sandbox: Sandbox) {\n    this.sandboxMap.delete(sandbox.id);\n  },\n};\n\nexport function handlerParams(args: IArguments | Array<any>) {\n  args = Array.isArray(args) ? args : Array.from(args);\n  return args.map((v) => {\n    return v && v[__proxyNode__] ? v[__proxyNode__] : v;\n  });\n}\n\n// Container node, because it changes all the time, take it as you use it\nexport function rootElm(sandbox: Sandbox) {\n  const container = sandbox && sandbox.options.el;\n  return container && container();\n}\n\nexport function isInIframe() {\n  return window?.parent?.__GARFISH__ !== window?.__GARFISH__;\n}\n\n// Copy \"window\" and \"document\"\nexport function createFakeObject(\n  target: Record<PropertyKey, any>,\n  filter?: (key: PropertyKey) => boolean,\n  isWritable?: (key: PropertyKey) => boolean,\n) {\n  const fakeObject = {};\n  const propertyMap = {};\n  const storageBox = Object.create(null); // Store changed value\n  const propertyNames = Object.getOwnPropertyNames(target);\n  const def = (p: string) => {\n    const descriptor = Object.getOwnPropertyDescriptor(target, p);\n\n    if (descriptor?.configurable) {\n      const hasGetter = hasOwn(descriptor, 'get');\n      const hasSetter = hasOwn(descriptor, 'set');\n      const canWritable = typeof isWritable === 'function' && isWritable(p);\n\n      if (hasGetter) {\n        // prettier-ignore\n        descriptor.get = () => hasOwn(storageBox, p)\n          ? storageBox[p]\n          : target[p];\n      }\n      if (hasSetter) {\n        descriptor.set = (val) => {\n          storageBox[p] = val;\n          return true;\n        };\n      }\n      if (canWritable) {\n        if (descriptor.writable === false) {\n          descriptor.writable = true;\n        } else if (hasGetter) {\n          descriptor.set = (val) => {\n            storageBox[p] = val;\n            return true;\n          };\n        }\n      }\n      Object.defineProperty(fakeObject, p, Object.freeze(descriptor));\n    }\n  };\n  propertyNames.forEach((p) => {\n    propertyMap[p] = true;\n    typeof filter === 'function' ? !filter(p) && def(p) : def(p);\n  });\n  // \"prop\" maybe in prototype chain\n  for (const prop in target) {\n    !propertyMap[prop] && def(prop);\n  }\n  return fakeObject as any;\n}\n\nlet setting = true;\nexport function microTaskHtmlProxyDocument(proxyDocument) {\n  // The HTML parent node into agent for the document\n  // In micro tasks replace primary node\n  const html = document.children[0];\n  if (html && html.parentNode !== proxyDocument) {\n    Object.defineProperty(html, 'parentNode', {\n      value: proxyDocument,\n      configurable: true,\n    });\n\n    if (setting) {\n      setting = false;\n      // Do not use micro tasks, Element will appear in the task placed in nextTick after node\n      nextTick(() => {\n        setting = true;\n        Object.defineProperty(html, 'parentNode', {\n          value: document,\n          configurable: true,\n        });\n      });\n    }\n  }\n}\n\nexport function isStyledComponentsLike(element: HTMLStyleElement) {\n  // A styled-components liked element has no textContent but keep the rules in its sheet.cssRules.\n  return (\n    element instanceof HTMLStyleElement &&\n    !element.textContent &&\n    element.sheet?.cssRules.length\n  );\n}\n", "import { warn, makeMap, isObject } from '@garfish/utils';\nimport { handlerParams } from '../utils';\n\nexport function isDataDescriptor(desc?: PropertyDescriptor) {\n  if (desc === undefined) return false;\n  return 'value' in desc || 'writable' in desc;\n}\n\nexport function isAccessorDescriptor(desc?: PropertyDescriptor) {\n  if (desc === undefined) return false;\n  return 'get' in desc || 'set' in desc;\n}\n\nexport function verifyGetterDescriptor(\n  target: any,\n  p: PropertyKey,\n  newValue: any,\n) {\n  const desc = Object.getOwnPropertyDescriptor(target, p);\n  // https://tc39.es/ecma262/#sec-proxy-object-internal-methods-and-internal-slots-get-p-receiver\n  if (desc !== undefined && desc.configurable === false) {\n    if (isDataDescriptor(desc) && desc.writable === false) {\n      // https://tc39.es/ecma262/#sec-object.is\n      if (!Object.is(newValue, desc.value)) {\n        if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n          // prettier-ignore\n          warn(`property \"${String(p)}\" is non-configurable and non-writable.`);\n        }\n        return 1;\n      }\n    } else if (isAccessorDescriptor(desc) && desc.get === undefined) {\n      return 2;\n    }\n  }\n  return 0;\n}\n\nexport function verifySetter(\n  proxyTarget: any,\n  target: any,\n  p: PropertyKey,\n  val: any,\n  receiver: any,\n) {\n  const verifyResult = verifySetterDescriptor(\n    // prettier-ignore\n    proxyTarget ? proxyTarget : (receiver || target),\n    p,\n    val,\n  );\n\n  let result;\n  if (verifyResult > 0) {\n    if (verifyResult === 1 || verifyResult === 2) result = false;\n    if (verifyResult === 3) result = true;\n  }\n\n  return result;\n}\n\nexport function verifySetterDescriptor(\n  target: any,\n  p: PropertyKey,\n  newValue: any,\n) {\n  const desc = Object.getOwnPropertyDescriptor(target, p);\n  // https://tc39.es/ecma262/#sec-proxy-object-internal-methods-and-internal-slots-set-p-v-receiver\n  if (desc !== undefined && desc.configurable === false) {\n    if (isDataDescriptor(desc) && desc.writable === false) {\n      // https://tc39.es/ecma262/#sec-object.is\n      if (!Object.is(newValue, desc.value)) {\n        if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n          // prettier-ignore\n          warn(`property \"${String(p)}\" is non-configurable and non-writable.`);\n        }\n        return 1;\n      } else {\n        return 3;\n      }\n    } else if (isAccessorDescriptor(desc) && desc.set === undefined) {\n      return 2;\n    }\n  }\n  return 0;\n}\n\nfunction safeToString(thing) {\n  try {\n    return thing.toString();\n  } catch (e) {\n    return '[toString failed]';\n  }\n}\n\nexport function isConstructor(fn: () => void | FunctionConstructor) {\n  const fp = fn.prototype;\n  const hasConstructor =\n    fp && fp.constructor === fn && Object.getOwnPropertyNames(fp).length > 1;\n  const functionStr = !hasConstructor && safeToString(fn);\n\n  return (\n    hasConstructor ||\n    /^function\\s+[A-Z]/.test(functionStr) ||\n    /^class\\b/.test(functionStr)\n  );\n}\n\nconst buildInProps = makeMap([\n  'length',\n  'caller',\n  'callee',\n  'arguments',\n  'prototype',\n  Symbol.hasInstance,\n]);\n\nfunction transferProps(o: Function, n: Function) {\n  for (const key of Reflect.ownKeys(o)) {\n    if (buildInProps(key)) continue;\n    const desc = Object.getOwnPropertyDescriptor(n, key);\n    if (desc && desc.writable) {\n      n[key] = o[key];\n    }\n  }\n}\n\n// 1. This points to the context of the fn target function\n// 2. Assure the goal after the bind function prototype method be replaced after the prototype method would not be affected\n// 3. Assure the objective function after the bind instanceof in line with expectations\n// 4. Ensure that bind after the objective function of normal static methods available\n// 5. After the bind after the objective function is new to instantiate, pointing to their own\nexport function bind(fn, context: any) {\n  const fNOP = function () {};\n  function bound(this: any) {\n    const args = handlerParams(arguments);\n    if (this instanceof bound) {\n      const obj = new fn(...args);\n      Object.setPrototypeOf(obj, bound.prototype);\n      return obj;\n    } else {\n      return fn.apply(context, args);\n    }\n  }\n\n  // Record origin function\n  bound.$native = fn;\n  transferProps(fn, bound);\n\n  if (fn.prototype) {\n    // `Function.prototype` doesn't have a prototype property\n    fNOP.prototype = fn.prototype;\n  }\n  bound.prototype = new fNOP();\n\n  // fix \"instanceof\"\n  if (Symbol.hasInstance) {\n    Object.defineProperty(bound, Symbol.hasInstance, {\n      configurable: true,\n      value(instance) {\n        const op = fn.prototype;\n        return isObject(op) || typeof op === 'function'\n          ? instance instanceof fn\n          : false;\n      },\n    });\n  }\n  return bound;\n}\n", "import { hasOwn, makeMap } from '@garfish/utils';\nimport { verifySetter } from '../proxyInterceptor/shared';\n\n// Can't set to proxy history variable\nconst passedKey = makeMap(['scrollRestoration']);\n\nexport function historyModule() {\n  const proto = Object.getPrototypeOf(window.history) || History.prototype;\n  const fakeHistory = Object.create(proto);\n\n  const proxyHistory = new Proxy(fakeHistory, {\n    get(target: any, p: PropertyKey) {\n      const value = hasOwn(target, p) ? target[p] : window.history[p];\n      return typeof value === 'function' ? value.bind(window.history) : value;\n    },\n\n    set(target: any, p: PropertyKey, value: any, receiver: any) {\n      const isPassKey = typeof p === 'string' && passedKey(p);\n      const verifySetterResult = verifySetter(\n        isPassKey ? history : null,\n        target,\n        p,\n        value,\n        receiver,\n      );\n      if (verifySetterResult !== undefined) {\n        return verifySetterResult;\n      } else {\n        return isPassKey\n          ? Reflect.set(history, p, value)\n          : Reflect.set(target, p, value, receiver);\n      }\n    },\n    // \"__proto__\" is not a standard attribute, it is temporarily not compatible\n    getPrototypeOf() {\n      return fakeHistory;\n    },\n  });\n\n  const fakeHistoryCtor = function History() {\n    throw new TypeError('Illegal constructor');\n  };\n  // Avoid side effects of prototype chain being changed\n  fakeHistoryCtor.prototype = fakeHistory;\n  fakeHistoryCtor.prototype.constructor = fakeHistoryCtor;\n\n  return {\n    override: {\n      history: proxyHistory,\n      History: fakeHistoryCtor,\n    },\n  };\n}\n", "import {\n  hasOwn,\n  isPromise,\n  isAbsolute,\n  transformUrl,\n  toWsProtocol,\n} from '@garfish/utils';\nimport { Sandbox } from '../sandbox';\n\nexport function networkModule(sandbox: Sandbox) {\n  const baseUrl = sandbox.options.baseUrl;\n  const wsSet = new Set<fakeWebSocket>();\n  const xhrSet = new Set<fakeXMLHttpRequest>();\n  const fetchSet = new Set<AbortController>();\n  const needFix = (url) =>\n    sandbox.options.fixBaseUrl &&\n    baseUrl &&\n    typeof url === 'string' &&\n    !isAbsolute(url);\n\n  class fakeXMLHttpRequest extends XMLHttpRequest {\n    constructor() {\n      super();\n      xhrSet.add(this);\n    }\n\n    open() {\n      // Async request\n      if (arguments[2] === false) {\n        xhrSet.delete(this);\n      }\n      if (needFix(arguments[1])) {\n        arguments[1] = baseUrl\n          ? transformUrl(baseUrl, arguments[1])\n          : arguments[1];\n      }\n\n      const url = arguments[1];\n\n      if(sandbox.options.addSourceList){\n        sandbox.options.addSourceList({\n          tagName: 'xmlhttprequest',\n          url,\n        });\n      }\n      return super.open.apply(this, arguments);\n    }\n\n    abort() {\n      xhrSet.delete(this);\n      return super.abort.apply(this, arguments);\n    }\n  }\n\n  class fakeWebSocket extends WebSocket {\n    constructor(url, protocols?: string | string[]) {\n      if (needFix(url) && baseUrl) {\n        const baseWsUrl = toWsProtocol(baseUrl);\n        url = transformUrl(baseWsUrl, arguments[1]);\n      }\n      super(url, protocols);\n      wsSet.add(this);\n    }\n\n    close() {\n      wsSet.delete(this);\n      return super.close.apply(this, arguments);\n    }\n  }\n\n  // `fetch` is not constructor\n  const fakeFetch = (input, options: RequestInit = {}) => {\n    if (needFix(input) && baseUrl) {\n      input = transformUrl(baseUrl, input);\n    }\n    if(sandbox.options.addSourceList){\n      sandbox.options.addSourceList({ tagName: 'fetch', url: input });\n    }\n    let controller;\n    if (!hasOwn(options, 'signal') && window.AbortController) {\n      controller = new window.AbortController();\n      fetchSet.add(controller);\n      options.signal = controller.signal;\n    }\n    const result = window.fetch(input, options);\n    return controller && isPromise(result)\n      ? result.finally(() => fetchSet.delete(controller))\n      : result;\n  };\n\n  return {\n    override: {\n      WebSocket: fakeWebSocket as any,\n      XMLHttpRequest: fakeXMLHttpRequest as any,\n      fetch: fakeFetch,\n    },\n\n    recover() {\n      wsSet.forEach((ws) => {\n        if (typeof ws.close === 'function') ws.close();\n      });\n      xhrSet.forEach((xhr) => {\n        if (typeof xhr.abort === 'function') xhr.abort();\n      });\n      fetchSet.forEach((ctor) => {\n        if (typeof ctor.abort === 'function') ctor.abort();\n      });\n\n      wsSet.clear();\n      xhrSet.clear();\n      fetchSet.clear();\n    },\n  };\n}\n", "import {\n  hasOwn,\n  makeMap,\n  isObject,\n  findTarget,\n  safari13Deal,\n  __MockBody__,\n  __MockHead__,\n} from '@garfish/utils';\nimport { Sandbox } from '../sandbox';\nimport { rootElm, sandboxMap } from '../utils';\nimport { __documentBind__ } from '../symbolTypes';\nimport { bind, verifyGetterDescriptor, verifySetterDescriptor } from './shared';\n\nconst passedKey = makeMap(['title', 'cookie', 'onselectstart', 'ondragstart']);\n\nconst queryFunctions = makeMap([\n  'querySelector',\n  'querySelectorAll',\n  'getElementById',\n  'getElementsByTagName',\n  'getElementsByTagNameNS',\n  'getElementsByClassName',\n]);\n\n// document proxy getter\nexport function createGetter(sandbox: Sandbox) {\n  return (target: any, p: PropertyKey, receiver?: any) => {\n    if (p === 'activeElement') {\n      return Reflect.get(document, p);\n    }\n\n    const rootNode = rootElm(sandbox);\n    const strictIsolation = sandbox.options.strictIsolation;\n    const value = hasOwn(target, p)\n      ? Reflect.get(target, p, receiver)\n      : Reflect.get(document, p);\n\n    // Provide hooks for users to return specific values themselves\n    const hooksRes = sandbox.hooks.lifecycle.documentGetter.emit({\n      value,\n      rootNode,\n      propName: p,\n      proxyDocument: target,\n      customValue: null,\n    });\n\n    if (hooksRes.customValue) {\n      return hooksRes.customValue;\n    }\n\n    const setSandboxRef = (el) => {\n      if (isObject(el)) {\n        sandboxMap.setElementTag(el, sandbox);\n        if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n          el.__SANDBOX__ = true;\n        }\n      }\n      return el;\n    };\n\n    if (rootNode) {\n      if (p === 'createElement') {\n        return function (tagName, options) {\n          const el = value.call(document, tagName, options);\n          return setSandboxRef(el);\n        };\n      } else if (p === 'createTextNode') {\n        return function (data) {\n          const el = value.call(document, data);\n          return setSandboxRef(el);\n        };\n      } else if (p === 'head') {\n        return findTarget(rootNode, ['head', `div[${__MockHead__}]`]) || value;\n      }\n\n      // rootNode is a Shadow dom\n      if (strictIsolation) {\n        if (p === 'body') {\n          // When the node is inserted, if it is a pop-up scene,\n          // it needs to be placed globally, so it is not placed outside by default.\n          return findTarget(rootNode, ['body', `div[${__MockBody__}]`]);\n        } else if (queryFunctions(p)) {\n          return p === 'getElementById'\n            ? (id) => rootNode.querySelector(`#${id}`)\n            : rootNode[p].bind(rootNode);\n        }\n      }\n    }\n\n    if (typeof value === 'function') {\n      let newValue = hasOwn(value, __documentBind__)\n        ? value[__documentBind__]\n        : null;\n      if (!newValue) newValue = bind(value, document);\n\n      const verifyResult = verifyGetterDescriptor(target, p, newValue);\n      if (verifyResult > 0) {\n        if (verifyResult === 1) return value;\n        if (verifyResult === 2) return undefined;\n      }\n      value[__documentBind__] = newValue;\n      return newValue;\n    }\n    return value;\n  };\n}\n\nconst safariProxyDocumentDealHandler = safari13Deal();\n\n// document proxy setter\nexport function createSetter(sandbox) {\n  return (target: any, p: PropertyKey, value: any, receiver: any) => {\n    const rootNode = rootElm(sandbox);\n    const verifyResult = verifySetterDescriptor(\n      // prettier-ignore\n      typeof p === 'string' && passedKey(p)\n        ? document\n        : (receiver || target),\n      p,\n      value,\n    );\n    if (verifyResult > 0) {\n      if (verifyResult === 1 || verifyResult === 2) return false;\n      if (verifyResult === 3) return true;\n    }\n\n    // Application area of the ban on selected, if users want to ban the global need to set on the main application\n    if (p === 'onselectstart' || p === 'ondragstart') {\n      if (rootNode) {\n        return Reflect.set(rootNode, p, value);\n      } else {\n        return Reflect.set(document, p, value);\n      }\n    }\n\n    if (typeof p === 'string' && passedKey(p)) {\n      return Reflect.set(document, p, value);\n    } else {\n      safariProxyDocumentDealHandler.triggerSet();\n      return Reflect.set(target, p, value, receiver);\n    }\n  };\n}\n\n// document proxy defineProperty\nexport function createDefineProperty() {\n  return (target: any, p: PropertyKey, descriptor: PropertyDescriptor) => {\n    safariProxyDocumentDealHandler.handleDescriptor(descriptor);\n    return passedKey(p)\n      ? Reflect.defineProperty(document, p, descriptor)\n      : Reflect.defineProperty(target, p, descriptor);\n  };\n}\n\n// document proxy has\nexport function createHas() {\n  return (target: any, p: PropertyKey) => {\n    if (p === 'activeElement') return Reflect.has(document, p);\n    return hasOwn(target, p) || Reflect.has(document, p);\n  };\n}\n", "import { Sandbox } from '../sandbox';\nimport { __proxyNode__ } from '../symbolTypes';\nimport { createFakeObject, microTaskHtmlProxyDocument } from '../utils';\nimport {\n  createHas,\n  createGetter,\n  createSetter,\n  createDefineProperty,\n} from '../proxyInterceptor/document';\n\nexport const documentModule = (sandbox: Sandbox) => {\n  let proxyDocument = Object.create(document);\n  const getter = createGetter(sandbox);\n\n  const fakeDocument = createFakeObject(document);\n\n  const fakeDocumentProto = new Proxy(fakeDocument, {\n    get: (...args) => {\n      microTaskHtmlProxyDocument(proxyDocument);\n      return getter(...args);\n    },\n    has: createHas(),\n  });\n  \n\n  proxyDocument = new Proxy(\n    Object.create(fakeDocumentProto, {\n      currentScript: {\n        value: null,\n        writable: true,\n      },\n      [__proxyNode__]: {\n        writable: false,\n        configurable: false,\n        value: document,\n      },\n    }),\n    {\n      set: createSetter(sandbox),\n      defineProperty: createDefineProperty(),\n      getPrototypeOf () {\n        return HTMLDocument.prototype || Document.prototype;\n      },\n    },\n  );\n\n  return {\n    override: {\n      document: proxyDocument,\n    },\n  };\n};\n", "import { getType } from '@garfish/utils';\n\n// The logic of UIEvent is referenced from qiankun typography\n// https://github.com/umijs/qiankun/pull/593/files\n// TODO: fix normal mouse event instanceof MouseEvent === false\nexport class MouseEventPatch extends MouseEvent {\n  constructor(typeArg: string, mouseEventInit?: MouseEventInit) {\n    if (mouseEventInit && getType(mouseEventInit.view) === 'window') {\n      mouseEventInit.view = window;\n    }\n    super(typeArg, mouseEventInit);\n  }\n}\n\nexport function UiEventOverride() {\n  return {\n    override: {\n      MouseEvent: MouseEventPatch as any,\n    },\n  };\n}\n", "import { Sandbox } from '../sandbox';\nimport { GARFISH_NAMESPACE_PREFIX } from '../symbolTypes';\n\nexport class CusStorage {\n  prefix: string;\n  namespace: string;\n  rawStorage: Storage;\n\n  constructor(namespace: string, rawStorage: Storage) {\n    this.rawStorage = rawStorage;\n    this.namespace = namespace;\n    this.prefix = `${GARFISH_NAMESPACE_PREFIX}${namespace}__`;\n  }\n\n  get length() {\n    return this.getKeys().length;\n  }\n\n  private getKeys() {\n    return Object.keys(this.rawStorage).filter((key) =>\n      key.startsWith(this.prefix),\n    );\n  }\n\n  // Get the \"n\" key of the current namespace, you need to remove the prefix\n  key(n: number) {\n    const key = this.getKeys()[n];\n    return key ? key.substring(this.prefix.length) : null;\n  }\n\n  getItem(keyName: string) {\n    return this.rawStorage.getItem(`${this.prefix + keyName}`);\n  }\n\n  setItem(keyName: string, keyValue: string) {\n    this.rawStorage.setItem(`${this.prefix + keyName}`, keyValue);\n  }\n\n  removeItem(keyName: string) {\n    this.rawStorage.removeItem(`${this.prefix + keyName}`);\n  }\n\n  clear() {\n    this.getKeys().forEach((key) => {\n      this.rawStorage.removeItem(key);\n    });\n  }\n}\n\nexport function localStorageModule(sandbox: Sandbox) {\n  const namespace = sandbox.options.namespace;\n  return {\n    override: {\n      localStorage: new CusStorage(namespace, localStorage),\n      sessionStorage: new CusStorage(namespace, sessionStorage),\n    },\n  };\n}\n", "// import { filterAndWrapEventListener } from '@garfish/utils';\nimport { Sandbox } from '../sandbox';\n\ntype Opts = boolean | AddEventListenerOptions;\ntype Listener = EventListenerOrEventListenerObject;\n\nexport function listenerModule(_sandbox: Sandbox) {\n  const listeners = new Map<string, Listener[]>();\n  const rawAddEventListener = window.addEventListener;\n  const rawRemoveEventListener = window.removeEventListener;\n\n  function addListener(\n    this: any,\n    type: string,\n    listener: Listener,\n    options?: Opts,\n  ) {\n    const curListeners = listeners.get(type) || [];\n    listeners.set(type, [...curListeners, listener]);\n\n    // This has been revised\n    rawAddEventListener.call(\n      this,\n      type,\n      // filterAndWrapEventListener(\n      //   type,\n      //   listener,\n      //   _sandbox.options.sourceList.map((item) => item.url),\n      // ),\n      listener,\n      options,\n    );\n  }\n\n  function removeListener(\n    this: any,\n    type: string,\n    listener: Listener,\n    options?: boolean | EventListenerOptions,\n  ) {\n    const curListeners = listeners.get(type) || [];\n    const idx = curListeners.indexOf(listener);\n    if (idx !== -1) {\n      curListeners.splice(idx, 1);\n    }\n    listeners.set(type, [...curListeners]);\n    rawRemoveEventListener.call(this, type, listener, options);\n  }\n\n  const recover = () => {\n    listeners.forEach((listener, key) => {\n      listener.forEach((fn) => {\n        rawRemoveEventListener.call(window, key, fn);\n      });\n    });\n    listeners.clear();\n  };\n\n  return {\n    recover,\n    override: {\n      addEventListener: addListener.bind(window),\n      removeEventListener: removeListener.bind(window),\n    },\n    created(global: Sandbox['global']) {\n      const fakeDocument = global?.document;\n      if (fakeDocument) {\n        fakeDocument.addEventListener = addListener.bind(document);\n        fakeDocument.removeEventListener = removeListener.bind(document);\n      }\n    },\n  };\n}\n", "import { Sandbox } from '../sandbox';\n\nexport function observerModule(_sandbox: Sandbox) {\n  const observerSet = new Set<MutationObserver>();\n\n  class ProxyMutationObserver extends MutationObserver {\n    constructor(cb: MutationCallback) {\n      super(cb);\n      observerSet.add(this);\n    }\n  }\n\n  const recover = () => {\n    observerSet.forEach((observer) => {\n      if (typeof observer.disconnect === 'function') observer.disconnect();\n    });\n    observerSet.clear();\n  };\n\n  return {\n    recover,\n    override: {\n      MutationObserver: ProxyMutationObserver as Function,\n    },\n  };\n}\n", "const rawSetTimeout = window.setTimeout;\nconst rawClearTimeout = window.clearTimeout;\nconst rawSetInterval = window.setInterval;\nconst rawClearInterval = window.clearInterval;\n\nexport const timeoutModule = () => {\n  const timeout = new Set<number>();\n\n  const setTimeout = (handler: TimerHandler, ms?: number, ...args: any[]) => {\n    const timeoutId = rawSetTimeout(handler, ms, ...args);\n    timeout.add(timeoutId);\n    return timeoutId;\n  };\n\n  const clearTimeout = (timeoutId: number) => {\n    timeout.delete(timeoutId);\n    rawClearTimeout(timeoutId);\n  };\n\n  const recover = () => {\n    timeout.forEach((timeoutId) => {\n      rawClearTimeout(timeoutId);\n    });\n  };\n\n  return {\n    recover,\n    override: {\n      setTimeout,\n      clearTimeout,\n    },\n  };\n};\n\nexport const intervalModule = () => {\n  const timeout = new Set<number>();\n\n  const setInterval = (\n    callback: (...args: any[]) => void,\n    ms: number,\n    ...args: any[]\n  ) => {\n    const intervalId = rawSetInterval(callback, ms, ...args);\n    timeout.add(intervalId);\n    return intervalId;\n  };\n\n  const clearInterval = (intervalId: number) => {\n    timeout.delete(intervalId);\n    rawClearInterval(intervalId);\n  };\n\n  const recover = () => {\n    timeout.forEach((intervalId) => {\n      rawClearInterval(intervalId);\n    });\n  };\n\n  return {\n    recover,\n    override: {\n      setInterval,\n      clearInterval,\n      // webpack lazy use Promise\n      // Promise is polyfill\n      // polyfill Promise include Promise._setImmediate use setImmediate methods\n      // setImmediate polyfill postMessage as marco tasks\n      // postMessage callback judge event.source === window\n      // use setTimeout as setImmediate avoid judge fail\n      setImmediate: (fn) => setTimeout(fn, 0),\n    },\n  };\n};\n", "import { handlerParams } from '../utils';\n\nexport function injectHandlerParams() {\n  if (window.MutationObserver) {\n    const rawObserver = window.MutationObserver.prototype.observe;\n    MutationObserver.prototype.observe = function () {\n      return rawObserver.apply(this, handlerParams(arguments));\n    };\n  }\n\n  // in iframe not modify activeElement\n  const desc = Object.getOwnPropertyDescriptor(\n    window.Document.prototype,\n    'activeElement',\n  );\n  const rawActiveEl = desc && desc.get;\n  if (rawActiveEl) {\n    Object.defineProperty(window.Document.prototype, 'activeElement', {\n      get(...args) {\n        return rawActiveEl.apply(handlerParams([this])[0], handlerParams(args));\n      },\n    });\n  }\n}\n", "import { StyleManager, JavaScriptManager } from '@garfish/loader';\nimport {\n  def,\n  warn,\n  DOMApis,\n  makeMap,\n  isJsType,\n  isCssType,\n  safeWrapper,\n  findTarget,\n  __MockBody__,\n  __MockHead__,\n  transformUrl,\n  sourceListTags,\n  __REMOVE_NODE__,\n} from '@garfish/utils';\nimport { Sandbox } from '../sandbox';\nimport { rootElm, isStyledComponentsLike } from '../utils';\n\nconst isInsertMethod = makeMap(['insertBefore', 'insertAdjacentElement']);\n\nexport const rawElementMethods = Object.create(null);\n\nexport class DynamicNodeProcessor {\n  private el: any; // any Element\n  private tagName: string;\n  private sandbox: Sandbox;\n  private DOMApis: DOMApis;\n  private methodName: string;\n  private rootElement: Element | ShadowRoot | Document;\n  private nativeAppend = rawElementMethods['appendChild'];\n  private nativeRemove = rawElementMethods['removeChild'];\n\n  constructor(el, sandbox, methodName) {\n    this.el = el;\n    this.sandbox = sandbox;\n    this.methodName = methodName;\n    this.rootElement = rootElm(sandbox) || document;\n    this.DOMApis = new DOMApis(sandbox.global.document);\n    this.tagName = el.tagName ? el.tagName.toLowerCase() : '';\n  }\n\n  private is(tag: string) {\n    return this.tagName === tag;\n  }\n\n  private fixResourceNodeUrl(el: any) {\n    const baseUrl = this.sandbox.options.baseUrl;\n    if (baseUrl) {\n      const src = el.getAttribute('src');\n      const href = el.getAttribute('href');\n      src && (el.src = transformUrl(baseUrl, src));\n      href && (el.href = transformUrl(baseUrl, href));\n      const url = el.src || el.href;\n\n      if (url && this.sandbox.options.addSourceList) {\n        this.sandbox.options.addSourceList({\n          tagName: el.tagName,\n          url,\n        });\n      }\n    }\n  }\n\n  // Put it in the next macro task to ensure that the current synchronization script is executed\n  private dispatchEvent(type: string, errInfo?: ErrorEventInit) {\n    Promise.resolve().then(() => {\n      const isError = type === 'error';\n      let event: Event & { __byGarfish__?: boolean };\n\n      if (isError && errInfo) {\n        event = new ErrorEvent(type, {\n          ...errInfo,\n          message: errInfo.error.message,\n        });\n      } else {\n        event = new Event(type);\n      }\n      event.__byGarfish__ = true;\n      Object.defineProperty(event, 'target', { value: this.el });\n      this.el.dispatchEvent(event);\n      isError && window.dispatchEvent(event);\n    });\n  }\n\n  // Load dynamic link node\n  private addDynamicLinkNode(callback: (styleNode: HTMLStyleElement) => void) {\n    const { href, type } = this.el;\n\n    if (!type || isCssType({ src: href, type })) {\n      if (href) {\n        const { baseUrl, namespace, styleScopeId } = this.sandbox.options;\n        const fetchUrl = baseUrl ? transformUrl(baseUrl, href) : href;\n\n        this.sandbox.loader\n          .load<StyleManager>({\n            scope: namespace,\n            url: fetchUrl,\n            defaultContentType: type,\n          })\n          .then(({ resourceManager: styleManager }) => {\n            if (styleManager) {\n              styleManager.correctPath();\n              if (styleScopeId) {\n                styleManager.setScope({\n                  appName: namespace,\n                  rootElId: styleScopeId(),\n                });\n              }\n              callback(styleManager.renderAsStyleElement());\n            } else {\n              warn(\n                `Invalid resource type \"${type}\", \"${href}\" can't generate styleManager`,\n              );\n            }\n            this.dispatchEvent('load');\n          })\n          .catch((e) => {\n            (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && warn(e);\n            this.dispatchEvent('error', {\n              error: e,\n              filename: fetchUrl,\n            });\n          });\n      }\n    } else {\n      if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n        warn(`Invalid resource type \"${type}\", \"${href}\"`);\n      }\n    }\n    // To ensure the processing node to normal has been removed\n    const linkCommentNode = this.DOMApis.createLinkCommentNode(href) as Comment;\n    this.el[__REMOVE_NODE__] = () =>\n      this.DOMApis.removeElement(linkCommentNode);\n    return linkCommentNode;\n  }\n\n  // Load dynamic js script\n  private addDynamicScriptNode() {\n    const { src, type, crossOrigin } = this.el;\n    const isModule = type === 'module';\n    const code = this.el.textContent || this.el.text || '';\n\n    if (!type || isJsType({ src, type })) {\n      // The \"src\" higher priority\n      const { baseUrl, namespace } = this.sandbox.options;\n      if (src) {\n        const fetchUrl = baseUrl ? transformUrl(baseUrl, src) : src;\n        this.sandbox.loader\n          .load<JavaScriptManager>({\n            scope: namespace,\n            url: fetchUrl,\n            crossOrigin,\n            defaultContentType: type,\n          })\n          .then(\n            (manager) => {\n              if (manager.resourceManager) {\n                const {\n                  resourceManager: { url, scriptCode },\n                } = manager;\n                // It is necessary to ensure that the code execution error cannot trigger the `el.onerror` event\n                this.sandbox.execScript(scriptCode, {}, url, {\n                  isModule,\n                  noEntry: true,\n                  originScript: this.el,\n                });\n              } else {\n                warn(\n                  `Invalid resource type \"${type}\", \"${src}\" can't generate scriptManager`,\n                );\n              }\n              this.dispatchEvent('load');\n            },\n            (e) => {\n              (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && warn(e);\n              this.dispatchEvent('error', {\n                error: e,\n                filename: fetchUrl,\n              });\n            },\n          );\n      } else if (code) {\n        this.sandbox.execScript(code, {}, baseUrl, { noEntry: true, originScript: this.el, });\n      }\n      // To ensure the processing node to normal has been removed\n      const scriptCommentNode = this.DOMApis.createScriptCommentNode({\n        src,\n        code,\n      });\n      this.el[__REMOVE_NODE__] = () =>\n        this.DOMApis.removeElement(scriptCommentNode);\n      return scriptCommentNode;\n    }\n    return this.el;\n  }\n\n  // When append an empty link node and then add href attribute\n  private monitorChangesOfLinkNode() {\n    if (this.el.modifyFlag) return;\n\n    const mutator = new MutationObserver((mutations) => {\n      if (this.el.modifyFlag) return;\n      for (const { type, attributeName } of mutations) {\n        if (type === 'attributes') {\n          if (attributeName === 'rel' || attributeName === 'stylesheet') {\n            if (this.el.modifyFlag) return;\n            if (this.el.rel === 'stylesheet' && this.el.href) {\n              this.el.disabled = this.el.modifyFlag = true;\n              const commentNode = this.addDynamicLinkNode((styleNode) => {\n                commentNode.parentNode?.replaceChild(styleNode, commentNode);\n              });\n              this.el.parentNode?.replaceChild(commentNode, this.el);\n            }\n          }\n        }\n      }\n    });\n    // https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/disconnect\n    mutator.observe(this.el, { attributes: true });\n  }\n\n  private monitorChangesOfStyle() {\n    const { baseUrl, namespace, styleScopeId } = this.sandbox.options;\n    const rootElId = styleScopeId?.();\n\n    const modifyStyleCode = (styleCode: string | null) => {\n      if (styleCode) {\n        const manager = new StyleManager(styleCode);\n        manager.correctPath(baseUrl);\n        if (rootElId) {\n          manager.setScope({\n            rootElId,\n            appName: namespace,\n          });\n        }\n        styleCode = manager.transformCode(styleCode);\n      }\n      return styleCode;\n    };\n\n    const mutator = new MutationObserver((mutations) => {\n      for (const { type, target, addedNodes } of mutations) {\n        if (type === 'childList') {\n          const el = target as HTMLStyleElement;\n          if (isStyledComponentsLike(el) && el.sheet) {\n            const originAddRule = el.sheet.insertRule;\n            el.sheet.insertRule = function () {\n              arguments[0] = modifyStyleCode(arguments[0]);\n              return originAddRule.apply(this, arguments);\n            };\n          } else {\n            if (addedNodes[0]) {\n              addedNodes[0].textContent = modifyStyleCode(\n                addedNodes[0].textContent,\n              );\n            }\n          }\n        }\n      }\n    });\n    mutator.observe(this.el, { childList: true });\n  }\n\n  private findParentNodeInApp(parentNode: Element, defaultInsert?: string) {\n    if (parentNode === document.body) {\n      return findTarget(this.rootElement, [\n        'body',\n        `div[${__MockBody__}]`,\n      ]) as Element;\n    } else if (parentNode === document.head) {\n      return findTarget(this.rootElement, [\n        'head',\n        `div[${__MockHead__}]`,\n      ]) as Element;\n    }\n\n    // Add the location of the destination node is not a container to the container of the application\n    // Has not been added to the container, or cannot be searched through document in shadow dom\n    if (\n      this.rootElement.contains(parentNode) ||\n      !document.contains(parentNode)\n    ) {\n      return parentNode;\n    }\n\n    if (defaultInsert === 'head') {\n      return findTarget(this.rootElement, [\n        'head',\n        `div[${__MockHead__}]`,\n      ]) as Element;\n    } else if (defaultInsert === 'body') {\n      return findTarget(this.rootElement, [\n        'body',\n        `div[${__MockBody__}]`,\n      ]) as Element;\n    }\n    return parentNode;\n  }\n\n  append(context: Element, args: IArguments, originProcess: Function) {\n    let convertedNode;\n    let parentNode = context;\n    const { baseUrl, namespace, styleScopeId } = this.sandbox.options;\n\n    // Deal with some static resource nodes\n    if (sourceListTags.includes(this.tagName)) {\n      this.fixResourceNodeUrl(this.el);\n    }\n\n    // Add dynamic script node by loader\n    if (this.is('script')) {\n      parentNode = this.findParentNodeInApp(context, 'body');\n      convertedNode = this.addDynamicScriptNode();\n    }\n    // The style node needs to be placed in the sandbox root container\n    else if (this.is('style')) {\n      parentNode = this.findParentNodeInApp(context, 'head');\n      const manager = new StyleManager(this.el.textContent);\n      manager.correctPath(baseUrl);\n      if (styleScopeId) {\n        manager.setScope({\n          appName: namespace,\n          rootElId: styleScopeId(),\n        });\n      }\n      this.el.textContent = manager.transformCode(manager.styleCode);\n      convertedNode = this.el;\n      this.sandbox.dynamicStyleSheetElementSet.add(this.el);\n      this.monitorChangesOfStyle();\n    }\n    // The link node of the request css needs to be changed to style node\n    else if (this.is('link')) {\n      parentNode = this.findParentNodeInApp(context, 'head');\n      if (this.el.rel === 'stylesheet' && this.el.href) {\n        convertedNode = this.addDynamicLinkNode((styleNode) =>\n          this.nativeAppend.call(parentNode, styleNode),\n        );\n      } else {\n        convertedNode = this.el;\n        this.monitorChangesOfLinkNode();\n      }\n    }\n\n    // Collect nodes that escape the container node\n    if (\n      !this.rootElement.contains(parentNode) &&\n      document.contains(parentNode)\n    ) {\n      if (parentNode !== this.rootElement) {\n        this.sandbox.deferClearEffects.add(() => {\n          this.DOMApis.removeElement(this.el);\n          return this.el;\n        });\n      }\n    }\n\n    // fix innerHTML dom iframe\u3001img src\n    if (this.el && this.el.querySelectorAll) {\n      let needFixDom = this.el.querySelectorAll('iframe,img,video,link,script,audio,style');\n      if (needFixDom.length > 0) {\n        needFixDom.forEach((dom)=>{\n          safeWrapper(()=> this.fixResourceNodeUrl(dom));\n        });\n      }\n    }\n\n    // Fix the bug of react hmr\n    if (this.is('iframe') && typeof this.el.onload === 'function') {\n      const { el, sandbox } = this;\n      const originOnload = el.onload;\n      el.onload = function () {\n        safeWrapper(() => def(el.contentWindow, 'parent', sandbox.global));\n        return originOnload.apply(this, arguments);\n      };\n    }\n\n    if (convertedNode) {\n      // If it is \"insertBefore\" or \"insertAdjacentElement\" method, no need to rewrite when added to the container\n      if (\n        isInsertMethod(this.methodName) &&\n        this.rootElement.contains(context) &&\n        args[1]?.parentNode === context\n      ) {\n        return originProcess();\n      }\n\n      // Emit sandbox `appendNode` event\n      this.sandbox.hooks.lifecycle.appendNode.emit(\n        parentNode,\n        this.el,\n        convertedNode,\n        this.tagName,\n      );\n      return this.nativeAppend.call(parentNode, convertedNode);\n    }\n    return originProcess();\n  }\n\n  removeChild(context: Element, originProcess: Function) {\n    // remove comment node and return the real node\n    if (typeof this.el[__REMOVE_NODE__] === 'function') {\n      this.el[__REMOVE_NODE__]();\n      return this.el;\n    }\n\n    if (this.is('style') || this.is('link') || this.is('script')) {\n      const parentNode = this.findParentNodeInApp(\n        context,\n        this.is('script') ? 'body' : 'head',\n      );\n\n      if (this.el.parentNode === parentNode) {\n        if (this.sandbox.dynamicStyleSheetElementSet.has(this.el)) {\n          this.sandbox.dynamicStyleSheetElementSet.delete(this.el);\n        }\n        return this.nativeRemove.call(parentNode, this.el);\n      }\n    }\n    return originProcess();\n  }\n}\n", "import { makeMap, safeWrapper, warn } from '@garfish/utils';\nimport { StyleManager } from '@garfish/loader';\nimport { __domWrapper__ } from '../symbolTypes';\nimport { injectHandlerParams } from './processParams';\nimport { DynamicNodeProcessor, rawElementMethods } from './processor';\nimport { isInIframe, sandboxMap, isStyledComponentsLike } from '../utils';\nimport { SandboxOptions } from '../types';\n\nconst mountElementMethods = [\n  'append',\n  'appendChild',\n  'insertBefore',\n  'insertAdjacentElement',\n];\nconst removeChildElementMethods = ['removeChild'];\n\nconst ignoreElementTimingTags = makeMap([\n  'STYLE',\n  'SCRIPTS',\n  'LINK',\n  'META',\n  'TITLE',\n]);\n\nfunction injector(current: Function, methodName: string) {\n  return function (this: Element) {\n    // prettier-ignore\n    const el = methodName === 'insertAdjacentElement'\n      ? arguments[1]\n      : arguments[0];\n    const sandbox = sandboxMap.get(el);\n    const originProcess = () => current.apply(this, arguments);\n\n    if (sandbox) {\n      if (el && this?.tagName?.toLowerCase() === 'style') {\n        const manager = new StyleManager(el.textContent);\n        const { baseUrl, namespace, styleScopeId } = sandbox.options;\n        manager.correctPath(baseUrl);\n        manager.setScope({\n          appName: namespace,\n          rootElId: styleScopeId!(),\n        });\n        el.textContent = manager.transformCode(manager.styleCode);\n        return originProcess();\n      } else {\n        const processor = new DynamicNodeProcessor(el, sandbox, methodName);\n        return processor.append(this, arguments, originProcess);\n      }\n    }\n\n    // custom performance Element Timing API\n    // https://web.dev/custom-metrics/#element-timing-api\n    safeWrapper(() => {\n      if (ignoreElementTimingTags(el.tagName)) return;\n      if (\n        el?.setAttribute &&\n        typeof el?.setAttribute === 'function' &&\n        !el?.getAttribute('elementtiming')\n      ) {\n        el?.setAttribute(\n          'elementtiming',\n          sandbox\n            ? `${(sandbox as any).options.namespace}-element-timing`\n            : 'element-timing',\n        );\n      }\n    });\n\n    if (sandbox) {\n      const processor = new DynamicNodeProcessor(el, sandbox, methodName);\n      return processor.append(this, arguments, originProcess);\n    } else {\n      return originProcess();\n    }\n  };\n}\n\nfunction injectorRemoveChild(current: Function, methodName: string) {\n  return function (this: Element) {\n    const el = arguments[0];\n    const sandbox = el && sandboxMap.get(el);\n    const originProcess = () => {\n      // Sandbox may have applied sub dom side effects to delete\n      // by removeChild deleted by the tag determine whether have been removed\n      return current.apply(this, arguments);\n    };\n\n    if (sandbox) {\n      const processor = new DynamicNodeProcessor(el, sandbox, methodName);\n      return processor.removeChild(this, originProcess);\n    }\n    return originProcess();\n  };\n}\n\n// Handle `ownerDocument` to prevent elements created by `ownerDocument.createElement` from escaping\nfunction handleOwnerDocument() {\n  Object.defineProperty(window.Element.prototype, 'ownerDocument', {\n    get() {\n      const sandbox = this && sandboxMap.get(this);\n      const realValue = Reflect.get(\n        window.Node.prototype,\n        'ownerDocument',\n        this,\n      );\n      return sandbox ? sandbox.global.document : realValue;\n    },\n    set() {\n      (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && warn('\"ownerDocument\" is a read-only attribute.');\n    },\n  });\n}\n\nexport function makeElInjector(sandboxConfig: SandboxOptions) {\n  if ((makeElInjector as any).hasInject) return;\n  (makeElInjector as any).hasInject = true;\n\n  if (typeof window.Element === 'function') {\n    // iframe can read html container this can't point to proxyDocument has Illegal invocation error\n    if (sandboxConfig.fixBaseUrl) safeWrapper(()=> handleOwnerDocument());\n    const rewrite = (\n      methods: Array<string>,\n      builder: typeof injector | typeof injectorRemoveChild,\n    ) => {\n      for (const name of methods) {\n        const fn = window.Element.prototype[name];\n        if (typeof fn !== 'function' || fn[__domWrapper__]) {\n          continue;\n        }\n        rawElementMethods[name] = fn;\n        const wrapper = builder(fn, name);\n        wrapper[__domWrapper__] = true;\n        window.Element.prototype[name] = wrapper;\n      }\n    };\n    rewrite(mountElementMethods, injector);\n    rewrite(removeChildElementMethods, injectorRemoveChild);\n  }\n\n  injectHandlerParams();\n}\n\nexport function recordStyledComponentCSSRules(\n  dynamicStyleSheetElementSet: Set<HTMLStyleElement>,\n  styledComponentCSSRulesMap: WeakMap<HTMLStyleElement, CSSRuleList>,\n) {\n  dynamicStyleSheetElementSet.forEach((styleElement) => {\n    if (isStyledComponentsLike(styleElement) && styleElement.sheet) {\n      styledComponentCSSRulesMap.set(styleElement, styleElement.sheet.cssRules);\n    }\n  });\n}\n\nexport function rebuildCSSRules(\n  dynamicStyleSheetElementSet: Set<HTMLStyleElement>,\n  styledComponentCSSRulesMap: WeakMap<HTMLStyleElement, CSSRuleList>,\n) {\n  dynamicStyleSheetElementSet.forEach((styleElement) => {\n    const cssRules = styledComponentCSSRulesMap.get(styleElement);\n    if (cssRules && (isStyledComponentsLike(styleElement) || cssRules.length)) {\n      for (let i = 0; i < cssRules.length; i++) {\n        const cssRule = cssRules[i];\n        // re-insert rules for styled-components element\n        styleElement.sheet?.insertRule(\n          cssRule.cssText,\n          styleElement.sheet?.cssRules.length,\n        );\n      }\n    }\n  });\n}\n", "import { SyncHook, SyncWaterfallHook, PluginSystem } from '@garfish/hooks';\nimport type { interfaces } from '@garfish/core';\nimport type { FakeWindow } from './types';\n\nexport interface DocumentGetterData {\n  value: any;\n  propName: PropertyKey;\n  proxyDocument: Document;\n  rootNode?: null | Element | ShadowRoot;\n  customValue?: any;\n}\n\nexport function sandboxLifecycle() {\n  return new PluginSystem({\n    closed: new SyncHook<[], void>(),\n    stared: new SyncHook<[FakeWindow?], void>(),\n    appendNode: new SyncHook<[Element, Element, Element, string], void>(),\n    documentGetter: new SyncWaterfallHook<DocumentGetterData>('documentGetter'),\n    beforeClearEffect: new SyncHook<[], void>(),\n    afterClearEffect: new SyncHook<[], void>(),\n    beforeInvoke: new SyncHook<\n      [\n        { code: string },\n        string?,\n        Record<string, any>?,\n        interfaces.ExecScriptOptions?,\n      ],\n      void\n    >(),\n    afterInvoke: new SyncHook<\n      [\n        { code: string },\n        string?,\n        Record<string, any>?,\n        interfaces.ExecScriptOptions?,\n      ],\n      void\n    >(),\n    invokeError: new SyncHook<\n      [Error, string?, Record<string, any>?, interfaces.ExecScriptOptions?],\n      void\n    >(),\n  });\n}\n", "import { warn, hasOwn, safari13Deal } from '@garfish/utils';\nimport { Sandbox } from '../sandbox';\nimport { isEsGlobalMethods, isNativeCodeMethods } from '../utils';\nimport { __windowBind__, GARFISH_OPTIMIZE_NAME } from '../symbolTypes';\nimport {\n  bind,\n  isConstructor,\n  verifyGetterDescriptor,\n  verifySetterDescriptor,\n} from './shared';\n\n// window proxy getter\nexport function createGetter(sandbox: Sandbox) {\n  return (target: Window, p: PropertyKey, receiver: any) => {\n    if (p === Symbol.unscopables) return undefined;\n    let value;\n    const { overrideList } = sandbox.replaceGlobalVariables;\n\n    if (sandbox.isProtectVariable(p)) {\n      // Don't pass the \"receiver\", otherwise it will cause the wrong point of this\n      return Reflect.get(window, p);\n    } else if (sandbox.isInsulationVariable(p)) {\n      value = Reflect.get(target, p, receiver);\n    } else {\n      value = hasOwn(target, p)\n        ? Reflect.get(target, p, receiver)\n        : Reflect.get(window, p);\n    }\n\n    if (typeof value === 'function') {\n      // The following situations do not require \"bind\"\n      //  1. The global method on the native es standard\n      //  2. Methods internal to the sandbox or rewritten by the user\n      //  3. Constructor\n      // After filtering out custom and native es functions, only bom and dom functions are left\n      // Make judgments such as constructors for these environment-related functions to further narrow the scope of bind\n      if (\n        isEsGlobalMethods(p) ||\n        isNativeCodeMethods(p) ||\n        hasOwn(overrideList, p) ||\n        isConstructor(value) ||\n        sandbox.isExternalGlobalVariable.has(p)\n      ) {\n        return value;\n      }\n    } else {\n      return value;\n    }\n\n    const newValue = hasOwn(value, __windowBind__)\n      ? value[__windowBind__]\n      : bind(value, window);\n    const verifyResult = verifyGetterDescriptor(target, p, newValue);\n    if (verifyResult > 0) {\n      if (verifyResult === 1) return value;\n      if (verifyResult === 2) return undefined;\n    }\n    value[__windowBind__] = newValue;\n    return newValue;\n  };\n}\n\nconst safariProxyWindowDealHandler = safari13Deal();\n\n// window proxy setter\nexport function createSetter(sandbox: Sandbox) {\n  return (target: Window, p: PropertyKey, value: unknown, receiver: any) => {\n    const verifyResult = verifySetterDescriptor(\n      // prettier-ignore\n      sandbox.isProtectVariable(p)\n        ? window\n        : receiver\n          ? receiver\n          : target,\n      p,\n      value,\n    );\n    // If the value is the same, the setting success will be returned directly. Cannot be set and return to failure directly.\n    // \"Reflect.set\" does not perform this part of processing by default in safari\n    if (verifyResult > 0) {\n      if (verifyResult === 1 || verifyResult === 2) return false;\n      if (verifyResult === 3) return true;\n    }\n\n    if (sandbox.isProtectVariable(p)) {\n      return Reflect.set(window, p, value);\n    } else {\n      // current is setting\n      safariProxyWindowDealHandler.triggerSet();\n      const success = Reflect.set(target, p, value, receiver);\n      if (success) {\n        if (sandbox.initComplete) {\n          sandbox.isExternalGlobalVariable.add(p);\n        }\n\n        // Update need optimization variables\n        if (sandbox.global) {\n          const methods = sandbox.global[`${GARFISH_OPTIMIZE_NAME}Methods`];\n          if (Array.isArray(methods)) {\n            if (methods.includes(p)) {\n              const updateStack =\n                sandbox.global[`${GARFISH_OPTIMIZE_NAME}UpdateStack`];\n              updateStack.forEach((fn) => fn(p, value));\n            }\n          }\n        }\n      }\n      return success;\n    }\n  };\n}\n\n// window proxy defineProperty\nexport function createDefineProperty(sandbox: Sandbox) {\n  return (target: Window, p: PropertyKey, descriptor: PropertyDescriptor) => {\n    safariProxyWindowDealHandler.handleDescriptor(descriptor);\n\n    if (sandbox.isProtectVariable(p)) {\n      return Reflect.defineProperty(window, p, descriptor);\n    } else {\n      const success = Reflect.defineProperty(target, p, descriptor);\n      if (sandbox.initComplete && success) {\n        sandbox.isExternalGlobalVariable.add(p);\n      }\n      return success;\n    }\n  };\n}\n\n// window proxy deleteProperty\nexport function createDeleteProperty(sandbox: Sandbox) {\n  return (target: Window, p: PropertyKey) => {\n    if (hasOwn(target, p)) {\n      delete target[p as any];\n      if (sandbox.initComplete && sandbox.isExternalGlobalVariable.has(p)) {\n        sandbox.isExternalGlobalVariable.delete(p);\n      }\n    } else if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n      if (hasOwn(window, p) && sandbox.isProtectVariable(p)) {\n        warn(`The \"${String(p)}\" is global protect variable.\"`);\n      }\n    }\n    return true;\n  };\n}\n\n// window proxy has\nexport function createHas(sandbox: Sandbox) {\n  return (_target: Window, p: PropertyKey) => {\n    if (sandbox.isProtectVariable(p)) return false;\n    if ((sandbox as any).envVariable === p) return false;\n    return true;\n  };\n}\n", "import { Loader } from '@garfish/loader';\nimport {\n  warn,\n  hasOwn,\n  makeMap,\n  isObject,\n  deepMerge,\n  evalWithEnv,\n  safeWrapper,\n  isPlainObject,\n  setDocCurrentScript,\n} from '@garfish/utils';\nimport type { interfaces } from '@garfish/core';\nimport { historyModule } from './modules/history';\nimport { networkModule } from './modules/network';\nimport { documentModule } from './modules/document';\nimport { UiEventOverride } from './modules/uiEvent';\nimport { localStorageModule } from './modules/storage';\nimport { listenerModule } from './modules/eventListener';\nimport { observerModule } from './modules/mutationObserver';\nimport { timeoutModule, intervalModule } from './modules/timer';\nimport { makeElInjector } from './dynamicNode';\nimport { sandboxLifecycle } from './lifecycle';\nimport { optimizeMethods, createFakeObject, sandboxMap } from './utils';\nimport { __garfishGlobal__, GARFISH_OPTIMIZE_NAME } from './symbolTypes';\nimport { Module, SandboxOptions, ReplaceGlobalVariables } from './types';\nimport {\n  createHas,\n  createGetter,\n  createSetter,\n  createDefineProperty,\n  createDeleteProperty,\n} from './proxyInterceptor/global';\n\nlet id = 0;\nconst defaultModules: Array<Module> = [\n  networkModule,\n  timeoutModule,\n  intervalModule,\n  historyModule,\n  documentModule,\n  listenerModule,\n  observerModule,\n  UiEventOverride,\n  localStorageModule,\n];\n\nconst isModule = (module: Window) => {\n  return isObject(module)\n    ? module[__garfishGlobal__ as any] !== undefined\n    : false;\n};\n\nconst addProxyWindowType = (module: Window, parentModule: Window) => {\n  if (!isModule(module)) {\n    module[__garfishGlobal__ as any] = parentModule;\n  }\n  return module;\n};\n\nexport class Sandbox {\n  public id = id++;\n  public type = 'vm';\n  public closed = true;\n  public initComplete = false;\n  public version = '1.12.0';\n  public global?: Window & typeof globalThis;\n  public loader: Loader;\n  public options: SandboxOptions;\n  public hooks = sandboxLifecycle();\n  public replaceGlobalVariables: ReplaceGlobalVariables;\n  public deferClearEffects: Set<() => void> = new Set();\n  public isExternalGlobalVariable: Set<PropertyKey> = new Set();\n  public isProtectVariable: (p: PropertyKey) => boolean;\n  public isInsulationVariable: (P: PropertyKey) => boolean;\n  public dynamicStyleSheetElementSet = new Set<HTMLStyleElement>();\n  public styledComponentCSSRulesMap = new WeakMap<\n    HTMLStyleElement,\n    CSSRuleList\n  >();\n\n  private optimizeCode = ''; // To optimize the with statement\n  private envVariable = '__GARFISH_SANDBOX_ENV_VAR__';\n\n  constructor(options: SandboxOptions) {\n    // Default sandbox config\n    const defaultOptions: SandboxOptions = {\n      baseUrl: '',\n      namespace: '',\n      modules: [],\n      fixBaseUrl: false,\n      disableWith: false,\n      strictIsolation: false,\n      el: () => null,\n      styleScopeId: () => '',\n      protectVariable: () => [],\n      insulationVariable: () => [],\n    };\n    this.options = isPlainObject(options)\n      ? deepMerge(defaultOptions, options)\n      : defaultOptions;\n\n    const { loaderOptions, protectVariable, insulationVariable } = this.options;\n    this.loader = new Loader(loaderOptions);\n    this.isProtectVariable = makeMap(protectVariable?.() || []);\n    this.isInsulationVariable = makeMap(insulationVariable?.() || []);\n\n    this.replaceGlobalVariables = {\n      createdList: [],\n      prepareList: [],\n      recoverList: [],\n      overrideList: {},\n    };\n    // Inject Global capture\n    makeElInjector(this.options);\n    // The default startup sandbox\n    this.start();\n    sandboxMap.set(this);\n  }\n\n  start() {\n    this.closed = false;\n    this.replaceGlobalVariables = this.getModuleData();\n    const { createdList, overrideList } = this.replaceGlobalVariables;\n    this.global = this.createProxyWindow(Object.keys(overrideList));\n\n    if (overrideList && this.global) {\n      for (const key in overrideList) {\n        this.global[key] = overrideList[key];\n      }\n    }\n    if (createdList) {\n      createdList.forEach((fn) => fn && fn(this.global));\n    }\n    if (!this.options.disableWith) {\n      this.optimizeCode = this.optimizeGlobalMethod();\n    }\n    this.initComplete = true;\n    this.hooks.lifecycle.stared.emit(this.global);\n  }\n\n  close() {\n    if (this.closed) return;\n    this.clearEffects();\n    this.closed = true;\n    this.global = undefined;\n    this.optimizeCode = '';\n    this.initComplete = false;\n    this.deferClearEffects.clear();\n    this.isExternalGlobalVariable.clear();\n    this.dynamicStyleSheetElementSet.clear();\n    this.replaceGlobalVariables.createdList = [];\n    this.replaceGlobalVariables.prepareList = [];\n    this.replaceGlobalVariables.recoverList = [];\n    this.replaceGlobalVariables.overrideList = [];\n    this.hooks.lifecycle.closed.emit();\n  }\n\n  reset() {\n    this.close();\n    this.start();\n  }\n\n  createProxyWindow(moduleKeys: Array<string> = []) {\n    const fakeWindow = createFakeObject(\n      window,\n      this.isInsulationVariable,\n      makeMap(moduleKeys),\n    );\n\n    const baseHandlers = {\n      get: createGetter(this),\n      set: createSetter(this),\n      defineProperty: createDefineProperty(this),\n      deleteProperty: createDeleteProperty(this),\n      getPrototypeOf() {\n        return Object.getPrototypeOf(window);\n      },\n    };\n\n    const parentHandlers = {\n      ...baseHandlers,\n      has: createHas(this),\n      getPrototypeOf() {\n        return Object.getPrototypeOf(window);\n      },\n    };\n\n    // In fact, they are all proxy windows, but the problem of `var a = xx` can be solved through has\n    const proxy = new Proxy(fakeWindow, parentHandlers);\n    const subProxy = new Proxy(fakeWindow, baseHandlers);\n\n    proxy.self = subProxy;\n    proxy.window = subProxy;\n    proxy.globalThis = subProxy;\n    proxy.__debug_sandbox__ = this; // This attribute is used for debugger\n    safeWrapper(() => {\n      // Cross-domain errors may occur during access\n      proxy.top = window.top === window ? subProxy : window.top;\n      proxy.parent = window.parent === window ? subProxy : window.parent;\n    });\n\n    addProxyWindowType(proxy, window);\n    return proxy;\n  }\n\n  getModuleData() {\n    const recoverList: Array<() => void> = [];\n    const createdList: Array<(context: Window | undefined) => void> = [];\n    const prepareList: Array<() => void> = [];\n    const overrideList = {};\n    const allModules = defaultModules.concat(this.options.modules ?? []);\n\n    for (const module of allModules) {\n      if (typeof module === 'function') {\n        const { recover, override, created, prepare } = module(this) || {};\n        if (recover) recoverList.push(recover);\n        if (created) createdList.push(created);\n        if (prepare) prepareList.push(prepare);\n        if (override) {\n          // The latter will overwrite the previous variable\n          for (const key in override) {\n            if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && overrideList[key]) {\n              warn(`\"${key}\" global variables are overwritten.`);\n            }\n            overrideList[key] = override[key];\n          }\n        }\n      }\n    }\n    return { recoverList, createdList, overrideList, prepareList };\n  }\n\n  clearEffects() {\n    this.hooks.lifecycle.beforeClearEffect.emit();\n    this.replaceGlobalVariables.recoverList.forEach((fn) => fn && fn());\n    // `deferClearEffects` needs to be put at the end\n    this.deferClearEffects.forEach((fn) => fn && fn());\n    this.hooks.lifecycle.afterClearEffect.emit();\n  }\n\n  optimizeGlobalMethod(tempEnvKeys: Array<string> = []) {\n    let code = '';\n    const methods = optimizeMethods.filter((p) => {\n      return (\n        // If the method does not exist in the current environment, do not care\n        p &&\n        !this.isProtectVariable(p) &&\n        !tempEnvKeys.includes(p) &&\n        hasOwn(this.global, p)\n      );\n    });\n\n    if (methods.length > 0) {\n      code = methods.reduce((prevCode, name) => {\n        // Can only use `let`, if you use `var`,\n        // declaring the characteristics in advance will cause you to fetch from with,\n        // resulting in a recursive loop\n        return `${prevCode} let ${name} = window.${name};`;\n      }, code);\n\n      if (this.global) {\n        this.global[`${GARFISH_OPTIMIZE_NAME}Methods`] = methods;\n        this.global[`${GARFISH_OPTIMIZE_NAME}UpdateStack`] = [];\n      }\n      code += `window.${GARFISH_OPTIMIZE_NAME}UpdateStack.push(function(k,v){eval(k+\"=v\")});`;\n    }\n\n    if (tempEnvKeys.length > 0) {\n      code = tempEnvKeys.reduce((prevCode, name) => {\n        return `${prevCode} let ${name} = ${this.envVariable}.${name};`;\n      }, code);\n    }\n    return code;\n  }\n\n  createExecParams(codeRef: { code: string }, env: Record<string, any>) {\n    const { disableWith } = this.options;\n    const { prepareList, overrideList } = this.replaceGlobalVariables;\n\n    if (prepareList) {\n      prepareList.forEach((fn) => fn && fn());\n    }\n\n    const params = {\n      window: this.global,\n      ...overrideList,\n    };\n\n    if (disableWith) {\n      Object.assign(params, env);\n    } else {\n      const envKeys = Object.keys(env);\n      const optimizeCode =\n        envKeys.length > 0\n          ? this.optimizeGlobalMethod(envKeys)\n          : this.optimizeCode;\n\n      codeRef.code = `with(window) {;${optimizeCode + codeRef.code}\\n}`;\n      params[this.envVariable] = env;\n    }\n\n    return params;\n  }\n\n  processExecError(\n    e: any,\n    url?: string,\n    env?: Record<string, any>,\n    options?: interfaces.ExecScriptOptions,\n  ) {\n    this.hooks.lifecycle.invokeError.emit(e, url, env, options);\n    // dispatch `window.onerror`\n    if (this.global && typeof this.global.onerror === 'function') {\n      const source = url || this.options.baseUrl;\n      const message = e instanceof Error ? e.message : String(e);\n      safeWrapper(() => {\n        this.global?.onerror?.call(this.global, message, source, null, null, e);\n      });\n    }\n    throw e;\n  }\n\n  execScript(\n    code: string,\n    env = {},\n    url = '',\n    options?: interfaces.ExecScriptOptions,\n  ) {\n    const codeRef = { code };\n    const { async } = options || {};\n\n    this.hooks.lifecycle.beforeInvoke.emit(codeRef, url, env, options);\n\n    const revertCurrentScript = setDocCurrentScript(\n      this.global?.document,\n      codeRef.code,\n      false,\n      url,\n      async,\n      options?.originScript,\n    );\n\n    try {\n      const params = this.createExecParams(codeRef, env);\n      codeRef.code += `\\n${url ? `//# sourceURL=${url}\\n` : ''}`;\n      evalWithEnv(codeRef.code, params, this.global);\n    } catch (e) {\n      this.processExecError(e, url, env, options);\n    } finally {\n      Promise.resolve().then(revertCurrentScript);\n    }\n\n    this.hooks.lifecycle.afterInvoke.emit(codeRef, url, env, options);\n  }\n\n  static getNativeWindow() {\n    let module = window;\n    while (isModule(module)) {\n      module = module[__garfishGlobal__ as any] as Window & typeof globalThis;\n    }\n    return module;\n  }\n\n  static canSupport() {\n    let support = true;\n    if (\n      !window.Proxy ||\n      !Array.prototype.includes ||\n      !String.prototype.includes\n    ) {\n      support = false;\n    }\n    // let statement\n    if (support) {\n      try {\n        new Function('let a = 666;');\n      } catch (e) {\n        support = false;\n      }\n    }\n    if (!support) {\n      warn(\n        'The current environment does not support \"vm sandbox\",' +\n          'Please use the \"snapshot sandbox\" instead.',\n      );\n    }\n    return support;\n  }\n}\n", "import { interfaces } from '@garfish/core';\nimport { warn, isPlainObject } from '@garfish/utils';\nimport { Module } from './types';\nimport { Sandbox } from './sandbox';\nimport { recordStyledComponentCSSRules, rebuildCSSRules } from './dynamicNode';\n\ndeclare module '@garfish/core' {\n  export default interface Garfish {\n    setGlobalValue(key: string, value?: any): void;\n    getGlobalObject: () => Window & typeof globalThis;\n    clearEscapeEffect: (key: string, value?: any) => void;\n  }\n\n  export namespace interfaces {\n    export interface SandboxConfig {\n      modules?: Array<Module> | Record<string, Module>;\n    }\n\n    export interface Config {\n      protectVariable?: PropertyKey[];\n      insulationVariable?: PropertyKey[];\n    }\n\n    export interface AppInfo {\n      protectVariable?: PropertyKey[];\n      insulationVariable?: PropertyKey[];\n    }\n\n    export interface App {\n      vmSandbox?: Sandbox;\n    }\n  }\n}\n\nconst specialExternalVariables = [\n  'onerror',\n  'webpackjsonp',\n  '__REACT_ERROR_OVERLAY_GLOBAL_HOOK__',\n  (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) ? 'webpackHotUpdate' : '',\n];\n\nfunction compatibleOldModule(\n  modules: Array<Module> | Record<string, Module>,\n): Array<Module> {\n  if (!Array.isArray(modules)) {\n    (typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false) && warn('\"vm sandbox\" modules should be an array');\n    const list: Array<Module> = [];\n    for (const key in modules) {\n      list.push(modules[key]);\n    }\n    modules = list;\n  }\n  return modules;\n}\n\nfunction rewriteAppAndSandbox(\n  Garfish: interfaces.Garfish,\n  app: interfaces.App,\n  sandbox: Sandbox,\n) {\n  const originExecScript = sandbox.execScript;\n  // Rewrite sandbox attributes\n  sandbox.loader = Garfish.loader;\n  sandbox.execScript = (code, env, url, options) => {\n    const evalHooksArgs = [app.appInfo, code, env, url, options] as const;\n    app.hooks.lifecycle.beforeEval.emit(...evalHooksArgs);\n    try {\n      const res = originExecScript.call(\n        sandbox,\n        code,\n        {\n          // For application of environment variables\n          ...env,\n          ...app.getExecScriptEnv(options?.noEntry),\n        },\n        url,\n        options,\n      );\n      app.hooks.lifecycle.afterEval.emit(...evalHooksArgs);\n      return res;\n    } catch (err) {\n      app.hooks.lifecycle.errorExecCode.emit(err, ...evalHooksArgs);\n      throw err;\n    }\n  };\n\n  // Rewrite app attributes\n  app.vmSandbox = sandbox;\n  app.global = sandbox.global;\n  app.strictIsolation = sandbox.options.strictIsolation ?? false;\n  app.runCode = function () {\n    return originExecScript.apply(sandbox, arguments);\n  };\n  if (app.entryManager.DOMApis && sandbox.global) {\n    app.entryManager.DOMApis.document = sandbox.global.document;\n  }\n}\n\nfunction createOptions(Garfish: interfaces.Garfish) {\n  const canSupport = Sandbox.canSupport();\n\n  const options: interfaces.Plugin = {\n    name: 'browser-vm',\n    version: '1.12.0',\n\n    afterLoad(appInfo, appInstance) {\n      if (\n        !canSupport ||\n        !appInstance ||\n        appInstance?.vmSandbox ||\n        appInfo.sandbox === false || // Ensure that old versions compatible\n        (appInfo.sandbox && appInfo.sandbox.open === false) ||\n        (appInfo.sandbox && appInfo.sandbox.snapshot)\n      ) {\n        if (appInstance?.vmSandbox) {\n          appInstance.global = appInstance.vmSandbox.global;\n        }\n        return;\n      }\n\n      rewriteAppAndSandbox(\n        Garfish,\n        appInstance,\n        new Sandbox({\n          namespace: appInfo.name,\n          addSourceList: appInstance.addSourceList.bind(appInstance),\n          baseUrl: appInstance.entryManager.url,\n          modules: compatibleOldModule(appInfo.sandbox?.modules || []),\n          fixBaseUrl: Boolean(appInfo.sandbox?.fixBaseUrl),\n          disableWith: Boolean(appInfo.sandbox?.disableWith),\n          strictIsolation: Boolean(appInfo.sandbox?.strictIsolation),\n\n          el: () => appInstance.htmlNode,\n          styleScopeId: () => appInstance.appContainer.id,\n          protectVariable: () => appInfo.protectVariable || [],\n          insulationVariable: () => {\n            return [\n              ...specialExternalVariables,\n              ...(appInfo.insulationVariable || []),\n            ].filter(Boolean);\n          },\n        }),\n      );\n    },\n\n    beforeUnmount(appInfo, appInstance) {\n      if (appInstance.vmSandbox) {\n        recordStyledComponentCSSRules(\n          appInstance.vmSandbox.dynamicStyleSheetElementSet,\n          appInstance.vmSandbox.styledComponentCSSRulesMap,\n        );\n      }\n    },\n\n    // If the app is uninstalled, the sandbox needs to clear all effects and then reset\n    afterUnmount(appInfo, appInstance, isCacheMode) {\n      // The caching pattern to retain the same context\n      if (appInstance.vmSandbox && !isCacheMode) {\n        appInstance.vmSandbox.reset();\n      }\n    },\n\n    afterMount(appInfo, appInstance) {\n      if (appInstance.vmSandbox) {\n        rebuildCSSRules(\n          appInstance.vmSandbox.dynamicStyleSheetElementSet,\n          appInstance.vmSandbox.styledComponentCSSRulesMap,\n        );\n        appInstance.vmSandbox.execScript(`\n          if (typeof window.onload === 'function') {\n            window.onload.call(window);\n          }\n        `);\n      }\n    },\n  };\n  return options;\n}\n\n// Export Garfish plugin\nexport function GarfishBrowserVm() {\n  return function (Garfish: interfaces.Garfish): interfaces.Plugin {\n    Garfish.getGlobalObject = function () {\n      return Sandbox.getNativeWindow();\n    };\n\n    Garfish.setGlobalValue = function (key, value) {\n      return (this.getGlobalObject()[key] = value);\n    };\n\n    Garfish.clearEscapeEffect = function (key, value) {\n      const global = this.getGlobalObject();\n      if (key in global) {\n        global[key] = value;\n      }\n    };\n    return createOptions(Garfish);\n  };\n}\n", "let rawAddEventListener: any;\nlet rawRemoveEventListener: any;\n\nexport class PatchEvent {\n  private listenerMap = new Map<string, EventListenerOrEventListenerObject[]>();\n  constructor() {}\n\n  public activate() {\n    // restore pre event\n    this.listenerMap.forEach((listeners, type) =>\n      [...listeners].forEach((listener) =>\n        window.addEventListener(type, listener),\n      ),\n    );\n\n    if (!rawAddEventListener || !rawRemoveEventListener) {\n      rawAddEventListener = window.addEventListener;\n      rawRemoveEventListener = window.removeEventListener;\n    }\n\n    window.addEventListener = (\n      type: string,\n      listener: EventListenerOrEventListenerObject,\n      options?: boolean | AddEventListenerOptions,\n    ) => {\n      const listeners = this.listenerMap.get(type) || [];\n      this.listenerMap.set(type, [...listeners, listener]);\n      return rawAddEventListener.call(window, type, listener, options);\n    };\n    window.removeEventListener = (\n      type: string,\n      listener: EventListenerOrEventListenerObject,\n      options?: boolean | AddEventListenerOptions,\n    ) => {\n      const storedTypeListeners = this.listenerMap.get(type);\n      if (\n        storedTypeListeners &&\n        storedTypeListeners.length &&\n        storedTypeListeners.indexOf(listener) !== -1\n      ) {\n        storedTypeListeners.splice(storedTypeListeners.indexOf(listener), 1);\n      }\n      return rawRemoveEventListener.call(window, type, listener, options);\n    };\n  }\n\n  public deactivate() {\n    this.listenerMap.forEach((listeners, type) =>\n      [...listeners].forEach((listener) =>\n        window.removeEventListener(type, listener),\n      ),\n    );\n\n    // event\uFF0C\u5728window\u539F\u578B\u94FE\u4E0A\uFF0C\u5C06window\u4E0A\u8986\u76D6\u7684\u4EE3\u7406\u4E8B\u4EF6\u5220\u9664\u5373\u53EF\n    // delete window.removeEventListener;\n    // delete window.addEventListener;\n    window.removeEventListener = rawRemoveEventListener;\n    window.addEventListener = rawAddEventListener;\n  }\n}\n", "export type SnapshotDiff = {\n  created: Snapshot;\n  removed: Snapshot;\n};\n\nexport function isStyledComponentsLike(element: HTMLStyleElement) {\n  // A styled-components liked element has no textContent but keep the rules in its sheet.cssRules.\n  return (\n    element instanceof HTMLStyleElement &&\n    !element.textContent &&\n    element.sheet?.cssRules.length\n  );\n}\n\nexport class Snapshot {\n  constructor(public arrDoms: Array<HTMLElement>) {\n    this.arrDoms = arrDoms;\n  }\n\n  static take(target: HTMLElement): Snapshot;\n  static take<T extends Element = Element>(\n    nodeList: HTMLCollectionOf<T>,\n  ): Snapshot;\n  static take(nodeList?: NodeList): Snapshot;\n  static take(target: HTMLElement | HTMLCollection | NodeList = document.head) {\n    let list: Array<HTMLElement>;\n    if ((target as HTMLElement).childNodes) {\n      list = Array.prototype.slice.call((target as HTMLElement).childNodes);\n    } else {\n      list = Array.prototype.slice.call(target);\n    }\n    return new Snapshot(list);\n  }\n\n  diff(s: Snapshot): SnapshotDiff {\n    if (!s) {\n      return {\n        created: new Snapshot([]),\n        removed: new Snapshot([]),\n      };\n    }\n\n    return {\n      created: new Snapshot(\n        this.arrDoms.filter((d) => s.arrDoms.indexOf(d) === -1),\n      ),\n      removed: new Snapshot(\n        s.arrDoms.filter((d) => this.arrDoms.indexOf(d) === -1),\n      ),\n    };\n  }\n}\n\nexport class Interceptor {\n  dynamicStyleSheetElementSet: Set<HTMLStyleElement>;\n  styledComponentCSSRulesMap: WeakMap<HTMLStyleElement, CSSRuleList>;\n  constructor(public dom: HTMLElement = document.head) {\n    this.dom = dom;\n    this.dynamicStyleSheetElementSet = new Set<HTMLStyleElement>();\n    this.styledComponentCSSRulesMap = new WeakMap<\n      HTMLStyleElement,\n      CSSRuleList\n    >();\n  }\n\n  add(from: Snapshot): void;\n  add(created: Snapshot, removed: Snapshot): void;\n  add(createdOrSnapshot: Snapshot, removed?: Snapshot) {\n    let created: Snapshot;\n    if (!removed) {\n      const diff = Snapshot.take(this.dom).diff(createdOrSnapshot);\n      created = diff.created;\n      removed = diff.removed;\n    } else {\n      created = createdOrSnapshot;\n    }\n    created.arrDoms.reduce((prev, val) => {\n      prev.appendChild(val);\n      if (val instanceof HTMLStyleElement) {\n        const cssRules = this.styledComponentCSSRulesMap.get(val);\n        if (cssRules && cssRules.length) {\n          for (let i = 0; i < cssRules.length; i++) {\n            const cssRule = cssRules[i];\n            // re-insert rules for styled-components element\n            val.sheet?.insertRule(cssRule.cssText, val.sheet?.cssRules.length);\n          }\n        }\n      }\n      return prev;\n    }, this.dom);\n    removed.arrDoms.reduce((prev, val) => {\n      prev.removeChild(val);\n      return prev;\n    }, this.dom);\n  }\n\n  remove(to: Snapshot): void;\n  remove(created: Snapshot, removed: Snapshot): void;\n  remove(createdOrSnapshot: Snapshot, removed?: Snapshot) {\n    let created: Snapshot;\n    if (!removed) {\n      const diff = Snapshot.take(this.dom).diff(createdOrSnapshot);\n      created = diff.created;\n      removed = diff.removed;\n    } else {\n      created = createdOrSnapshot;\n    }\n    created.arrDoms.reduce((prev, val) => {\n      if (\n        val instanceof HTMLStyleElement &&\n        isStyledComponentsLike(val) &&\n        val?.sheet?.cssRules\n      ) {\n        this.styledComponentCSSRulesMap.set(val, val.sheet.cssRules);\n      }\n      prev.removeChild(val);\n      return prev;\n    }, this.dom);\n    removed.arrDoms.reduce((prev, val) => {\n      prev.appendChild(val);\n      return prev;\n    }, this.dom);\n  }\n}\n", "import { Interceptor, Snapshot, SnapshotDiff } from './interceptor';\n\ninterface EffectCt {\n  src: string;\n  outerHTML: string;\n  content: string;\n}\n\ninterface EffectMap {\n  style: Array<EffectCt>;\n  script: Array<EffectCt>;\n  other: Array<EffectCt>;\n}\n\nexport class PatchStyle {\n  public headInterceptor: Interceptor;\n  private domSnapshotBefore!: Snapshot;\n  private domSnapshotMutated!: SnapshotDiff | null;\n\n  constructor() {\n    this.headInterceptor = new Interceptor(document.head);\n  }\n\n  public activate() {\n    // \u8BB0\u5F55\u5F53\u524Ddom\u8282\u70B9\u3001\u6062\u590D\u4E4B\u524Ddom\u8282\u70B9\u526F\u4F5C\u7528\n    this.domSnapshotBefore = Snapshot.take();\n    if (this.domSnapshotMutated)\n      this.headInterceptor.add(\n        this.domSnapshotMutated.created,\n        this.domSnapshotMutated.removed,\n      );\n  }\n\n  public deactivate() {\n    // \u6062\u590D\u6C99\u76D2\u8FD0\u884C\u524Ddom\u8282\u70B9\u73AF\u5883\uFF0C\u5E76\u5C06\u5DEE\u5F02\u503C\u8FDB\u884C\u7F13\u5B58\n    const domSnapshot = Snapshot.take();\n    this.domSnapshotMutated = domSnapshot.diff(this.domSnapshotBefore);\n    if (!this.domSnapshotMutated) return;\n    this.headInterceptor.remove(\n      this.domSnapshotMutated.created,\n      this.domSnapshotMutated.removed,\n    );\n  }\n\n  private formateCtx(arrDoms: Array<HTMLElement>) {\n    const effectMap: EffectMap = {\n      style: [],\n      script: [],\n      other: [],\n    };\n\n    arrDoms.forEach((dom) => {\n      let type: 'other' | 'style' | 'script' = 'other';\n      if (/css/.test((dom as any).type)) type = 'style';\n      if (/javascript/.test((dom as any).type)) type = 'script';\n      effectMap[type].push({\n        src: (dom as any).src,\n        outerHTML: dom.outerHTML,\n        content: dom.innerText,\n      });\n    });\n\n    return effectMap;\n  }\n}\n", "let rawPushState: any;\nlet rawReplaceState: any;\n\nexport class PatchHistory {\n  public activate() {\n    if (!rawPushState || !rawReplaceState) {\n      rawPushState = window.history.pushState;\n      rawReplaceState = window.history.replaceState;\n    }\n  }\n\n  public deactivate() {\n    window.history.pushState = rawPushState;\n    window.history.replaceState = rawReplaceState;\n  }\n}\n", "const rawInterval = window.setInterval;\nconst rawClearInterval = window.clearInterval;\n\nexport class PatchInterval {\n  private intervals: Array<number> = [];\n  constructor() {}\n\n  public activate() {\n    // @ts-ignore\n    window.setInterval = (\n      handler: Function,\n      timeout?: number,\n      ...args: any[]\n    ) => {\n      const intervalId = rawInterval(handler, timeout, ...args);\n      this.intervals = [...this.intervals, intervalId];\n      return intervalId;\n    };\n\n    // @ts-ignore\n    window.clearInterval = (intervalId: number) => {\n      this.intervals = this.intervals.filter((id) => id !== intervalId);\n      return rawClearInterval(intervalId);\n    };\n  }\n\n  public deactivate(_clearEffects?: boolean) {\n    if (_clearEffects) {\n      this.intervals.forEach((id) => window.clearInterval(id));\n    }\n    window.setInterval = rawInterval;\n    window.clearInterval = rawClearInterval;\n  }\n}\n", "const hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwn(obj: any, key: PropertyKey): boolean {\n  return hasOwnProperty.call(obj, key);\n}\n\nexport class PatchGlobalVal {\n  public snapshotOriginal = new Map();\n  private snapshotMutated: any = new Map();\n  private whiteList: Array<PropertyKey> = [\n    'location',\n    'addEventListener',\n    'removeEventListener',\n    'webpackJsonp',\n  ];\n  // ,'addEventListener','removeEventListener','clearInterval','setInterval','webkitStorageInfo'\n  constructor(\n    public targetToProtect: any = typeof window !== 'undefined'\n      ? window\n      : globalThis,\n    public protectVariable: Array<PropertyKey> = [],\n  ) {\n    this.targetToProtect = targetToProtect;\n    this.protectVariable = protectVariable;\n    // this.whiteList = [...this.whiteList, ...GarConfig.protectVariable!];\n    this.whiteList = [...this.whiteList, ...protectVariable];\n  }\n\n  protected safeIterator(fn: Function) {\n    // Skip the variables not traverse\n    // Do not include a symbol\n    for (const i in this.targetToProtect) {\n      if (this.whiteList.indexOf(i) !== -1) {\n        continue;\n      }\n      const prop = Object.getOwnPropertyDescriptor(this.targetToProtect, i);\n      if (!prop || !prop.writable) {\n        continue;\n      }\n      if (hasOwn(this.targetToProtect, i)) {\n        fn(i);\n      }\n    }\n  }\n\n  // 1.Trigger hooks, life cycle willActivate enabled (going to)\n  // 2.Will disable the current group of other box, and triggers the switch life cycle\n  // 3.The current window object properties for caching\n  // 4.Restore the sandbox side effects during operation\n  public activate() {\n    // Recorded before the global environment, restore side effects of a variable\n    this.safeIterator((i: string) => {\n      this.snapshotOriginal.set(i, this.targetToProtect[i]);\n    });\n\n    this.snapshotMutated.forEach((val, mutateKey) => {\n      this.targetToProtect[mutateKey] = this.snapshotMutated.get(mutateKey);\n    });\n  }\n\n  // 1.Restore the sandbox during startup variables change, record the change record\n  // 2.Restore the sandbox during startup to delete variables, record the change record\n  public deactivate() {\n    const deleteMap: any = {};\n    const updateMap: any = {};\n    const addMap: any = {};\n\n    // Restore the sandbox before running Windows properties of environment, and difference value for caching\n    this.safeIterator((normalKey: string) => {\n      if (\n        this.snapshotOriginal.get(normalKey) !==\n        (this.targetToProtect[normalKey] as any)\n      ) {\n        this.snapshotMutated.set(normalKey, this.targetToProtect[normalKey]); // deleted key will be defined as undefined on\n        this.targetToProtect[normalKey] = this.snapshotOriginal.get(normalKey); // || this.targetToProtect[i]\n\n        // Collection of delete, modify variables\n        if (this.targetToProtect[normalKey] === undefined) {\n          addMap[normalKey] = this.snapshotMutated.get(normalKey);\n        } else {\n          updateMap[normalKey] = this.snapshotMutated.get(normalKey);\n        }\n      }\n      this.snapshotOriginal.delete(normalKey);\n    });\n\n    this.snapshotOriginal.forEach((val, deleteKey) => {\n      this.snapshotMutated.set(deleteKey, this.targetToProtect[deleteKey]);\n      this.targetToProtect[deleteKey] = this.snapshotOriginal.get(deleteKey);\n      deleteMap[deleteKey] = this.targetToProtect[deleteKey];\n    });\n\n    // For developers, let them know clear what side effects of a variable\n    // channel.emit('sandbox-variable', {\n    //   update: updateMap,\n    //   removed: deleteMap,\n    //   add: addMap,\n    // });\n  }\n}\n", "declare global {\n  interface Window {\n    webpackJsonp?: any[];\n  }\n}\n\nexport class PatchWebpackJsonp {\n  preWebpackJsonp?: any[];\n\n  currentWebpackJsonp?: any[];\n\n  public activate() {\n    this.preWebpackJsonp = window.webpackJsonp;\n    window.webpackJsonp = this.currentWebpackJsonp;\n  }\n\n  public deactivate() {\n    this.currentWebpackJsonp = window.webpackJsonp;\n    window.webpackJsonp = this.preWebpackJsonp;\n  }\n}\n", "import { PatchEvent } from './patchers/event';\nimport { PatchStyle } from './patchers/style';\nimport { PatchHistory } from './patchers/history';\nimport { PatchInterval } from './patchers/interval';\nimport { PatchGlobalVal } from './patchers/variable';\nimport { PatchWebpackJsonp } from './patchers/webpackjsonp';\n\nexport class Sandbox {\n  public type = 'snapshot';\n  public isRunning: Boolean = false;\n  private patchList: Array<\n    PatchGlobalVal | PatchStyle | PatchInterval | PatchEvent | PatchWebpackJsonp\n  > = [];\n\n  constructor(\n    public name: string,\n    public protectVariable: Array<PropertyKey> = [],\n    public targetToProtect: Window | Object = typeof window !== 'undefined'\n      ? window\n      : globalThis,\n    private isInBrowser: Boolean = typeof window === 'undefined' ? false : true,\n  ) {\n    this.name = name;\n    this.isInBrowser = isInBrowser;\n    this.patchList.push(new PatchGlobalVal(targetToProtect, protectVariable));\n\n    // \u6267\u884C\u987A\u5E8F\u662F\uFF0C\u5168\u5C40\u73AF\u5883\u53D8\u91CF\u5148\u6FC0\u6D3B\uFF0C\u5168\u5C40\u73AF\u5883\u53D8\u91CF\u540E\u9500\u6BC1\n    if (this.isInBrowser) {\n      this.patchList = [\n        ...this.patchList,\n        new PatchStyle(),\n        new PatchEvent(),\n        new PatchHistory(),\n        new PatchInterval(),\n        new PatchWebpackJsonp(),\n      ];\n    }\n  }\n\n  //  1.\u89E6\u53D1\u751F\u547D\u5468\u671F\u94A9\u5B50\uFF0CwillActivate\uFF08\u5C06\u8981\u6FC0\u6D3B\uFF09\n  //  2.\u5C06\u5F53\u524D\u7EC4\u7684\u5176\u4ED6\u6C99\u76D2disable\uFF0C\u5E76\u89E6\u53D1switch\u751F\u547D\u5468\u671F\n  //  3.\u5C06\u5F53\u524Dwindow\u5BF9\u8C61\u5C5E\u6027\u8FDB\u884C\u7F13\u5B58\n  //  4.\u83B7\u53D6style\u8282\u70B9\uFF0C\u8FDB\u884C\u7F13\u5B58\n  //  5.\u6062\u590D\u6C99\u76D2\u8FD0\u884C\u671F\u95F4\u4EA7\u751F\u7684\u526F\u4F5C\u7528\n  public activate() {\n    if (this.isRunning) return;\n    this.patchList.forEach((patch) => {\n      patch.activate();\n    });\n    this.isRunning = true;\n  }\n\n  // 1.\u6062\u590D\u6C99\u76D2\u542F\u52A8\u671F\u95F4\u53D8\u91CF\u53D8\u66F4\u7684\u53D8\u91CF\uFF0C\u8BB0\u5F55\u53D8\u66F4\u8BB0\u5F55\n  // 2.\u6062\u590D\u6C99\u76D2\u542F\u52A8\u671F\u95F4\u5220\u9664\u7684\u53D8\u91CF\uFF0C\u8BB0\u5F55\u53D8\u66F4\u8BB0\u5F55\n  public deactivate(clearEffects: boolean = true) {\n    if (!this.isRunning) return; // \u6700\u540E\u9500\u6BC1\u5168\u5C40\u53D8\u91CF\u5B88\u62A4\n    [...this.patchList].reverse().forEach((patch) => {\n      patch.deactivate(clearEffects);\n    });\n    this.isRunning = false;\n  }\n}\n", "import { Sandbox } from './sandbox';\nimport { interfaces } from '@garfish/core';\nimport './globalExtensions';\n\nexport { Sandbox as default } from './sandbox';\n\nexport interface SandboxConfig {\n  snapshot?: boolean;\n  disableWith?: boolean;\n  strictIsolation?: boolean;\n}\n\ninterface BrowserConfig {\n  open?: boolean;\n  protectVariable?: PropertyKey[];\n}\n\nexport function GarfishBrowserSnapshot(op?: BrowserConfig) {\n  return function (Garfish: interfaces.Garfish): interfaces.Plugin {\n    const options = {\n      openBrowser: false,\n      version: '1.12.0',\n      name: 'browser-snapshot',\n\n      afterLoad(appInfo, appInstance) {\n        const config: BrowserConfig = op || { open: true };\n        const sandboxConfig = appInfo.sandbox || Garfish?.options?.sandbox;\n        if (\n          sandboxConfig === false ||\n          sandboxConfig.open === false ||\n          sandboxConfig?.snapshot === false\n        ) {\n          config.open = false;\n        }\n        if (sandboxConfig) {\n          config.protectVariable = [\n            ...(Garfish?.options.protectVariable || []),\n            ...(appInfo.protectVariable || []),\n          ];\n        }\n        options.openBrowser = !!config.open;\n        if (!config.open) return;\n        if (appInstance) {\n          // existing\n          if (appInstance.snapshotSandbox) return;\n          const sandbox = new Sandbox(appInfo.name, config.protectVariable);\n          appInstance.snapshotSandbox = sandbox;\n        }\n      },\n\n      beforeMount(appInfo, appInstance) {\n        // existing\n        if (!appInstance.snapshotSandbox) return;\n        appInstance.snapshotSandbox.activate();\n      },\n\n      afterUnmount(appInfo, appInstance) {\n        if (!appInstance.snapshotSandbox) return;\n        appInstance.snapshotSandbox.deactivate();\n      },\n    };\n    return options;\n  };\n}\n", "import Garfish from '@garfish/core';\nimport { GarfishRouter } from '@garfish/router';\nimport { GarfishBrowserVm } from '@garfish/browser-vm';\nimport { GarfishBrowserSnapshot } from '@garfish/browser-snapshot';\nimport { def, warn, hasOwn, inBrowser, __GARFISH_FLAG__ } from '@garfish/utils';\n\ndeclare global {\n  interface Window {\n    Garfish: Garfish;\n    __GARFISH__: boolean;\n  }\n}\n\n// Initialize the Garfish, currently existing environment to allow only one instance (export to is for test)\nfunction createContext(): Garfish {\n  let fresh = false;\n  // Existing garfish instance, direct return\n  if (inBrowser() && window['__GARFISH__'] && window['Garfish']) {\n    return window['Garfish'];\n  }\n\n  const GarfishInstance = new Garfish({\n    plugins: [GarfishRouter(), GarfishBrowserVm(), GarfishBrowserSnapshot()],\n  });\n\n  type globalValue = boolean | Garfish | Record<string, unknown>;\n  const set = (namespace: string, val: globalValue = GarfishInstance) => {\n    if (hasOwn(window, namespace)) {\n      if (!(window[namespace] && window[namespace].flag === __GARFISH_FLAG__)) {\n        const next = () => {\n          fresh = true;\n          if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n            warn(`\"Window.${namespace}\" will be overwritten by \"garfish\".`);\n          }\n        };\n        const desc = Object.getOwnPropertyDescriptor(window, namespace);\n        if (desc) {\n          if (desc.configurable) {\n            def(window, namespace, val);\n            next();\n          } else if (desc.writable) {\n            window[namespace] = val;\n            next();\n          }\n        }\n      }\n    } else {\n      fresh = true;\n      def(window, namespace, val);\n    }\n  };\n\n  if (inBrowser()) {\n    // Global flag\n    set('Garfish');\n    def(window, '__GARFISH__', true);\n  }\n\n  if (fresh) {\n    if ((typeof process !== \"undefined\" && process.env && process.env.NODE_ENV ? (process.env.NODE_ENV !== \"production\") : false)) {\n      if ('1.12.0' !== window['Garfish'].version) {\n        warn(\n          'The \"garfish version\" used by the main and sub-applications is inconsistent.',\n        );\n      }\n    }\n  }\n  return GarfishInstance;\n}\n\nexport const GarfishInstance = createContext();\n", "import { interfaces } from '@garfish/core';\nimport { GarfishInstance } from './instance';\n\nexport interface CustomOptions {\n  loading: (loadingParams: { isLoading: boolean; error: Error }) => Element;\n  delay: number;\n  config?: interfaces.Config;\n}\n\nexport function generateCustomerElement(\n  htmlTag: string,\n  options: CustomOptions,\n) {\n  class MicroApp extends HTMLElement {\n    appInfo = {\n      name: '',\n      entry: '',\n      basename: '',\n    };\n    options: {\n      loading?: (loadingParams: {\n        isLoading: boolean;\n        error: Error;\n        pastDelay: boolean;\n      }) => Element;\n      delay: number;\n    } = {\n      delay: 200,\n    };\n    placeholder: Element;\n    state = this._observerAppState({\n      isLoading: false,\n      error: null,\n      promise: null,\n      loaded: null,\n      pastDelay: false,\n    });\n    _delay: ReturnType<typeof setTimeout>;\n\n    constructor() {\n      super();\n      this.options = options;\n    }\n\n    _observerAppState(state) {\n      return new Proxy(state, {\n        set: (target: any, p: string | symbol, value: any, receiver: any) => {\n          // Loading status content display in the loading process\n          // Error display error\n          const getPlaceHolderAndAppend = () => {\n            // Remove the existing placeholder content\n            if (this.placeholder && this.contains(this.placeholder)) {\n              this.removeChild(this.placeholder);\n            }\n            const placeholder =\n              this.options.loading &&\n              this.options.loading({\n                isLoading: this.state.isLoading,\n                error: this.state.error,\n                pastDelay: this.state.pastDelay,\n              });\n            placeholder && this.appendChild(placeholder);\n            return placeholder;\n          };\n\n          const res = Reflect.set(target, p, value, receiver);\n          // Loading began to open the loading placeholder\n          // Loading end closed loading placeholder\n          // Loading end placeholder closed if there is no mistake\n          if (p === 'error' && value) {\n            const placeholder = getPlaceHolderAndAppend();\n            if (placeholder) this.placeholder = placeholder;\n          } else if (p === 'pastDelay' && value === true) {\n            const placeholder = getPlaceHolderAndAppend();\n            if (placeholder) this.placeholder = placeholder;\n          } else if (p === 'isLoading' && value === true) {\n            const placeholder = getPlaceHolderAndAppend();\n            if (placeholder) this.placeholder = placeholder;\n          } else if (p === 'isLoading' && value === false) {\n            if (!this.state.error && this.contains(this.placeholder)) {\n              this.removeChild(this.placeholder);\n            }\n          }\n          return res;\n        },\n      });\n    }\n\n    _loadApp() {\n      // If you are loading stop continue to load\n      if (this.state.isLoading) return;\n      this.state.isLoading = true;\n\n      // Avoid loading flash back\n      if (typeof this.options.delay === 'number') {\n        if (this.options.delay === 0) {\n          this.state.pastDelay = true;\n        } else {\n          this._delay = setTimeout(() => {\n            this.state.pastDelay = true;\n          }, this.options.delay);\n        }\n      }\n\n      this.state.promise = GarfishInstance.loadApp(this.appInfo.name, {\n        entry: this.appInfo.entry,\n        domGetter: () => this,\n        basename: this.appInfo.basename,\n        sandbox: {\n          snapshot: false,\n          strictIsolation: this.hasAttribute('shadow') || false,\n        },\n      });\n    }\n\n    _clearTimeouts() {\n      clearTimeout(this._delay);\n    }\n\n    async connectedCallback() {\n      this.appInfo = {\n        name: this.getAttribute('name') || '',\n        entry: this.getAttribute('entry') || '',\n        basename: this.getAttribute('basename') || '/',\n      };\n      try {\n        this._loadApp();\n        this.state.loaded = await this.state.promise;\n        if (this.state.loaded.mounted) {\n          this.state.loaded.show();\n        } else {\n          await this.state.loaded.mount();\n        }\n      } catch (error) {\n        this.state.error = error;\n      } finally {\n        this.state.isLoading = false;\n      }\n    }\n\n    disconnectedCallback() {\n      this._clearTimeouts();\n      if (this.state.loaded) {\n        this.state.loaded.hide();\n      }\n    }\n\n    async adoptedCallback() {\n      // console.log('Custom square element moved to new page.');\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n      console.log(\n        'Custom square element attributes changed.',\n        name,\n        oldValue,\n        newValue,\n      );\n    }\n  }\n\n  // Define the new element\n  if (!customElements.get(htmlTag)) {\n    GarfishInstance.run(options.config || {});\n    customElements.define(htmlTag, MicroApp);\n  }\n}\n\nfunction createLoadableWebComponent(htmlTag: string, options: CustomOptions) {\n  if (typeof htmlTag !== 'string') {\n    throw new Error('garfish requires a `htmlTag` name');\n  }\n\n  if (!options.loading) {\n    throw new Error('garfish requires a `loading` component');\n  }\n\n  const opts = Object.assign(\n    {\n      loading: false,\n      delay: 200,\n      timeout: null,\n    },\n    options,\n  );\n  return generateCustomerElement(htmlTag, opts);\n}\n\nexport function defineCustomElements(htmlTag: string, options: CustomOptions) {\n  return createLoadableWebComponent(htmlTag, options);\n}\n"],
  "mappings": "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",
  "names": []
}
